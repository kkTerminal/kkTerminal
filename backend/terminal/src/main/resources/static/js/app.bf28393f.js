(function(){var e={2660:function(e,l,t){"use strict";var a=t(7387),o=t.n(a),i=(t(1439),t(7585),t(5315),t(8082)),s=t.n(i),n=t(6681);let r=null,u=null;const d={aes(e){r=e},rsa(e){u=e}},c=(e,l)=>{const t=l||r;if(!t||!e)return null;const a=s().enc.Utf8.parse(t),o=s().enc.Utf8.parse(e),i=s().AES.encrypt(o,a,{mode:s().mode.ECB,padding:s().pad.Pkcs7});return i.toString()},p=(e,l)=>{const t=l||r;if(!t||!e)return null;const a=s().enc.Utf8.parse(t),o=new Uint8Array(e),i=s().lib.WordArray.create(o),n=s().AES.encrypt(i,a,{mode:s().mode.ECB,padding:s().pad.Pkcs7});return n.toString()},m=(e,l)=>{const t=l||r;if(!t||!e)return null;const a=s().enc.Utf8.parse(t),o=s().AES.decrypt(e,a,{mode:s().mode.ECB,padding:s().pad.Pkcs7});return s().enc.Utf8.stringify(o).toString()},v=(e,l)=>{const t=l||u;if(!t||!e)return null;const a=new n.Z;return a.setPublicKey(t),a.encrypt(e)};var g=t(9242),f=t(3396);function w(e,l,t,a,o,i){const s=(0,f.up)("FrameWork");return a.isInitialized?((0,f.wg)(),(0,f.j4)(s,{key:0,osInfo:a.osInfo},null,8,["osInfo"])):(0,f.kq)("",!0)}var y=t(7139),h=t.p+"img/terminal.1e64b509.svg",k=t.p+"img/transport.e477661d.svg";const _=e=>((0,f.dD)("data-v-9098e826"),e=e(),(0,f.Cn)(),e),b={class:"global"},x={class:"setting"},C=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),D=_((()=>(0,f._)("div",null,"Docker",-1))),S=[D],W={key:0,class:"kk-flex bar"},z=_((()=>(0,f._)("img",{src:h,alt:"terminal",style:{height:"16px",margin:"0 7px",cursor:"pointer"}},null,-1))),I=[z],T=_((()=>(0,f._)("div",{class:"ellipsis no-select",style:{"font-size":"14px","line-height":"18px"}},[(0,f._)("span",null,"kk Terminal")],-1))),V=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),F={class:"kk-flex"},$={key:0,class:"bar-tag"},U={class:"kk-flex no-select"},R={key:1,class:"bar-tag"},H={key:0,class:"kk-flex no-select",style:{color:"#313131"}},E={key:1,class:"kk-flex no-select"},N={key:2,class:"bar-tag"},O={class:"kk-flex no-select",style:{color:"#313131"}},K=_((()=>(0,f._)("img",{src:k,alt:"transport",style:{height:"20px"}},null,-1))),L=[K],A={key:0,class:"trans-items"},M=_((()=>(0,f._)("div",{style:{"margin-left":"15px"}},null,-1))),P={class:"kk-flex-column"},j={class:"trans-item-name ellipsis",style:{width:"360px"}},B={class:"trans-item-size"},q=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),G=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Y={key:1},Z={key:0,class:"trans-items"},J=_((()=>(0,f._)("div",{style:{"margin-left":"15px"}},null,-1))),X={class:"kk-flex-column"},Q={class:"trans-item-name ellipsis",style:{width:"360px"}},ee={class:"trans-item-size"},le=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),te=_((()=>(0,f._)("div",{style:{"margin-left":"10px"}},null,-1))),ae=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),oe={key:1},ie={key:0,class:"trans-items"},se=_((()=>(0,f._)("div",{style:{"margin-left":"15px"}},null,-1))),ne={class:"kk-flex-column"},re={class:"trans-item-name ellipsis",style:{width:"360px"}},ue={class:"trans-item-size"},de=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),ce=_((()=>(0,f._)("div",{style:{"margin-left":"10px"}},null,-1))),pe=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),me={key:1},ve={key:0,class:"trans-items"},ge=_((()=>(0,f._)("div",{style:{"margin-left":"15px"}},null,-1))),fe={class:"kk-flex-column"},we={class:"trans-item-name ellipsis",style:{width:"360px"}},ye={class:"trans-item-size"},he=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),ke=_((()=>(0,f._)("div",{style:{"margin-left":"10px"}},null,-1))),_e=_((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),be={key:1},xe={key:4,class:"kk-flex",style:{"margin-right":"10px"}},Ce={style:{"margin-right":"3px"}},De={key:0,class:"no-select",style:{"font-size":"12px",color:"#313131"}},Se={style:{"font-size":"16px","font-weight":"bold"}},We={style:{"margin-top":"5px"}},ze={class:"kk-flex",style:{"margin-top":"5px"}},Ie=_((()=>(0,f._)("div",{style:{"background-color":"#f3f4f4","user-select":"text"}},"STC",-1))),Te={class:"kk-flex",style:{"margin-top":"5px"}},Ve=_((()=>(0,f._)("div",{style:{"background-color":"#f3f4f4","user-select":"text"}},"STW",-1))),Fe=_((()=>(0,f._)("div",{style:{"margin-left":"5px"}},null,-1))),$e={ref:"terminal",style:{flex:"1"}};function Ue(e,l,t,a,o,i){const s=(0,f.up)("ArrowRight"),n=(0,f.up)("el-icon"),r=(0,f.up)("UserFilled"),u=(0,f.up)("el-tag"),d=(0,f.up)("VideoPlay"),c=(0,f.up)("VideoPause"),p=(0,f.up)("ChromeFilled"),m=(0,f.up)("el-badge"),v=(0,f.up)("FileIcons"),w=(0,f.up)("ToolTip"),h=(0,f.up)("el-progress"),k=(0,f.up)("NoData"),_=(0,f.up)("el-tab-pane"),D=(0,f.up)("FolderOpened"),z=(0,f.up)("CircleClose"),K=(0,f.up)("el-tabs"),Ue=(0,f.up)("el-card"),Re=(0,f.up)("el-dropdown"),He=(0,f.up)("el-input"),Ee=(0,f.up)("QuestionFilled"),Ne=(0,f.up)("el-popover"),Oe=(0,f.up)("ConnectSetting"),Ke=(0,f.up)("PreferenceSetting"),Le=(0,f.up)("FileBlock"),Ae=(0,f.up)("TCodeWorkflow"),Me=(0,f.up)("TCodeCenter"),Pe=(0,f.up)("CooperateGen"),je=(0,f.up)("StatusMonitor"),Be=(0,f.up)("DockerBlock");return(0,f.wg)(),(0,f.iD)(f.HY,null,[(0,f._)("div",b,[(0,f.wy)((0,f._)("div",x,[(0,f._)("div",{class:"setting-menu no-select",onClick:l[0]||(l[0]=e=>a.doSettings(1))},[(0,f._)("div",null,(0,y.zw)(e.$t("连接设置")),1)]),(0,f._)("div",{class:"setting-menu no-select",onClick:l[1]||(l[1]=e=>a.doSettings(2))},[(0,f._)("div",null,(0,y.zw)(e.$t("偏好设置")),1)]),(0,f._)("div",{class:"setting-menu no-select",onClick:l[2]||(l[2]=e=>a.doSettings(4))},[(0,f._)("div",null,(0,y.zw)(e.$t("文件管理")),1)]),(0,f._)("div",{onMousemove:l[3]||(l[3]=e=>a.showAdvance(!0)),onMouseleave:l[4]||(l[4]=e=>a.showAdvance(!1)),class:(0,y.C_)(["setting-menu","no-select",a.sshKey&&a.env.advance?"":"disabled"]),onClick:l[5]||(l[5]=e=>a.doSettings(5))},[(0,f._)("div",null,(0,y.zw)(e.$t("高级")),1),C,(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(s)])),_:1})],34),(0,f._)("div",{class:"setting-menu no-select",onClick:l[6]||(l[6]=e=>a.doSettings(3))},[(0,f._)("div",null,(0,y.zw)(e.$t("重启")),1)])],512),[[g.F8,a.isShowSetting&&"headless"!==a.urlParams.mode&&"pure"!==a.urlParams.mode]]),(0,f.wy)((0,f._)("div",{onMousemove:l[10]||(l[10]=e=>a.showAdvance(!0)),onMouseleave:l[11]||(l[11]=e=>a.showAdvance(!1)),class:(0,y.C_)(["advance",a.sshKey&&a.env.advance?"":"disabled"])},[(0,f._)("div",{class:"setting-menu no-select",onClick:l[7]||(l[7]=e=>a.doSettings(6))},[(0,f._)("div",null,(0,y.zw)(e.$t("协作")),1)]),(0,f._)("div",{class:(0,y.C_)(["setting-menu","no-select","root"===a.env.server_user?"":"disabled"]),onClick:l[8]||(l[8]=e=>a.doSettings(7))},[(0,f._)("div",null,(0,y.zw)(e.$t("监控")),1)],2),(0,f._)("div",{class:"setting-menu no-select",onClick:l[9]||(l[9]=e=>a.doSettings(8))},S)],34),[[g.F8,a.isShowSetting&&a.isShowAdvance&&"headless"!==a.urlParams.mode&&"pure"!==a.urlParams.mode]]),"headless"!==a.urlParams.mode?((0,f.wg)(),(0,f.iD)("div",W,[(0,f._)("div",{class:"no-select",onClick:l[12]||(l[12]=e=>{a.isShowSetting=!a.isShowSetting,a.isShowAdvance=!1,a.showAdvance(!1)})},I),T,V,(0,f.wy)((0,f._)("div",F,[a.cooperating?((0,f.wg)(),(0,f.iD)("div",$,[(0,f.Wm)(u,{size:"small",onClick:a.endCooperateConfirm,type:a.calcType(a.onlineNumber,a.maxNumber),effect:"plain"},{default:(0,f.w5)((()=>[(0,f._)("div",U,[(0,f.Wm)(n,{class:"el-icon--left",style:{"font-size":"18px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(r)])),_:1}),(0,f._)("div",null,(0,y.zw)(a.onlineNumber),1)])])),_:1},8,["onClick","type"])])):(0,f.kq)("",!0),a.env.cloud?((0,f.wg)(),(0,f.iD)("div",R,[(0,f.Wm)(u,{onClick:l[13]||(l[13]=e=>a.recording?a.stopRecord():a.startRecord()),size:"small",type:a.recording?"danger":"info",effect:"plain"},{default:(0,f.w5)((()=>[a.recording?((0,f.wg)(),(0,f.iD)("div",E,[(0,f.Wm)(n,{class:"el-icon--left",style:{"font-size":"18px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(c)])),_:1}),(0,f._)("div",null,(0,y.zw)(e.$t("录制中")),1)])):((0,f.wg)(),(0,f.iD)("div",H,[(0,f.Wm)(n,{class:"el-icon--left",style:{"font-size":"18px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1}),(0,f._)("div",null,(0,y.zw)(e.$t("开始录制")),1)]))])),_:1},8,["type"])])):(0,f.kq)("",!0),a.env.cloud?((0,f.wg)(),(0,f.iD)("div",N,[(0,f.Wm)(u,{onClick:a.cloudSync,size:"small",type:"info",effect:"plain"},{default:(0,f.w5)((()=>[(0,f._)("div",O,[(0,f.Wm)(n,{class:"el-icon--left",style:{"font-size":"18px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1}),(0,f._)("div",null,(0,y.zw)(e.$t("多端同步")),1)])])),_:1},8,["onClick"])])):(0,f.kq)("",!0),a.env.transport?((0,f.wg)(),(0,f.j4)(Re,{key:3,onVisibleChange:a.changeDropdownShowStatus,class:"bar-tag","hide-timeout":"300",trigger:"click"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(Ue,{class:"no-select",style:{width:"512px"},"body-style":{padding:"5px 5px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(K,{stretch:"",type:"border-card",class:"trans-tabs"},{default:(0,f.w5)((()=>[(0,f.Wm)(_,null,{label:(0,f.w5)((()=>[(0,f.Wm)(m,{"show-zero":!1,value:Object.keys(a.waitingList).length,max:99,offset:[6,2],type:"warning"},{default:(0,f.w5)((()=>[(0,f._)("div",null,(0,y.zw)(e.$t("等待中")),1)])),_:1},8,["value"])])),default:(0,f.w5)((()=>[Object.keys(a.waitingList).length>0?((0,f.wg)(),(0,f.iD)("div",A,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.waitingList,(e=>((0,f.wg)(),(0,f.iD)("div",{key:e.id,class:"kk-flex trans-item",style:{height:"64px",width:"512px"}},[(0,f.Wm)(v,{name:e.name,width:24,height:24,isFolder:-1==e.size},null,8,["name","isFolder"]),M,(0,f._)("div",P,[(0,f.Wm)(w,{content:e.path+e.name,delay:1e3},{content:(0,f.w5)((()=>[(0,f._)("div",j,(0,y.zw)(e.path+e.name),1)])),_:2},1032,["content"]),(0,f._)("div",B,(0,y.zw)(a.calcSize(e.size)),1)]),q,(0,f.Wm)(h,{class:"trans-progress",width:"48",type:"circle",percentage:e.progress},null,8,["percentage"]),G])))),128))])):((0,f.wg)(),(0,f.iD)("div",Y,[(0,f.Wm)(k,{height:"256px"})]))])),_:1}),(0,f.Wm)(_,null,{label:(0,f.w5)((()=>[(0,f.Wm)(m,{"show-zero":!1,value:Object.keys(a.uploadingList).length,max:99,offset:[6,2],type:"danger"},{default:(0,f.w5)((()=>[(0,f._)("div",null,(0,y.zw)(e.$t("正在上传")),1)])),_:1},8,["value"])])),default:(0,f.w5)((()=>[Object.keys(a.uploadingList).length>0?((0,f.wg)(),(0,f.iD)("div",Z,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.uploadingList,(e=>((0,f.wg)(),(0,f.iD)("div",{key:e.id,class:"kk-flex trans-item",style:{height:"64px",width:"512px"}},[(0,f.Wm)(v,{name:e.name,width:24,height:24,isFolder:-1==e.size},null,8,["name","isFolder"]),J,(0,f._)("div",X,[(0,f.Wm)(w,{content:e.path+e.name,delay:1e3},{content:(0,f.w5)((()=>[(0,f._)("div",Q,(0,y.zw)(e.path+e.name),1)])),_:2},1032,["content"]),(0,f._)("div",ee,(0,y.zw)(a.calcSize(e.size)),1)]),le,(0,f.Wm)(n,{onClick:l=>a.fileBlockView(e.path,e.name),class:"el-icon--left folder-hover"},{default:(0,f.w5)((()=>[(0,f.Wm)(D)])),_:2},1032,["onClick"]),te,(0,f.Wm)(n,{onClick:l=>a.updateTransportLists(1,1,e.id,null),class:"el-icon--left close-hover"},{default:(0,f.w5)((()=>[(0,f.Wm)(z)])),_:2},1032,["onClick"]),ae])))),128))])):((0,f.wg)(),(0,f.iD)("div",oe,[(0,f.Wm)(k,{height:"256px"})]))])),_:1}),(0,f.Wm)(_,null,{label:(0,f.w5)((()=>[(0,f.Wm)(m,{"show-zero":!1,value:Object.keys(a.downloadingList).length,max:99,offset:[6,2],type:"danger"},{default:(0,f.w5)((()=>[(0,f._)("div",null,(0,y.zw)(e.$t("正在下载")),1)])),_:1},8,["value"])])),default:(0,f.w5)((()=>[Object.keys(a.downloadingList).length>0?((0,f.wg)(),(0,f.iD)("div",ie,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.downloadingList,(e=>((0,f.wg)(),(0,f.iD)("div",{key:e.id,class:"kk-flex trans-item",style:{height:"64px",width:"512px"}},[(0,f.Wm)(v,{name:e.name,width:24,height:24,isFolder:-1==e.size},null,8,["name","isFolder"]),se,(0,f._)("div",ne,[(0,f.Wm)(w,{content:e.path+e.name,delay:1e3},{content:(0,f.w5)((()=>[(0,f._)("div",re,(0,y.zw)(e.path+e.name),1)])),_:2},1032,["content"]),(0,f._)("div",ue,(0,y.zw)(a.calcSize(e.size)),1)]),de,(0,f.Wm)(n,{onClick:l=>a.fileBlockView(e.path,e.name),class:"el-icon--left folder-hover"},{default:(0,f.w5)((()=>[(0,f.Wm)(D)])),_:2},1032,["onClick"]),ce,(0,f.Wm)(n,{onClick:l=>a.updateTransportLists(2,1,e.id,null),class:"el-icon--left close-hover"},{default:(0,f.w5)((()=>[(0,f.Wm)(z)])),_:2},1032,["onClick"]),pe])))),128))])):((0,f.wg)(),(0,f.iD)("div",me,[(0,f.Wm)(k,{height:"256px"})]))])),_:1}),(0,f.Wm)(_,null,{label:(0,f.w5)((()=>[(0,f.Wm)(m,{"show-zero":!1,value:Object.keys(a.finishedList).length,max:99,offset:[6,2],type:"success"},{default:(0,f.w5)((()=>[(0,f._)("div",null,(0,y.zw)(e.$t("已完成")),1)])),_:1},8,["value"])])),default:(0,f.w5)((()=>[Object.keys(a.finishedList).length>0?((0,f.wg)(),(0,f.iD)("div",ve,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.finishedList,(e=>((0,f.wg)(),(0,f.iD)("div",{key:e.id,class:"kk-flex trans-item",style:{height:"64px",width:"512px"}},[(0,f.Wm)(v,{name:e.name,width:24,height:24,isFolder:-1==e.size},null,8,["name","isFolder"]),ge,(0,f._)("div",fe,[(0,f.Wm)(w,{content:e.path+e.name,delay:1e3},{content:(0,f.w5)((()=>[(0,f._)("div",we,(0,y.zw)(e.path+e.name),1)])),_:2},1032,["content"]),(0,f._)("div",ye,(0,y.zw)(a.calcSize(e.size)),1)]),he,(0,f.Wm)(n,{onClick:l=>a.fileBlockView(e.path,e.name),class:"el-icon--left folder-hover"},{default:(0,f.w5)((()=>[(0,f.Wm)(D)])),_:2},1032,["onClick"]),ke,(0,f.Wm)(n,{onClick:l=>a.updateTransportLists(3,1,e.id,null),class:"el-icon--left close-hover"},{default:(0,f.w5)((()=>[(0,f.Wm)(z)])),_:2},1032,["onClick"]),_e])))),128))])):((0,f.wg)(),(0,f.iD)("div",be,[(0,f.Wm)(k,{height:"256px"})]))])),_:1})])),_:1})])),_:1})])),default:(0,f.w5)((()=>[(0,f.Wm)(m,{hidden:a.isShowDropdown||!a.isShowDot,"is-dot":!0,offset:[0,4]},{default:(0,f.w5)((()=>[(0,f._)("span",{onClick:l[14]||(l[14]=e=>{a.isShowDot=!1})},L)])),_:1},8,["hidden"])])),_:1},8,["onVisibleChange"])):(0,f.kq)("",!0),a.env.tCode?((0,f.wg)(),(0,f.iD)("div",xe,[(0,f._)("div",Ce,[(0,f.Wm)(He,{modelValue:a.tcode,"onUpdate:modelValue":l[15]||(l[15]=e=>a.tcode=e),style:{width:"100px",height:"20px",fontSize:"12px"},onKeydown:a.handleTCode,maxlength:"6",placeholder:e.$t("终端代码")},null,8,["modelValue","onKeydown","placeholder"])]),a.env.tCode?((0,f.wg)(),(0,f.j4)(Ne,{key:0,placement:"bottom-end",width:e.$t("232"),trigger:"click"},{reference:(0,f.w5)((()=>[(0,f.Wm)(n,{style:{color:"#606266",cursor:"pointer"}},{default:(0,f.w5)((()=>[(0,f.Wm)(Ee)])),_:1})])),default:(0,f.w5)((()=>[a.env.tCode?((0,f.wg)(),(0,f.iD)("div",De,[(0,f._)("div",Se,(0,y.zw)(e.$t("什么是终端代码？")),1),(0,f._)("div",We,(0,y.zw)(e.$t("终端代码是用于访问和执行特定操作流程的快捷方式")),1),(0,f._)("div",ze,[(0,f._)("div",null,(0,y.zw)(e.$t("输入"))+" ",1),Ie,(0,f._)("div",null," "+(0,y.zw)(e.$t("并按下回车以查看更多信息")),1)]),(0,f._)("div",Te,[(0,f._)("div",null,(0,y.zw)(e.$t("输入"))+" ",1),Ve,(0,f._)("div",null," "+(0,y.zw)(e.$t("并按下回车以自定义工作流")),1)])])):(0,f.kq)("",!0)])),_:1},8,["width"])):(0,f.kq)("",!0)])):(0,f.kq)("",!0)],512),[[g.F8,"headless"!==a.urlParams.mode&&"pure"!==a.urlParams.mode]])])):(0,f.kq)("",!0),(0,f._)("div",{class:"kk-flex terminal-class",style:(0,y.j5)({backgroundColor:a.env.bg})},[Fe,(0,f._)("div",$e,null,512)],4)]),(0,f.Wm)(Oe,{ref:"connectSettingRef",env:a.env,sshOptions:a.options,onSaveOp:a.saveOp,onDeleteOp:a.deleteOp,onCallback:a.saveEnv},null,8,["env","sshOptions","onSaveOp","onDeleteOp","onCallback"]),(0,f.Wm)(Ke,{ref:"preferenceSettingRef",env:a.env,onCallback:a.saveEnv,os:t.osInfo.clientOS},null,8,["env","onCallback","os"]),(0,f.Wm)(Le,{ref:"fileBlockRef",sshKey:a.sshKey,os:t.osInfo.clientOS,onUpdateTransportLists:a.updateTransportLists,uploadingList:a.uploadingList},null,8,["sshKey","os","onUpdateTransportLists","uploadingList"]),(0,f.Wm)(Ae,{ref:"tCodeWorkflowRef",onImportTCodes:a.importTCodes,onExportTCodes:a.exportTCodes},null,8,["onImportTCodes","onExportTCodes"]),(0,f.Wm)(Me,{ref:"tCodeCenterRef",userTCodes:a.tcodes,onHandleSaveTCode:a.handleSaveTCode,onHandleDeleteTCode:a.handleDeleteTCode},null,8,["userTCodes","onHandleSaveTCode","onHandleDeleteTCode"]),(0,f.Wm)(Pe,{ref:"cooperateGenRef",sshKey:a.sshKey,advance:a.env.advance,onHandleCooperate:a.handleCooperate},null,8,["sshKey","advance","onHandleCooperate"]),(0,f.Wm)(je,{ref:"statusMonitorRef",sshKey:a.sshKey,advance:a.env.advance},null,8,["sshKey","advance"]),(0,f.Wm)(Be,{ref:"dockerBlockRef",sshKey:a.sshKey,advance:a.env.advance,onInstall:a.installDocker,onDeploy:a.runContainer},null,8,["sshKey","advance","onInstall","onDeploy"])],64)}t(7658),t(6229),t(7330),t(2062);var Re=t(7071),He=t(4870),Ee=t(4578),Ne=t(6537),Oe=t(7114);const Ke={server_ip:"",server_port:22,server_user:"root",server_password:"",server_key:null,authType:0,option:"",lang:"en",bg:"#0c0c0c",fg:"#cccccc",fontFamily:"Courier New",fontSize:16,cursorStyle:"block",cursorBlink:!0,tCode:!0,cloud:!0,advance:!0,transport:!0},Le=window.location.protocol;let Ae="ws://";"https:"===Le&&(Ae="wss://");const Me=Ae+window.location.host+"/socket/ssh/",Pe=Le+"//"+window.location.host+"/api",je=e=>{let l="";for(let t=0;t<e.length;t++)"/"!==e[t]?l+=e[t]:l+="@";return l},Be=e=>{let l="";for(let t=0;t<e.length;t++)"@"!==e[t]?l+=e[t]:l+="-";return l},qe=e=>e.replace(/\+/g,"-").replace(/=/g,"@"),Ge=e=>e.replace(/-/g,"+").replace(/@/g,"="),Ye=e=>{const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let a=0;a<e;a++){const e=Math.floor(Math.random()*l.length);t+=l[e]}return t},Ze=/[ !"#$&'()*,:;<=>?@[\\\]^`{}~]/g,Je=e=>e.replace(Ze,(function(e){return"\\"+e})),Xe=e=>Je(e),Qe=e=>{const l=e.sort(((e,l)=>{const t=e.name,a=l.name;return"."===t[0]&&"."!==a[0]?-1:"."!==t[0]&&"."===a[0]?1:t.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"})}));for(let t=0;t<l.length;t++)l[t].index=t;return l},el=e=>((0,f.dD)("data-v-429752da"),e=e(),(0,f.Cn)(),e),ll={class:"item-class",style:{"margin-bottom":"15px"}},tl={class:"no-select form-width nowrap"},al=el((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),ol={key:0},il={key:1},sl={class:"item-class",style:{"margin-bottom":"15px"}},nl={class:"no-select form-width"},rl={class:"item-class",style:{"margin-bottom":"15px"}},ul={class:"no-select form-width"},dl={class:"item-class",style:{"margin-bottom":"15px"}},cl={class:"no-select form-width"},pl={class:"item-class",style:{"margin-bottom":"5px"}},ml={key:0,class:"item-class"},vl={key:1},gl={class:"errInfo no-select"},fl=el((()=>(0,f._)("div",{style:{"margin-bottom":"5px"}},null,-1))),wl={style:{display:"flex","border-top":"1px solid #f1f2f4"}},yl=el((()=>(0,f._)("div",{style:{flex:"1"}},null,-1)));function hl(e,l,t,a,o,i){const s=(0,f.up)("ToolTip"),n=(0,f.up)("Switch"),r=(0,f.up)("el-icon"),u=(0,f.up)("el-button"),d=(0,f.up)("Finished"),c=(0,f.up)("Edit"),p=(0,f.up)("HomeFilled"),m=(0,f.up)("el-input"),v=(0,f.up)("DocumentCopy"),g=(0,f.up)("Paperclip"),w=(0,f.up)("User"),h=(0,f.up)("arrow-down"),k=(0,f.up)("el-dropdown-item"),_=(0,f.up)("el-dropdown-menu"),b=(0,f.up)("el-dropdown"),x=(0,f.up)("Lock"),C=(0,f.up)("View"),D=(0,f.up)("Hide"),S=(0,f.up)("Key"),W=(0,f.up)("el-checkbox"),z=(0,f.up)("el-dialog"),I=(0,f.up)("OptionBlock"),T=(0,f.up)("PrivateKey");return(0,f.wg)(),(0,f.iD)(f.HY,null,[(0,f.Wm)(z,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>a.DialogVisible=e),"destory-on-close":!0,"before-close":a.closeDialog,width:360,title:e.$t("连接设置"),modal:!1,"close-on-click-modal":!1,"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-6","align-center":"",draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",null,[(0,f._)("div",ll,[(0,f._)("div",tl,(0,y.zw)(e.$t("配   置"))+"：",1),(0,f.Wm)(s,{content:a.setInfo.option&&a.setInfo.option.length>0?a.setInfo.option:e.$t("新建配置")},{content:(0,f.w5)((()=>[(0,f._)("div",{class:(0,y.C_)(["ellipsis",a.setInfo.option&&a.setInfo.option.length>0?"old-option":"new-option"]),style:{"user-select":"none"}},(0,y.zw)(a.setInfo.option&&a.setInfo.option.length>0?a.setInfo.option:e.$t("新建配置")),3)])),_:1},8,["content"]),al,(0,f._)("div",null,[(0,f.Wm)(u,{size:"small",type:"primary",onClick:l[0]||(l[0]=e=>a.showOption(0)),style:{"margin-left":"10px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1}),(0,f.Uk)((0,y.zw)(e.$t("切换")),1)])),_:1})]),a.isForbidInput?((0,f.wg)(),(0,f.iD)("div",il,[(0,f.Wm)(u,{size:"small",type:"primary",onClick:a.newOp,style:{"margin-left":"10px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(c)])),_:1}),(0,f.Uk)((0,y.zw)(e.$t("新建")),1)])),_:1},8,["onClick"])])):((0,f.wg)(),(0,f.iD)("div",ol,[(0,f.Wm)(u,{size:"small",type:"primary",onClick:l[1]||(l[1]=e=>a.showOption(1)),style:{"margin-left":"10px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1}),(0,f.Uk)((0,y.zw)(e.$t("保存")),1)])),_:1})]))]),(0,f._)("div",sl,[(0,f._)("div",nl,(0,y.zw)(e.$t("主机IP"))+"：",1),(0,f._)("div",null,[(0,f.Wm)(m,{disabled:a.isForbidInput,modelValue:a.setInfo.server_ip,"onUpdate:modelValue":l[2]||(l[2]=e=>a.setInfo.server_ip=e),class:"w-50 m-2",placeholder:e.$t("输入主机IP")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1})])),_:1},8,["disabled","modelValue","placeholder"])]),(0,f._)("div",{style:{cursor:"pointer","margin-left":"10px"},onClick:l[3]||(l[3]=e=>a.doCopy(a.setInfo.server_ip))},[(0,f.Wm)(r,{size:"15"},{default:(0,f.w5)((()=>[(0,f.Wm)(v)])),_:1})])]),(0,f._)("div",rl,[(0,f._)("div",ul,(0,y.zw)(e.$t("端口号"))+"：",1),(0,f._)("div",null,[(0,f.Wm)(m,{disabled:a.isForbidInput,modelValue:a.setInfo.server_port,"onUpdate:modelValue":l[4]||(l[4]=e=>a.setInfo.server_port=e),class:"w-50 m-2",placeholder:e.$t("输入端口号")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(g)])),_:1})])),_:1},8,["disabled","modelValue","placeholder"])]),(0,f._)("div",{style:{cursor:"pointer","margin-left":"10px"},onClick:l[5]||(l[5]=e=>a.doCopy(a.setInfo.server_port))},[(0,f.Wm)(r,{size:"15"},{default:(0,f.w5)((()=>[(0,f.Wm)(v)])),_:1})])]),(0,f._)("div",dl,[(0,f._)("div",cl,(0,y.zw)(e.$t("用户名"))+"：",1),(0,f._)("div",null,[(0,f.Wm)(m,{disabled:a.isForbidInput,modelValue:a.setInfo.server_user,"onUpdate:modelValue":l[6]||(l[6]=e=>a.setInfo.server_user=e),class:"w-50 m-2",placeholder:e.$t("输入用户名")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(r,{class:"el-input__icon"},{default:(0,f.w5)((()=>[(0,f.Wm)(w)])),_:1})])),_:1},8,["disabled","modelValue","placeholder"])]),(0,f._)("div",{style:{cursor:"pointer","margin-left":"10px"},onClick:l[7]||(l[7]=e=>a.doCopy(a.setInfo.server_user))},[(0,f.Wm)(r,{size:"15"},{default:(0,f.w5)((()=>[(0,f.Wm)(v)])),_:1})])]),(0,f._)("div",pl,[(0,f.Wm)(b,{disabled:a.isForbidInput,class:"no-select form-width","hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(_,null,{default:(0,f.w5)((()=>[(0,f.Wm)(k,{class:"no-select",onClick:l[8]||(l[8]=e=>a.switchAuthType(0))},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("密码")),1)])),_:1}),(0,f.Wm)(k,{class:"no-select",onClick:l[9]||(l[9]=e=>a.switchAuthType(1))},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("私钥")),1)])),_:1})])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",null,[(0,f.Uk)((0,y.zw)(0==a.setInfo.authType?e.$t("密码"):e.$t("私钥")),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(h,{style:{cursor:"pointer"}})])),_:1})])])),_:1},8,["disabled"]),0==a.setInfo.authType?((0,f.wg)(),(0,f.iD)("div",ml,[(0,f._)("div",null,[(0,f.Wm)(m,{disabled:a.isForbidInput,modelValue:a.setInfo.server_password,"onUpdate:modelValue":l[10]||(l[10]=e=>a.setInfo.server_password=e),type:a.isShowPassword?"text":"password",class:"w-50 m-2",placeholder:e.$t("输入密码")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(r,{class:"el-input__icon"},{default:(0,f.w5)((()=>[(0,f.Wm)(x)])),_:1})])),_:1},8,["disabled","modelValue","type","placeholder"])]),a.isShowPassword?((0,f.wg)(),(0,f.iD)("div",{key:0,style:{cursor:"pointer","margin-left":"10px"},onClick:l[11]||(l[11]=e=>a.isShowPassword=!1)},[(0,f.Wm)(r,{size:"15"},{default:(0,f.w5)((()=>[(0,f.Wm)(C)])),_:1})])):((0,f.wg)(),(0,f.iD)("div",{key:1,style:{cursor:"pointer","margin-left":"10px"},onClick:l[12]||(l[12]=e=>a.isShowPassword=!0)},[(0,f.Wm)(r,{size:"15"},{default:(0,f.w5)((()=>[(0,f.Wm)(D)])),_:1})]))])):((0,f.wg)(),(0,f.iD)("div",vl,[(0,f.Wm)(u,{disabled:a.isForbidInput,type:"primary",onClick:a.openPrivateKeyBlock},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(S)])),_:1}),(0,f.Uk)((0,y.zw)(e.$t("导入")),1)])),_:1},8,["disabled","onClick"])]))])]),(0,f._)("div",gl,(0,y.zw)(e.$t(a.err_msg)),1),fl,(0,f._)("div",wl,[a.setInfo.option&&a.setInfo.option.length>0?((0,f.wg)(),(0,f.j4)(W,{key:0,modelValue:a.isNewWindow,"onUpdate:modelValue":l[13]||(l[13]=e=>a.isNewWindow=e),label:e.$t("新窗口打开"),size:"small",style:{"margin-top":"10px"}},null,8,["modelValue","label"])):(0,f.kq)("",!0),yl,(0,f.Wm)(u,{size:"small",type:"primary",onClick:a.confirm,style:{"margin-top":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close","title"]),(0,f.Wm)(I,{ref:"optionBlockRef",onCallback:a.doOption,opType:a.optionBlockType,sshOptions:t.sshOptions,onHandleDeleteOption:a.handleDeleteOption},null,8,["onCallback","opType","sshOptions","onHandleDeleteOption"]),(0,f.Wm)(T,{ref:"privateKeyRef",onCallback:a.savePrivateKey},null,8,["onCallback"])],64)}const kl=e=>((0,f.dD)("data-v-41b2614c"),e=e(),(0,f.Cn)(),e),_l={class:"no-select"},bl={key:0,class:"kk-border"},xl=["onClick"],Cl={class:"ellipsis",style:{margin:"0 10px"}},Dl=kl((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Sl=["onClick"],Wl={key:1,class:"kk-border"},zl={class:"kk-flex"},Il={style:{flex:"1"}},Tl={style:{"margin-left":"10px"}};function Vl(e,l,t,a,o,i){const s=(0,f.up)("FileIcons"),n=(0,f.up)("CircleClose"),r=(0,f.up)("el-icon"),u=(0,f.up)("NoData"),d=(0,f.up)("el-input"),c=(0,f.up)("el-button"),p=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(p,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>a.DialogVisible=e),"before-close":a.closeDialog,"destroy-on-close":"",width:420,modal:!1,title:e.$t("全部配置"),"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-6",draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",_l,[Object.keys(t.sshOptions).length>0?((0,f.wg)(),(0,f.iD)("div",bl,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(t.sshOptions,((e,l)=>((0,f.wg)(),(0,f.iD)("div",{key:l},[(0,f._)("div",{class:(0,y.C_)(["item-class",a.aimOption==l?"item-selected":""]),onClick:e=>a.aimOption=l},[(0,f.Wm)(s,{style:{display:"flex",alignItems:"center"},name:"kk.ini",width:20,height:20,isFolder:!1}),(0,f._)("div",Cl,(0,y.zw)(l),1),Dl,(0,f._)("div",{onClick:e=>a.confirmDeleteOption(l)},[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1})],8,Sl)],10,xl)])))),128))])):((0,f.wg)(),(0,f.iD)("div",Wl,[(0,f.Wm)(u,{msg:a.i18n.global.k("暂无配置")},null,8,["msg"])])),(0,f._)("div",zl,[(0,f._)("div",null,(0,y.zw)(e.$t("配置名"))+"：",1),(0,f._)("div",Il,[(0,f.Wm)(d,{size:"small",modelValue:a.aimOption,"onUpdate:modelValue":l[0]||(l[0]=e=>a.aimOption=e),disabled:0==t.opType,onKeydown:(0,g.D2)(a.confirm,["enter"]),class:"w-50 m-2",placeholder:""},null,8,["modelValue","disabled","onKeydown"])]),(0,f._)("div",Tl,[(0,f.Wm)(c,{size:"small",type:"primary",onClick:a.confirm},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(t.opType?e.$t("保存"):e.$t("选择")),1)])),_:1},8,["onClick"])])])])])),_:1},8,["modelValue","before-close","title"])}var Fl=t(2748),$l=t(6e3),Ul=t(152),Rl=JSON.parse('{"232":"272","240":"300","360":"380","400":"420","配   置":"Option","描述":"Desc","简体中文":"Chinese","密码":"Pwd","私钥":"Key","导入私钥":"Import Key","请输入私钥密码":"Input Key Passphrase","内容过长":"Content too long","读取成功":"Read Success","读取失败":"Read Failed","文件加载失败":"File loading failed","终端代码中心":"Terminal Code Center","功能":"Function","以":"Start with","开头，用于执行通用功能":", used to execute common functions","系统":"System","开头，用于访问系统模块":", used to access system modules","用户":"User","开头，用于自定义工作流":", used to customize workflows","不存在":" does not exist","其它终端代码正在执行":"Another Terminal Code is executing","执行中断：":"Execute Interrupted: ","工作流结束":"Workflow Over","编译错误：":"Compile Error: ","无法打开文件：":"Cannot open file: ","无法下载文件：":"Cannot download file: ","编辑":"Edit","删除":"Delete","只读":"Read Only","保存修改":"Save Changes","修改成功":"Modified","删除成功":"Deleted","提示":"Tips","确定删除此终端代码吗?":"Sure to delete this Terminal Code?","终端代码工作流":"Terminal Code Workflow","新建终端窗口":"New Terminal Window","关闭终端窗口":"Close Terminal Window","用户退出登录":"User Logout","刷新页面":"Refresh Webpage","连接设置":"Connect","偏好设置":"Preference","高级":"Advance","高级功能":"Advance Func","传输列表":"Transport List","等待中":"Waiting","正在上传":"Uploading","正在下载":"Downloading","已完成":"Finished","文件管理":"File","重启":"Restart","重启终端":"Restart Terminal","协作":"Cooperate","监控":"Monitor","输入终端代码名称":"Input Terminal Code Name","输入终端代码描述":"Input Terminal Code Description","导入":"Import","导出":"Export","默认模板":"Default Template","清空":"Clear","保存":"Save","取消":"cancel","确定":"confirm","保存成功":"Saved","名称非法":"illegal name","导入成功":"Imported","导入失败：无合法终端代码":"Failed: no legal Terminal Code","导入成功：":"Imported: ","个":"","，导入失败：":", Failed: ","导入失败：json格式错误":"Failed: json format error","导入失败：文件读取失败":"Failed: file read failed","导出成功":"Exported","终端代码名称不能为空":"Terminal Code Name cannot be empty","终端代码只能由字母和数字组成":"Terminal Code can only consist of letters and numbers","添加成功":"Added","新建配置":"New Option","切换":"Switch","新建":"New","主机IP":"Host","输入主机IP":"Input Host IP","端口号":"Port","输入端口号":"Input SSH Port","用户名":"User","输入用户名":"Input User Name","输入密码":"Input Password","主机IP地址无效":"IP address is invalid","端口号无效":"Port number is invalid","用户名不能为空":"User name cannot be empty","密码不能为空":"Password cannot be empty","私钥不能为空":"PrivateKey cannot be empty","内容为空":"Empty","复制成功":"Copied","属性":"Attribute","位置":"Path","包含":"Contain","未确认":"Unsure","大小":"Size","字节":"Bytes","修改时间":"MTime","访问时间":"ATime","权限":"Permissions","权限修改":"Permissions Edit","0 个文件，0 个文件夹":"0 files, 0 folders"," 个文件，":" files, "," 个文件夹":" folders","文件名不能为空":"File name cannot be empty","文件名不能含有":"File name cannot contain","URL上传":"URL Upload","请输入文件URL":"Input File URL","文件名":"Name","请输入文件名":"Input File Name","URL不能为空":"URL cannot be empty","文件":"File","文件夹":"Folder","暂无数据":"No Data","全部配置":"All Options","配置名":"Name","选择":"Select","暂无配置":"No Option","确定删除此配置吗?":"Sure to delete this Option?","其它":"Other","语言":"Language","颜色":"Color","背景色":"Background","前景色":"Foreground","文本":"Text","字体":"Font","字号":"Size","光标":"Cursor","样式":"Style","闪烁":"Blink","标签":"Tab","确定删除吗?":"Sure to delete?","年":"/","月":"/","日，":" ","终端代码":"Terminal Code","什么是终端代码？":"What\'s Terminal Code?","终端代码是用于访问和执行特定操作流程的快捷方式":"Terminal Code is the shortcut to access and execute specific action process","输入":"Input","并按下回车以查看更多信息":"and Enter to show more details","并按下回车以自定义工作流":"and Enter to customize workflow","输入目录路径":"Input dir path","刷新":"Refresh","打开":"Open","复制路径":"Copy Path","解压":"Decompress","下载":"Download","重命名":"Rename","确定删除此文件吗?":"Sure to delete this File?","开始上传":"Start uploading","文件上传失败":"File upload failed","文件夹上传失败":"Folder upload failed","暂无文件":"No File","修改保存中":"Saving modification","文件后台保存中":"Saving file in the backend","读取":"Read","写入":"Write","执行":"Execute","所有者":"Owner","所属组":"Group","其他用户":"Others","应用到子目录和文件":"Apply to sub directories and files","终端代码必须以 F,S,U 开头":"Terminal Code must start with F,S,U","编码":"Encode","模式":"Mode","缩进":"Indent","复制":"Copy","新窗口打开":"Open in new window","开始录制":"Start Record","录制中":"Recording","录像链接已复制":"Record Link Copied","协作链接已复制":"Cooperate Link Copied","多端同步链接已复制":"Devices Sync Link Copied","多端同步":"Devices Sync","云端文件过多":"Too many Cloud Files","云端同步失败":"Cloud Sync Failed","确定从云端覆盖本地数据吗?":"Sure to overwrite local data from Cloud?","编辑权限":"Edit Permissions","人数上限":"Max Head Count","是":"Yes","否":"No","协作Key生成失败":"Cooperate Key Generate Failed","确定结束此次协作吗?":"Sure to end this Cooperation?","概览":"Overview","核心":"Core","负载":"Load","CPU使用率":"CPU Usage","内存使用率":"Memory Usage","运行流畅":"Run Fluently","运行缓慢":"Run Slowly","运行堵塞":"Run Blocked","Top进程":"Top Process","网络":"NetWork","磁盘":"Disk","上行":"Up","下行":"Down","读":"Read","写":"Write","部署":"Deploy","容器":"Container","镜像":"Image","数据卷":"Volume","名称":"Name","状态":"Status","端口":"Port","仓库":"Repository","创建时间":"Create Time","网关":"Gateway","挂载点":"Mount Point","安装":"Install","选择批量操作":"Select Batch Operation","启动容器":"Start Container","停止容器":"Pause Container","重启容器":"Restart Container","删除容器":"Delete Container","删除镜像":"Delete Image","删除网络":"Delete NetWork","删除数据卷":"Delete Volume","Docker未安装?":"Docker is not installed?","确定进行此操作吗?":"Sure to do this operation?","高级-协作":"Advance-Cooperate","高级-监控":"Advance-Monitor","高级-Docker":"Advance-Docker","Docker应用商店":"Docker AppStore","获取":"Get","返回":"Return","容器名称":"Container Name","端口映射":"Port Mapping","环境变量":"Environment Var","数据卷挂载":"Volume Mounting","其它命令选项":"Other Cmd Options","镜像名称":"Image Name","版本号":"Version","每行一个，主机端口:容器端口":"One per line, host-port:container-port","每行一个，环境变量名=值":"One per line, env-variable-name=value","每行一个，主机路径:容器路径":"One per line, host-path:container-path","每行一个，-命令选项 值":"One per line, -command-option value","开始安装":"Start Install","开始部署":"Start Deploy","搜索应用":"Search Apps","暂无应用":"No App","全部":"All","实用工具":"Tool","开发&运维":"DevOps","个人建站":"Website","数据库":"Database","网盘存储":"Storage","指定任意镜像进行应用部署":"Specify any image for application deployment","kkTerminal是一个强大的Web SSH连接终端":"kkTerminal is a powerful terminal for Web SSH connection"}');const Hl=(0,Ul.o)({locale:"en",fallbackLocale:"zh",messages:{en:Rl},missing:(e,l)=>l});Hl.global.k=e=>e;var El=Hl;const Nl=(e,l,t)=>$l.T.alert(l||El.global.t("确定删除吗?"),e||El.global.t("提示"),{autofocus:!1,customStyle:"font-size: 13px; color: black; width: 265px; user-select: none;",cancelButtonText:El.global.t("取消"),confirmButtonText:El.global.t("确定"),showCancelButton:!0,showConfirmButton:!0,cancelButtonClass:"el-button is-text",confirmButtonClass:"el-button--danger",buttonSize:"small",icon:Fl.Ruj,type:"warning",callback:e=>{"confirm"===e&&t()}});var Ol=t.p+"img/no_data.ec5c928e.png";const Kl=e=>((0,f.dD)("data-v-476ef118"),e=e(),(0,f.Cn)(),e),Ll=Kl((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Al={style:{display:"flex","align-items":"center"}},Ml=["alt"],Pl={class:"msg"},jl=Kl((()=>(0,f._)("div",{style:{flex:"1"}},null,-1)));function Bl(e,l,t,a,o,i){return(0,f.wg)(),(0,f.iD)("div",{class:"no-data",style:(0,y.j5)(a.viewStyle)},[Ll,(0,f.WI)(e.$slots,"mySlot",{},void 0,!0),(0,f._)("div",Al,[(0,f._)("div",null,[(0,f._)("img",{src:Ol,alt:e.$t("暂无数据"),style:{width:"120px"}},null,8,Ml)])]),(0,f._)("div",Pl,(0,y.zw)(e.$t(t.msg)),1),jl],4)}var ql={name:"NoData",components:{},props:{msg:{type:String,required:!1,default:El.global.k("暂无数据")},width:{type:String,required:!1},height:{type:String,required:!1},minHeight:{type:String,required:!1}},setup(e){const l=(0,f.Fl)((()=>({width:e.width?e.width:"100%",height:e.height?e.height:"100%",minHeight:e.minHeight?e.minHeight:""})));return{viewStyle:l}}},Gl=t(89);const Yl=(0,Gl.Z)(ql,[["render",Bl],["__scopeId","data-v-476ef118"]]);var Zl=Yl,Jl=t(3223),Xl=t.n(Jl),Ql={name:"OptionBlock",components:{FileIcons:Xl(),NoData:Zl,CircleClose:Fl.K41},props:["opType","sshOptions"],setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(""),o=()=>{""!=a.value&&""!=a.value.trim()&&(l.emit("callback",a.value.trim()),u())},i=(0,He.iH)(""),s=e=>{i.value=e,Nl(El.global.t("提示"),El.global.t("确定删除此配置吗?"),n)},n=()=>{l.emit("handleDeleteOption",i.value),(0,Ee.z8)({message:El.global.t("删除成功"),type:"success",grouping:!0}),a.value==i.value&&(a.value="")},r=()=>{a.value="",i.value="",t.value=!1},u=e=>{setTimeout((()=>{r()}),400),t.value=!1,e&&e()};return{i18n:El,DialogVisible:t,aimOption:a,confirm:o,confirmDeleteOption:s,doDeleteOption:n,reset:r,closeDialog:u}}};const et=(0,Gl.Z)(Ql,[["render",Vl],["__scopeId","data-v-41b2614c"]]);var lt=et;const tt={class:"no-select"},at={class:"kk-flex"},ot={class:"form-width"},it={key:0,class:"errInfo no-select"},st={key:1,style:{height:"7px"}},nt={class:"kk-flex"},rt={class:"form-width"},ut={style:{flex:"1"}},dt={style:{"margin-left":"10px"}};function ct(e,l,t,a,o,i){const s=(0,f.up)("Lock"),n=(0,f.up)("el-icon"),r=(0,f.up)("el-button"),u=(0,f.up)("el-upload"),d=(0,f.up)("Key"),c=(0,f.up)("el-input"),p=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(p,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>a.DialogVisible=e),"before-close":a.closeDialog,width:320,modal:!1,title:e.$t("导入私钥"),"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-0",draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",tt,[(0,f._)("div",at,[(0,f._)("div",ot,(0,y.zw)(e.$t("私钥"))+"：",1),(0,f.Wm)(u,{"show-file-list":!1,"with-credentials":!0,"http-request":a.readPrivateKeyContent,multiple:!1},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{size:"small",type:"primary"},{default:(0,f.w5)((()=>[(0,f.Wm)(n,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(s)])),_:1}),(0,f.Uk)((0,y.zw)(e.$t("选择")),1)])),_:1})])),_:1},8,["http-request"])]),a.err_msg&&a.err_msg.length>0?((0,f.wg)(),(0,f.iD)("div",it,(0,y.zw)(a.err_msg),1)):((0,f.wg)(),(0,f.iD)("div",st)),(0,f._)("div",nt,[(0,f._)("div",rt,(0,y.zw)(e.$t("密码"))+"：",1),(0,f._)("div",ut,[(0,f.Wm)(c,{size:"small",modelValue:a.passphrase,"onUpdate:modelValue":l[0]||(l[0]=e=>a.passphrase=e),onKeydown:(0,g.D2)(a.confirm,["enter"]),class:"w-50 m-2",placeholder:e.$t("请输入私钥密码")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])),_:1},8,["modelValue","onKeydown","placeholder"])]),(0,f._)("div",dt,[(0,f.Wm)(r,{size:"small",type:"primary",onClick:a.confirm},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])])])),_:1},8,["modelValue","before-close","title"])}var pt={name:"PrivateKey",components:{Lock:Fl.HEZ,Key:Fl.srI},setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(""),o=(0,He.iH)(""),i=(0,He.iH)(""),s=()=>{l.emit("callback",o.value,i.value),u()},n=e=>{const l=new FileReader;l.onload=()=>{l.result.length>1048576?(0,Ee.z8)({message:El.global.t("内容过长"),type:"warning",grouping:!0}):(o.value=l.result,(0,Ee.z8)({message:El.global.t("读取成功"),type:"success",grouping:!0}))},l.onerror=()=>{(0,Ee.z8)({message:El.global.t("读取失败"),type:"error",grouping:!0})},l.readAsText(e.file)},r=()=>{a.value="",o.value="",i.value="",t.value=!1},u=e=>{setTimeout((()=>{r()}),400),t.value=!1,e&&e()};return{DialogVisible:t,err_msg:a,content:o,passphrase:i,readPrivateKeyContent:n,confirm:s,closeDialog:u,reset:r}}};const mt=(0,Gl.Z)(pt,[["render",ct],["__scopeId","data-v-25c546a0"]]);var vt=mt;const gt={ref:"toolTipContentRef",class:"tooltip-content"};function ft(e,l,t,a,o,i){const s=(0,f.up)("el-tooltip");return(0,f.wg)(),(0,f.j4)(s,{"popper-class":"no-select",content:t.content,disabled:!(t.isShow&&a.isShowTooltip),"show-after":t.delay,placement:"top"},{default:(0,f.w5)((()=>[(0,f._)("div",gt,[(0,f.WI)(e.$slots,"content",{},void 0,!0)],512)])),_:3},8,["content","disabled","show-after"])}var wt={name:"ToolTip",props:{content:{type:String,required:!0,default:""},delay:{type:Number,required:!1,default:200},isShow:{type:Boolean,required:!1,default:!0}},setup(){const e=(0,He.iH)(null),l=(0,He.iH)(!1),t=()=>{setTimeout((()=>{e.value&&e.value.firstElementChild?l.value=e.value.firstElementChild.scrollWidth>e.value.firstElementChild.offsetWidth:l.value=!1}),1)};let a=null;const o=()=>{e.value&&(a=new ResizeObserver((()=>{t()})),a.observe(e.value))};return(0,f.bv)((()=>{t(),o()})),(0,f.Jd)((()=>{a&&e.value&&(a.unobserve(e.value),a.disconnect())})),{toolTipContentRef:e,isShowTooltip:l,checkOverflow:t}}};const yt=(0,Gl.Z)(wt,[["render",ft],["__scopeId","data-v-695dda16"]]);var ht=yt;const kt=e=>{const l={},t=new URLSearchParams(new URL(e||window.location.href).search).entries();for(const[a,o]of t)l[a]=o;return l},_t=e=>{let l=e||window.location.href;const t=l.indexOf("?");return-1!==t&&(l=l.substring(0,t)),l},bt="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",xt=`(${bt}[.]){3}${bt}`,Ct=new RegExp(`^${xt}$`),Dt="(?:[0-9a-fA-F]{1,4})",St=new RegExp(`^((?:${Dt}:){7}(?:${Dt}|:)|(?:${Dt}:){6}(?:${xt}|:${Dt}|:)|(?:${Dt}:){5}(?::${xt}|(:${Dt}){1,2}|:)|(?:${Dt}:){4}(?:(:${Dt}){0,1}:${xt}|(:${Dt}){1,3}|:)|(?:${Dt}:){3}(?:(:${Dt}){0,2}:${xt}|(:${Dt}){1,4}|:)|(?:${Dt}:){2}(?:(:${Dt}){0,3}:${xt}|(:${Dt}){1,5}|:)|(?:${Dt}:){1}(?:(:${Dt}){0,4}:${xt}|(:${Dt}){1,6}|:)|(?::((?::${Dt}){0,5}:${xt}|(?::${Dt}){1,7}|:)))(%[0-9a-zA-Z-.:]{1,})?$`);function Wt(e,l="4"){return l=String(l),l?"4"===l?Ct.test(e):"6"===l&&St.test(e):Wt(e,4)||Wt(e,6)}const zt={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function It(e){zt.allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),!0===zt.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));const l=e.split("."),t=l[l.length-1];if(zt.require_tld){if(l.length<2)return!1;if(!zt.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(t))return!1;if(/\s/.test(t))return!1}return!(!zt.allow_numeric_tld&&/^\d+$/.test(t))&&l.every((e=>!(e.length>63&&!zt.ignore_max_length)&&(!!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)&&(!/[\uff01-\uff5e]/.test(e)&&(!/^-|-$/.test(e)&&!(!zt.allow_underscores&&/_/.test(e)))))))}var Tt={name:"ConnectSetting",components:{ToolTip:ht,OptionBlock:lt,PrivateKey:vt,HomeFilled:Fl.Ozs,Paperclip:Fl.pkz,User:Fl.n5m,Lock:Fl.HEZ,DocumentCopy:Fl.IBc,View:Fl.G7x,Hide:Fl.caK,Edit:Fl.I8b,Finished:Fl.qWi,Switch:Fl.rsf,ArrowDown:Fl.K5e,Key:Fl.srI},props:["env","sshOptions"],setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(""),o=(0,He.iH)(!1),i=(0,He.iH)({server_ip:e.env.server_ip,server_port:e.env.server_port,server_user:e.env.server_user,server_password:e.env.server_password,server_key:e.env.server_key||null,authType:e.env.authType||0,option:e.env.option}),s=()=>(a.value="",Wt(i.value.server_ip)||It(i.value.server_ip)?isNaN(i.value.server_port)||i.value.server_port<0||i.value.server_port>65535?(a.value=El.global.k("端口号无效"),!1):i.value.server_user?0!=i.value.authType||i.value.server_password?!!(1!=i.value.authType||i.value.server_key&&i.value.server_key.content)||(a.value=El.global.k("私钥不能为空"),!1):(a.value=El.global.k("密码不能为空"),!1):(a.value=El.global.k("用户名不能为空"),!1):(a.value=El.global.k("主机IP地址无效"),!1)),n=(0,He.iH)(),r=(0,He.iH)(0),u=e=>{(1!=e||s())&&(r.value=e,n.value.aimOption="",n.value.DialogVisible=!0)},d=(0,He.iH)(!1);i.value.option&&(d.value=!0);const c=t=>{0==r.value?(e.sshOptions[t].authType||(i.value.authType=0),i.value={...i.value,...e.sshOptions[t]},d.value=!0,a.value=""):1==r.value&&(i.value.option=t,l.emit("saveOp",t,i.value),d.value=!0)},p=()=>{d.value=!1,i.value.option=""},m=e=>{l.emit("deleteOp",e),i.value.option&&i.value.option==e&&(i.value.option="",d.value=!1)},v=(0,He.iH)(),g=()=>{v.value.content=i.value.server_key?i.value.server_key.content:"",v.value.passphrase=i.value.server_key?i.value.server_key.passphrase:"",v.value.DialogVisible=!0},f=(e,l)=>{i.value.server_key={content:e,passphrase:l}},w=e=>{i.value.authType=e,0==e&&v.value.closeDialog()},y=()=>{s()&&(o.value&&i.value.option&&i.value.option.length>0?window.open(_t()+"?option="+i.value.option,"_blank"):(l.emit("callback",i.value),x()))},{toClipboard:h}=(0,Re.Z)(),k=async e=>{e+="",e&&e.length>0?(await h(e),(0,Ee.z8)({message:El.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})):(0,Ee.z8)({message:El.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},_=(0,He.iH)(!1),b=()=>{a.value="",o.value=!1,_.value=!1,i.value={server_ip:e.env.server_ip,server_port:e.env.server_port,server_user:e.env.server_user,server_password:e.env.server_password,server_key:e.env.server_key||null,authType:e.env.authType||0,option:e.env.option},i.value.option?d.value=!0:d.value=!1,t.value=!1},x=e=>{n.value&&n.value.DialogVisible&&n.value.closeDialog(),v.value&&v.value.DialogVisible&&v.value.closeDialog(),setTimeout((()=>{b()}),400),t.value=!1,e&&e()};return{setInfo:i,DialogVisible:t,err_msg:a,isNewWindow:o,confirm:y,optionBlockRef:n,showOption:u,optionBlockType:r,doOption:c,isForbidInput:d,newOp:p,handleDeleteOption:m,reset:b,closeDialog:x,doCopy:k,isShowPassword:_,privateKeyRef:v,openPrivateKeyBlock:g,savePrivateKey:f,switchAuthType:w}}};const Vt=(0,Gl.Z)(Tt,[["render",hl],["__scopeId","data-v-429752da"]]);var Ft=Vt;const $t=e=>((0,f.dD)("data-v-833b2016"),e=e(),(0,f.Cn)(),e),Ut={class:"no-select"},Rt={class:"kk-flex item-class"},Ht={class:"form-width"},Et={class:"kk-flex"},Nt={style:{margin:"0 20px"}},Ot=$t((()=>(0,f._)("div",{style:{width:"20px"}},null,-1))),Kt={class:"kk-flex"},Lt={style:{margin:"0 20px"}},At={class:"kk-flex item-class"},Mt={class:"form-width"},Pt={class:"kk-flex"},jt={class:"a-link no-select"},Bt={class:"kk-flex"},qt={class:"a-link no-select"},Gt={class:"kk-flex item-class"},Yt={class:"form-width"},Zt={class:"kk-flex"},Jt={class:"a-link no-select"},Xt=$t((()=>(0,f._)("div",{style:{width:"15px"}},null,-1))),Qt={class:"kk-flex"},ea={style:{margin:"0 20px"}},la={class:"kk-flex item-class"},ta={class:"form-width"},aa={class:"kk-flex"},oa={class:"form-width-item1"},ia={class:"func-switch"},sa={class:"kk-flex"},na={class:"form-width-item2"},ra={class:"func-switch"},ua={class:"kk-flex item-class"},da=$t((()=>(0,f._)("div",{class:"form-width"},null,-1))),ca={class:"kk-flex"},pa={class:"form-width-item1"},ma={class:"func-switch"},va={class:"kk-flex"},ga={class:"form-width-item2"},fa={class:"func-switch"},wa={class:"kk-flex item-class"},ya={class:"form-width"},ha={class:"kk-flex"},ka={class:"a-link no-select"},_a=$t((()=>(0,f._)("div",{style:{"margin-bottom":"5px"}},null,-1))),ba={style:{display:"flex","border-top":"1px solid #f1f2f4"}},xa=$t((()=>(0,f._)("div",{style:{flex:"1"}},null,-1)));function Ca(e,l,t,a,o,i){const s=(0,f.up)("el-color-picker"),n=(0,f.up)("arrow-down"),r=(0,f.up)("el-icon"),u=(0,f.up)("el-dropdown-item"),d=(0,f.up)("el-dropdown-menu"),c=(0,f.up)("el-dropdown"),p=(0,f.up)("el-switch"),m=(0,f.up)("el-button"),v=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(v,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[7]||(l[7]=e=>a.DialogVisible=e),"destroy-on-close":"",width:e.$t("400"),title:e.$t("偏好设置"),modal:!1,"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-6","before-close":a.closeDialog,draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",Ut,[(0,f._)("div",Rt,[(0,f._)("div",Ht,(0,y.zw)(e.$t("颜色"))+"：",1),(0,f._)("div",Et,[(0,f._)("div",null,(0,y.zw)(e.$t("背景色")),1),(0,f._)("div",Nt,[(0,f.Wm)(s,{modelValue:a.setInfo.bg,"onUpdate:modelValue":l[0]||(l[0]=e=>a.setInfo.bg=e)},null,8,["modelValue"])])]),Ot,(0,f._)("div",Kt,[(0,f._)("div",null,(0,y.zw)(e.$t("前景色")),1),(0,f._)("div",Lt,[(0,f.Wm)(s,{modelValue:a.setInfo.fg,"onUpdate:modelValue":l[1]||(l[1]=e=>a.setInfo.fg=e)},null,8,["modelValue"])])])]),(0,f._)("div",At,[(0,f._)("div",Mt,(0,y.zw)(e.$t("文本"))+"：",1),(0,f._)("div",Pt,[(0,f._)("div",null,(0,y.zw)(e.$t("字体")),1),(0,f.Wm)(c,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(d,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.fontFamilyList,((e,l)=>((0,f.wg)(),(0,f.j4)(u,{key:l,class:"no-select",onClick:l=>a.setInfo.fontFamily=e},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",jt,[(0,f.Uk)((0,y.zw)(a.setInfo.fontFamily),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1})])])),_:1})]),(0,f._)("div",Bt,[(0,f._)("div",null,(0,y.zw)(e.$t("字号")),1),(0,f.Wm)(c,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(d,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.fontSizeList,((e,l)=>((0,f.wg)(),(0,f.j4)(u,{key:l,class:"no-select",onClick:l=>a.setInfo.fontSize=e},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",qt,[(0,f.Uk)((0,y.zw)(a.setInfo.fontSize),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1})])])),_:1})])]),(0,f._)("div",Gt,[(0,f._)("div",Yt,(0,y.zw)(e.$t("光标"))+"：",1),(0,f._)("div",Zt,[(0,f._)("div",null,(0,y.zw)(e.$t("样式")),1),(0,f.Wm)(c,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(d,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.cursorStyleList,((e,l)=>((0,f.wg)(),(0,f.j4)(u,{key:l,class:"no-select",onClick:l=>a.setInfo.cursorStyle=e},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",Jt,[(0,f.Uk)((0,y.zw)(a.setInfo.cursorStyle),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1})])])),_:1})]),Xt,(0,f._)("div",Qt,[(0,f._)("div",null,(0,y.zw)(e.$t("闪烁")),1),(0,f._)("div",ea,[(0,f.Wm)(p,{modelValue:a.setInfo.cursorBlink,"onUpdate:modelValue":l[2]||(l[2]=e=>a.setInfo.cursorBlink=e)},null,8,["modelValue"])])])]),(0,f._)("div",la,[(0,f._)("div",ta,(0,y.zw)(e.$t("标签"))+"：",1),(0,f._)("div",aa,[(0,f._)("div",oa,(0,y.zw)(e.$t("终端代码")),1),(0,f._)("div",ia,[(0,f.Wm)(p,{modelValue:a.setInfo.tCode,"onUpdate:modelValue":l[3]||(l[3]=e=>a.setInfo.tCode=e)},null,8,["modelValue"])])]),(0,f._)("div",sa,[(0,f._)("div",na,(0,y.zw)(e.$t("多端同步")),1),(0,f._)("div",ra,[(0,f.Wm)(p,{modelValue:a.setInfo.cloud,"onUpdate:modelValue":l[4]||(l[4]=e=>a.setInfo.cloud=e)},null,8,["modelValue"])])])]),(0,f._)("div",ua,[da,(0,f._)("div",ca,[(0,f._)("div",pa,(0,y.zw)(e.$t("高级功能")),1),(0,f._)("div",ma,[(0,f.Wm)(p,{modelValue:a.setInfo.advance,"onUpdate:modelValue":l[5]||(l[5]=e=>a.setInfo.advance=e)},null,8,["modelValue"])])]),(0,f._)("div",va,[(0,f._)("div",ga,(0,y.zw)(e.$t("传输列表")),1),(0,f._)("div",fa,[(0,f.Wm)(p,{modelValue:a.setInfo.transport,"onUpdate:modelValue":l[6]||(l[6]=e=>a.setInfo.transport=e)},null,8,["modelValue"])])])]),(0,f._)("div",wa,[(0,f._)("div",ya,(0,y.zw)(e.$t("其它"))+"：",1),(0,f._)("div",ha,[(0,f._)("div",null,(0,y.zw)(e.$t("语言")),1),(0,f.Wm)(c,{style:{margin:"0 20px"},"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(d,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.langList,((e,l)=>((0,f.wg)(),(0,f.j4)(u,{key:l,class:"no-select",onClick:l=>a.setInfo.lang=e.value},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.label),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",ka,[(0,f.Uk)((0,y.zw)(a.mapValueToLabel(a.setInfo.lang)),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1})])])),_:1})])])]),_a,(0,f._)("div",ba,[xa,(0,f.Wm)(m,{size:"small",type:"primary",onClick:a.confirm,style:{"margin-top":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","width","title","before-close"])}var Da={name:"PreferenceSetting",components:{ArrowDown:Fl.K5e},props:["env","os"],setup(e,l){const t=(0,He.iH)(!1),a=[{label:"English",value:"en"},{label:El.global.k("简体中文"),value:"zh"}],o=e=>{const l=a.find((l=>l.value===e));return l?l.label:"English"},i=(0,f.Fl)((()=>"Windows"===e.os?["Courier New","Consolas","Monospace","Lucida Console"]:"Mac"===e.os||"iOS"===e.os?["Courier New","Menlo","Monaco","Courier"]:["Courier New","Consolas","Monospace","Lucida Console"])),s=[12,14,16,18,20],n=["block","underline","bar"],r=(0,He.iH)({lang:e.env.lang,bg:e.env.bg,fg:e.env.fg,fontFamily:e.env.fontFamily,fontSize:e.env.fontSize,cursorStyle:e.env.cursorStyle,cursorBlink:e.env.cursorBlink,tCode:e.env.tCode,cloud:e.env.cloud,advance:e.env.advance,transport:e.env.transport}),u=()=>{l.emit("callback",r.value),c()},d=()=>{r.value={lang:e.env.lang,bg:e.env.bg,fg:e.env.fg,fontFamily:e.env.fontFamily,fontSize:e.env.fontSize,cursorStyle:e.env.cursorStyle,cursorBlink:e.env.cursorBlink,tCode:e.env.tCode,cloud:e.env.cloud,advance:e.env.advance,transport:e.env.transport},t.value=!1},c=e=>{setTimeout((()=>{d()}),400),t.value=!1,e&&e()};return{langList:a,mapValueToLabel:o,fontFamilyList:i,fontSizeList:s,cursorStyleList:n,setInfo:r,DialogVisible:t,confirm:u,closeDialog:c}}};const Sa=(0,Gl.Z)(Da,[["render",Ca],["__scopeId","data-v-833b2016"]]);var Wa=Sa;const za=e=>((0,f.dD)("data-v-47801fde"),e=e(),(0,f.Cn)(),e),Ia={class:"title kk-flex"},Ta={class:"ellipsis",style:{flex:"1"}},Va={key:0},Fa=za((()=>(0,f._)("div",null,"/",-1))),$a=["onClick"],Ua=za((()=>(0,f._)("div",null,"/",-1))),Ra={class:"kk-flex"},Ha={key:1,class:"disabled-function operate-icon"},Ea={key:3,class:"disabled-function operate-icon"},Na={key:4,class:"hover-class operate-icon"},Oa={class:"hover-class",style:{"font-size":"18px",cursor:"pointer"}},Ka={class:"kk-flex"},La={class:"kk-flex"},Aa={class:"kk-flex"},Ma=za((()=>(0,f._)("div",null,"URL",-1))),Pa={key:5,class:"disabled-function operate-icon"},ja={key:0},Ba=["onClick","onDblclick","onContextmenu"],qa={key:0,style:{margin:"0 10px"}},Ga={key:0,class:"ellipsis",style:{margin:"0 10px"}},Ya=["onClick","onDblclick","onContextmenu"],Za={key:0,style:{margin:"0 10px"}},Ja={key:0,class:"ellipsis",style:{margin:"0 10px"}},Xa={key:1},Qa=za((()=>(0,f._)("div",{style:{"margin-top":"-12px"}},null,-1)));function eo(e,l,t,a,o,i){const s=(0,f.up)("el-input"),n=(0,f.up)("Refresh"),r=(0,f.up)("el-icon"),u=(0,f.up)("Fold"),d=(0,f.up)("Download"),c=(0,f.up)("Upload"),p=(0,f.up)("DocumentAdd"),m=(0,f.up)("el-dropdown-item"),v=(0,f.up)("FolderAdd"),w=(0,f.up)("Link"),h=(0,f.up)("el-dropdown-menu"),k=(0,f.up)("el-dropdown"),_=(0,f.up)("FileIcons"),b=(0,f.up)("ToolTip"),x=(0,f.up)("NoData"),C=(0,f.up)("el-dialog"),D=(0,f.up)("el-button"),S=(0,f.up)("el-upload"),W=(0,f.up)("FileUrl"),z=(0,f.up)("TxtPreview"),I=(0,f.up)("MkFile"),T=(0,f.up)("FileAttr"),V=(0,f.up)("el-popconfirm"),F=(0,f.Q2)("loading"),$=(0,f.Q2)("resizable");return(0,f.wg)(),(0,f.iD)(f.HY,null,[(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",null,[(0,f.Wm)(C,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[32]||(l[32]=e=>a.DialogVisible=e),"before-close":a.closeDialog,title:e.$t("文件管理"),width:"50%",modal:!1,"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-0","align-center":"",draggable:"",style:{position:"relative"}},{default:(0,f.w5)((()=>[(0,f._)("div",null,[(0,f._)("div",Ia,[(0,f._)("div",Ta,[a.isShowDirInput?((0,f.wg)(),(0,f.iD)("div",Va,[(0,f.Wm)(s,{id:"aimDirInput",modelValue:a.dir,"onUpdate:modelValue":l[0]||(l[0]=e=>a.dir=e),placeholder:e.$t("输入目录路径"),size:"small",onKeydown:l[1]||(l[1]=(0,g.D2)((e=>{a.isShowDirInput=!1}),["enter"])),onBlur:l[2]||(l[2]=e=>{a.isShowDirInput=!1}),onMousedown:l[3]||(l[3]=(0,g.iM)((()=>{}),["stop"])),onDblclick:l[4]||(l[4]=(0,g.iM)((()=>{}),["stop"])),onChange:a.dirInputCallback},null,8,["modelValue","placeholder","onChange"])])):((0,f.wg)(),(0,f.iD)("div",{key:1,class:"kk-flex no-select ellipsis",onDblclick:l[5]||(l[5]=(...e)=>a.doShowDirInput&&a.doShowDirInput(...e))},[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.dirLevels,((e,l)=>((0,f.wg)(),(0,f.iD)("div",{key:l,class:"kk-flex"},[Fa,(0,f._)("div",{class:"dir-level",onClick:e=>a.changeDirByLevel(e,l)},(0,y.zw)(e),9,$a)])))),128)),Ua],32))]),(0,f._)("div",Ra,[(0,f._)("div",{class:"hover-class operate-icon",onClick:l[6]||(l[6]=(...e)=>a.doRefresh&&a.doRefresh(...e))},[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1})]),a.dir&&"/"!==a.dir?((0,f.wg)(),(0,f.iD)("div",{key:0,class:"hover-class operate-icon",onClick:l[7]||(l[7]=(...e)=>a.doReturn&&a.doReturn(...e))},[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(u)])),_:1})])):((0,f.wg)(),(0,f.iD)("div",Ha,[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(u)])),_:1})])),1===a.selectedFiles.length?((0,f.wg)(),(0,f.iD)("div",{key:2,class:"hover-class operate-icon",onClick:l[8]||(l[8]=(...e)=>a.doDownload&&a.doDownload(...e))},[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])):((0,f.wg)(),(0,f.iD)("div",Ea,[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])),0===a.dirStatus?((0,f.wg)(),(0,f.iD)("div",Na,[(0,f.wy)((0,f.Wm)(k,{style:{"line-height":"unset"},placement:"bottom-end",size:"small",trigger:"click"},{dropdown:(0,f.w5)((()=>[(0,f.wy)((0,f.Wm)(h,{class:"no-select",style:{"text-align":"center"}},{default:(0,f.w5)((()=>[(0,f.Wm)(m,{onClick:l[9]||(l[9]=e=>a.fileUploadTypeChoose(0))},{default:(0,f.w5)((()=>[(0,f._)("div",Ka,[(0,f._)("div",null,[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1})]),(0,f._)("div",null,(0,y.zw)(e.$t("文件")),1)])])),_:1}),(0,f.Wm)(m,{onClick:l[10]||(l[10]=e=>a.fileUploadTypeChoose(1))},{default:(0,f.w5)((()=>[(0,f._)("div",La,[(0,f._)("div",null,[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(v)])),_:1})]),(0,f._)("div",null,(0,y.zw)(e.$t("文件夹")),1)])])),_:1}),(0,f.Wm)(m,{onClick:l[11]||(l[11]=e=>a.fileUploadTypeChoose(2))},{default:(0,f.w5)((()=>[(0,f._)("div",Aa,[(0,f._)("div",null,[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(w)])),_:1})]),Ma])])),_:1})])),_:1},512),[[g.F8,a.DialogVisible]])])),default:(0,f.w5)((()=>[(0,f._)("div",Oa,[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(c)])),_:1})])])),_:1},512),[[g.F8,a.DialogVisible]])])):((0,f.wg)(),(0,f.iD)("div",Pa,[(0,f.Wm)(r,null,{default:(0,f.w5)((()=>[(0,f.Wm)(c)])),_:1})]))])]),(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",{id:"fileArea",ref:"fileAreaRef","element-loading-text":"Loading...",class:"list-class no-select",onContextmenu:l[27]||(l[27]=(...e)=>a.handleContextMenu&&a.handleContextMenu(...e)),onScroll:l[28]||(l[28]=(...e)=>a.handleScroll&&a.handleScroll(...e)),onDragover:l[29]||(l[29]=(...e)=>a.preventDefault&&a.preventDefault(...e)),onDrop:l[30]||(l[30]=(...e)=>a.handleFileDrag&&a.handleFileDrag(...e)),tabindex:"0",onKeydown:l[31]||(l[31]=(...e)=>a.handleShortcutKeys&&a.handleShortcutKeys(...e))},[a.files.length>0?((0,f.wg)(),(0,f.iD)("div",ja,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.files,(e=>((0,f.wg)(),(0,f.iD)("div",{key:e.id},[e.isDirectory?((0,f.wg)(),(0,f.iD)("div",{key:0,class:(0,y.C_)([-1!==a.isSelected(e.id)?"item-selected":"","item-class"]),onClick:l=>a.addSelectFile(l,e),onDblclick:l=>a.changeDir(a.dir+e.name+"/"),onContextmenu:l=>a.addSelectFile(l,e,!1)},[(0,f.Wm)(_,{style:{display:"flex",alignItems:"center"},iconStyle:{opacity:"."===e.name[0]||-1!==a.isClipboard(e.id)&&a.isCtrlx?.5:1},name:e.name,width:20,height:20,isFolder:e.isDirectory,isLink:e.isSymlink},null,8,["iconStyle","name","isFolder","isLink"]),a.isShowRenameInput&&a.renameFile&&e.id===a.renameFile.id?((0,f.wg)(),(0,f.iD)("div",qa,[(0,f.Wm)(s,{id:"rename",modelValue:a.renameFile.name,"onUpdate:modelValue":l[12]||(l[12]=e=>a.renameFile.name=e),placeholder:"",size:"small",onKeydown:[l[13]||(l[13]=(0,g.D2)((e=>{a.isShowRenameInput=!1}),["enter"])),l[15]||(l[15]=(0,g.iM)((()=>{}),["stop"]))],onBlur:l[14]||(l[14]=e=>{a.isShowRenameInput=!1}),onContextmenu:l[16]||(l[16]=(0,g.iM)((()=>{}),["stop"])),onMousedown:l[17]||(l[17]=(0,g.iM)((()=>{}),["stop"])),onDblclick:l[18]||(l[18]=(0,g.iM)((()=>{}),["stop"])),onChange:l=>a.handleRename(e)},null,8,["modelValue","onChange"])])):(0,f.kq)("",!0),(0,f.Wm)(b,{isShow:!a.isShowMenu,content:e.name,delay:1e3},{content:(0,f.w5)((()=>[a.isShowRenameInput&&a.renameFile&&e.id===a.renameFile.id?(0,f.kq)("",!0):((0,f.wg)(),(0,f.iD)("div",Ga,(0,y.zw)(e.name),1))])),_:2},1032,["isShow","content"])],42,Ba)):((0,f.wg)(),(0,f.iD)("div",{key:1,class:(0,y.C_)([-1!==a.isSelected(e.id)?"item-selected":"","item-class"]),onClick:l=>a.addSelectFile(l,e),onDblclick:l=>a.preViewFile(e.name),onContextmenu:l=>a.addSelectFile(l,e,!1)},[(0,f.Wm)(_,{style:{display:"flex",alignItems:"center"},iconStyle:{opacity:"."===e.name[0]||-1!==a.isClipboard(e.id)&&a.isCtrlx?.5:1},name:e.name,width:20,height:20,isFolder:e.isDirectory,isLink:e.isSymlink},null,8,["iconStyle","name","isFolder","isLink"]),a.isShowRenameInput&&a.renameFile&&e.id===a.renameFile.id?((0,f.wg)(),(0,f.iD)("div",Za,[(0,f.Wm)(s,{id:"rename",modelValue:a.renameFile.name,"onUpdate:modelValue":l[19]||(l[19]=e=>a.renameFile.name=e),placeholder:"",size:"small",onKeydown:[l[20]||(l[20]=(0,g.D2)((e=>{a.isShowRenameInput=!1}),["enter"])),l[22]||(l[22]=(0,g.iM)((()=>{}),["stop"]))],onBlur:l[21]||(l[21]=e=>{a.isShowRenameInput=!1}),onContextmenu:l[23]||(l[23]=(0,g.iM)((()=>{}),["stop"])),onMousedown:l[24]||(l[24]=(0,g.iM)((()=>{}),["stop"])),onDblclick:l[25]||(l[25]=(0,g.iM)((()=>{}),["stop"])),onChange:l=>a.handleRename(e)},null,8,["modelValue","onChange"])])):(0,f.kq)("",!0),(0,f.Wm)(b,{isShow:!a.isShowMenu,content:e.name,delay:1e3},{content:(0,f.w5)((()=>[a.isShowRenameInput&&a.renameFile&&e.id===a.renameFile.id?(0,f.kq)("",!0):((0,f.wg)(),(0,f.iD)("div",Ja,(0,y.zw)(e.name),1))])),_:2},1032,["isShow","content"])],42,Ya))])))),128))])):((0,f.wg)(),(0,f.iD)("div",Xa,[a.loading?(0,f.kq)("",!0):((0,f.wg)(),(0,f.j4)(x,{key:0,height:"248px",onContextmenu:l[26]||(l[26]=e=>a.selectedFiles=[]),msg:a.noDataMsg},null,8,["msg"]))]))],32)),[[F,a.loading]])]),Qa])),_:1},8,["modelValue","before-close","title"])])),[[$,{maxWidthRate:1.2}]]),(0,f.wy)((0,f.Wm)(S,{"show-file-list":!1,"with-credentials":!0,"http-request":a.doUpload,multiple:!0},{default:(0,f.w5)((()=>[(0,f.wy)((0,f.Wm)(D,{size:"small",type:"primary",id:"fileUploadInputButton"},null,512),[[g.F8,!1]])])),_:1},8,["http-request"]),[[g.F8,!1]]),(0,f.wy)((0,f._)("input",{type:"file",webkitdirectory:"",onChange:l[33]||(l[33]=(...e)=>a.folderInputUploadPrehandle&&a.folderInputUploadPrehandle(...e)),id:"folderUploadInput"},null,544),[[g.F8,!1]]),(0,f.Wm)(W,{ref:"fileUrlRef",onCallback:a.fileUrlUpload},null,8,["onCallback"]),(0,f.Wm)(z,{ref:"txtPreviewRef",onDoSave:a.doSave},null,8,["onDoSave"]),(0,f.Wm)(I,{ref:"mkFileRef",onCallback:a.handleMkFile},null,8,["onCallback"]),(0,f.Wm)(T,{sshKey:t.sshKey,ref:"fileAttrRef",onCallback:a.doRename,onEditPermissions:a.editPermissions,uploadingList:t.uploadingList},null,8,["sshKey","onCallback","onEditPermissions","uploadingList"]),(0,f.wy)((0,f._)("div",{ref:"menuBlockRef",onContextmenu:l[43]||(l[43]=(...e)=>a.preventDefault&&a.preventDefault(...e)),class:"kk-menu no-select"},[(0,f._)("div",{style:{"border-bottom":"1px solid #ddd"},class:"kk-menu-item",onClick:l[34]||(l[34]=e=>a.handleMenuSelect(1)),key:"1"},(0,y.zw)(e.$t("刷新")),1),(0,f._)("div",{class:(0,y.C_)(["kk-menu-item",1!==a.selectedFiles.length?"disabled":""]),onClick:l[35]||(l[35]=e=>a.handleMenuSelect(2)),key:"2"},(0,y.zw)(e.$t("打开")),3),(0,f._)("div",{style:{"border-bottom":"1px solid #ddd"},class:(0,y.C_)(["kk-menu-item",a.selectedFiles.length>1?"disabled":""]),onClick:l[36]||(l[36]=e=>a.handleMenuSelect(3)),key:"3"},(0,y.zw)(e.$t("复制路径")),3),(0,f.wy)((0,f._)("div",{style:{"border-bottom":"1px solid #ddd"},class:(0,y.C_)(["kk-menu-item",1===a.selectedFiles.length&&a.isZipFile(a.selectedFiles[0].name)?"":"disabled"]),onClick:l[37]||(l[37]=e=>a.handleMenuSelect(9)),key:"9"},(0,y.zw)(e.$t("解压")),3),[[g.F8,1===a.selectedFiles.length&&a.isZipFile(a.selectedFiles[0].name)]]),(0,f._)("div",{class:(0,y.C_)(["kk-menu-item",1!==a.selectedFiles.length?"disabled":""]),onClick:l[38]||(l[38]=e=>a.handleMenuSelect(4)),key:"4"},(0,y.zw)(e.$t("下载")),3),(0,f._)("div",{class:(0,y.C_)(["kk-menu-item",1===a.dirStatus?"disabled":""]),onClick:l[39]||(l[39]=e=>a.handleMenuSelect(5)),key:"5"},(0,y.zw)(e.$t("新建")),3),(0,f._)("div",{class:(0,y.C_)(["kk-menu-item",1!==a.selectedFiles.length?"disabled":""]),onClick:l[40]||(l[40]=e=>a.handleMenuSelect(6)),key:"6"},(0,y.zw)(e.$t("重命名")),3),(0,f.Wm)(V,{title:e.$t("确定删除此文件吗?"),"confirm-button-text":e.$t("确定"),"cancel-button-text":e.$t("取消"),onConfirm:a.confirmPopConfirm,onCancel:a.cancelPopConfirm,visible:a.isShowMenu&&a.isShowPop,trigger:"click","popper-style":{zIndex:3466,fontSize:"13px",color:"black"},"popper-class":"confirmPop",placement:"right","confirm-button-type":"danger"},{reference:(0,f.w5)((()=>[(0,f._)("div",{class:(0,y.C_)(["kk-menu-item",0===a.selectedFiles.length?"disabled":""]),key:"7"},[(0,f._)("div",{onClick:l[41]||(l[41]=e=>a.handleMenuSelect(7))},(0,y.zw)(e.$t("删除")),1)],2)])),_:1},8,["title","confirm-button-text","cancel-button-text","onConfirm","onCancel","visible"]),(0,f._)("div",{style:{"border-top":"1px solid #ddd"},class:(0,y.C_)(["kk-menu-item",1!==a.selectedFiles.length?"disabled":""]),onClick:l[42]||(l[42]=e=>a.handleMenuSelect(8)),key:"8"},(0,y.zw)(e.$t("属性")),3)],544),[[g.F8,a.isShowMenu]])],64)}const lo={tar:"tar",tbz2:"tbz2",gz:"gz",xz:"xz",bz2:"bz2",zip:"zip"},to=e=>{const l=e.lastIndexOf(".");if(-1===l)return!1;const t=e.substring(l+1).toLowerCase();return!!lo[t]},ao={pdf:"application/pdf",html:"text/html",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp",webp:"image/webp",svg:"image/svg+xml",ico:"image/vnd.microsoft.icon"},oo={mp3:"audio/mpeg",wav:"audio/wav",ogg:"audio/ogg",aac:"audio/aac",m4a:"audio/mp4"},io={mp4:"video/mp4",webm:"video/webm",ogv:"video/ogg",avi:"video/x-msvideo",mov:"video/quicktime"},so=e=>{const l={preview:"editor",type:"text"},t=e.lastIndexOf(".");if(-1===t)return l;const a=e.substring(t+1).toLowerCase();return ao[a]?(l.preview="iframe",l.type=ao[a]):oo[a]?(l.preview="audio",l.type=oo[a]):io[a]&&(l.preview="video",l.type=io[a]),l},no=(e,l)=>po(e)+vo(l),ro=e=>{const l=no("REGULAR",e).slice(1);return{owner:["r"===l[0],"w"===l[1],"x"===l[2]||"s"===l[2]||"S"===l[2]],group:["r"===l[3],"w"===l[4],"x"===l[5]||"s"===l[5]||"S"===l[5]],others:["r"===l[6],"w"===l[7],"x"===l[8]||"t"===l[8]||"T"===l[8]],sub:!1}},uo=e=>{const l=e=>(e[0]?4:0)+(e[1]?2:0)+(e[2]?1:0),t=l(e.owner).toString(),a=l(e.group).toString(),o=l(e.others).toString();return t+a+o},co={BLOCK_SPECIAL:"b",CHAR_SPECIAL:"c",FIFO_SPECIAL:"p",SOCKET_SPECIAL:"s",REGULAR:"-",DIRECTORY:"d",SYMLINK:"l",UNKNOWN:"?"},po=e=>co[e],mo={USR_R:256,USR_W:128,USR_X:64,GRP_R:32,GRP_W:16,GRP_X:8,OTH_R:4,OTH_W:2,OTH_X:1,SUID:2048,SGID:1024,STICKY:512},vo=e=>{let l="---------",t=0;for(let a=0;a<e.length;a++)mo[e[a]]&&(t+=mo[e[a]]);return l=go(l,0,t&mo["USR_R"],"r"),l=go(l,1,t&mo["USR_W"],"w"),l=go(l,2,t&mo["USR_X"],"x",t&mo["SUID"],"s","S"),l=go(l,3,t&mo["GRP_R"],"r"),l=go(l,4,t&mo["GRP_W"],"w"),l=go(l,5,t&mo["GRP_X"],"x",t&mo["SGID"],"s","S"),l=go(l,6,t&mo["OTH_R"],"r"),l=go(l,7,t&mo["OTH_W"],"w"),l=go(l,8,t&mo["OTH_X"],"x",t&mo["STICKY"],"t","T"),l},go=(e,l,t,a,o=0,i="",s="-")=>(e=o?e.substring(0,l)+(t?i:s)+e.substring(l+1):e.substring(0,l)+(t?a:e[l])+e.substring(l+1),e);var fo=t(4693),wo=t.n(fo);const yo=(e,l)=>wo().encode(e,l),ho=(e,l)=>wo().decode(e,l),ko={tcodes:"tcodes","tcode-vars":"tcode-local-vars","tcode-draft":"tcode-draft",user:"user",options:"options",env:"env"},_o={"tcode-vars":"tcode-session-vars-"},bo={tcodes:"tcodes",options:"options",env:"env"},xo=()=>{localStorage.getItem(ko["user"])||localStorage.setItem(ko["user"],c(crypto.randomUUID()+"@"+Ye(16)+"@"+(new Date).getTime()));const e=m(localStorage.getItem(ko["user"])).split("@");return{name:e[0],key:e[1],time:Number(e[2])}},Co=async(e,l,t)=>{if(!t)return;const a=xo(),i=new Blob([c(t,a.key)],{type:"application/octet-stream"}),s=new File([i],l),n=new FormData;return n.append("user",a.name+"-"+a.time),n.append("type",e),n.append("name",l),n.append("file",s),new Promise(((e,l)=>{o().ajax({url:Pe+"/cloud",type:"post",data:n,contentType:!1,processData:!1,success(l){"success"!==l.status&&(506==l.code?(0,Ee.z8)({message:El.global.t("云端文件过多"),type:l.status,grouping:!0}):(0,Ee.z8)({message:El.global.t("云端同步失败"),type:l.status,grouping:!0})),e()},error(){l()}})}))},Do=async e=>{const l=xo();return new Promise(((t,a)=>{let i=null;o().ajax({url:Pe+"/load",method:"GET",data:{time:(new Date).getTime(),user:l.name+"-"+l.time,fileName:e},success(e){"success"===e.status&&(i=JSON.parse(m(e.data,l.key))),t(i)},error(){a()}})}))},So=Object.values(bo),Wo=async e=>{const l=e||So,t=[];for(let a=0;a<l.length;a++){const e=localStorage.getItem(l[a]);if(e){const o=Co(l[a],"",m(e));t.push(o)}}return Promise.allSettled(t)},zo=async e=>{e&&localStorage.setItem(ko["user"],e);const l=[];for(let t=0;t<So.length;t++){const e=Do(So[t]);e.then((e=>{e&&localStorage.setItem(So[t],c(JSON.stringify(e)))})),l.push(e)}return Promise.allSettled(l).then((()=>{e&&window.location.reload()}))},Io={setItem(e,l){localStorage.setItem(e,l),Wo([e])},getItem(e){return localStorage.getItem(e)},removeItem(e){localStorage.removeItem(e)}};var To=t(18);const Vo=ko["tcode-vars"],Fo=_o["tcode-vars"],$o={FS:{desc:El.global.k("重启终端"),execFlow(e){e.proxy.doSettings(3)}},FL:{desc:El.global.k("刷新页面"),execFlow(){window.location.reload()}},FE:{desc:El.global.k("用户退出登录"),execFlow(e){e.proxy.socket&&e.proxy.socket.close(3131)}},FO:{desc:El.global.k("新建终端窗口"),execFlow(){const e=window.location.href;window.open(e,"_blank")}},FC:{desc:El.global.k("关闭终端窗口"),execFlow(){window.close()}}},Uo={SC:{desc:El.global.k("连接设置"),execFlow(e){e.proxy.doSettings(1)}},SP:{desc:El.global.k("偏好设置"),execFlow(e){e.proxy.doSettings(2)}},SF:{desc:El.global.k("文件管理"),execFlow(e){e.proxy.doSettings(4)}},SAC:{desc:El.global.k("高级-协作"),execFlow(e){e.proxy.sshKey&&e.proxy.env.advance&&e.proxy.doSettings(6)}},SAM:{desc:El.global.k("高级-监控"),execFlow(e){e.proxy.sshKey&&e.proxy.env.advance&&"root"===e.proxy.env.server_user&&e.proxy.doSettings(7)}},SAD:{desc:El.global.k("高级-Docker"),execFlow(e){e.proxy.sshKey&&e.proxy.env.advance&&e.proxy.doSettings(8)}},STC:{desc:El.global.k("终端代码中心"),execFlow(e){e.proxy.tCodeCenterRef.DialogVisible=!0}},STW:{desc:El.global.k("终端代码工作流"),execFlow(e){setTimeout((()=>{e.proxy.tCodeWorkflowRef.initText()}),1),e.proxy.tCodeWorkflowRef.DialogVisible=!0}}},Ro={file:{async cd(e){await Ho.fileBlockRef.fileBlockView(e)},async open(e,l={}){const{dir:t,name:a}=Ho.parsePath(e),o=await Ho.fileBlockRef.fileBlockView(t,a);if(!o||o.isDirectory)throw new Error(El.global.t("无法打开文件：")+a);await Ho.fileBlockRef.preViewFile(a,l)},edit(e){e&&e instanceof Function&&e(Ho.fileBlockRef.txtPreviewRef.codeEditorRef.aceEditor)},save(e){const l=Ho.fileBlockRef.txtPreviewRef;e&&(l.saveEncode=e),l.handleSave(l.codeEditorRef.getValue())},close(e=!1){e?Ho.fileBlockRef.closeDialog():Ho.fileBlockRef.txtPreviewRef.closeDialog()},async download(e){const{dir:l,name:t}=Ho.parsePath(e),a=await Ho.fileBlockRef.fileBlockView(l,t);if(!a)throw new Error(El.global.t("无法下载文件：")+t);a.isDirectory?Ho.fileBlockRef.downloadDir(t):Ho.fileBlockRef.downloadRemoteFile(t)}},var:{session(e,l){if(!l)return sessionStorage.getItem(Fo+e)?JSON.parse(sessionStorage.getItem(Fo+e)):null;sessionStorage.setItem(Fo+e,JSON.stringify(l))},local(e,l){let t={};if(Io.getItem(Vo)&&(t=JSON.parse(m(Io.getItem(Vo)))),!l)return t[e];t[e]=l,Io.setItem(Vo,c(JSON.stringify(t)))},clean(){if(0===arguments.length)return void Io.removeItem(Vo);let e={};Io.getItem(Vo)&&(e=JSON.parse(m(Io.getItem(Vo))));for(let l=0;l<arguments.length;l++)delete e[arguments[l]];Io.setItem(Vo,c(JSON.stringify(e)))}},async write(e,l=200){return e?e.endsWith("\n")||e.endsWith("\r")||(e+="\n"):e="\n",Ho.cnt=Ho.outArray.length,Ho.writeNoAwait(e,!0),await new Promise((e=>setTimeout(e,Math.max(200,l)))),this.read()},read(){return Oo(Ho.outArray.slice(Ho.cnt))},readAll(){return Oo(Ho.outArray.slice(0))},hide(){Ho.display=!1},show(){Ho.display=!0}},Ho={active:!1,display:!0,outArray:[],cnt:0,fileBlockRef:null,writeNoAwait:null,parsePath(e){e.endsWith("/")&&(e=e.slice(0,-1));const l=e.lastIndexOf("/"),t=e.substring(0,l)||this.fileBlockRef.dir,a=e.substring(l+1);return{dir:t,name:a}},reset(){this.active=!1,this.display=!0,this.outArray=[],this.cnt=0}},Eo={option:"CONNECT_OPTION",home:"HOME_PATH",dir:"CURRENT_DIR"},No=(e,l)=>{Ro.var.session(Eo[e],l)},Oo=e=>{const l=[],t=Ko(e);for(let a=0;a<t.length;a++){const e=Lo(t[a]);e&&l.push(e)}return l},Ko=e=>{const l=[];for(let t=0;t<e.length;t++){const a=e[t].split("\r\n");for(let e=0;e<a.length;e++)a[e]&&l.push(a[e])}return l},Lo=e=>(0,To.Z)(e).replace(/[\x00-\x1F\x7F]/g,""),Ao={"Compile Error":"Error","Execute Interrupt":"Interrupted","Not Active":"Inactive","Execute Success":"Success"},Mo={getCompletions:function(e,l,t,a,o){const i=[{name:"kkTerminal",value:"kkTerminal",meta:"kkTerminal",description:"kkTerminal API",score:1e3},{name:"file",value:"file",meta:"kkTerminal",description:"operate file module",score:1e3},{name:"cd",value:"cd()",meta:"kkTerminal",description:"change directory",score:1e3},{name:"open",value:"open()",meta:"kkTerminal",description:"open file editor",score:1e3},{name:"edit",value:"edit((editor) => {\n\n})",meta:"kkTerminal",description:"edit file content",score:1e3},{name:"save",value:"save()",meta:"kkTerminal",description:"save file changes",score:1e3},{name:"close",value:"close()",meta:"kkTerminal",description:"close editor or file module",score:1e3},{name:"download",value:"download()",meta:"kkTerminal",description:"download file or folder",score:1e3},{name:"var",value:"var",meta:"kkTerminal",description:"operate variables",score:1e3},{name:"session",value:"session()",meta:"kkTerminal",description:"get or set session variables",score:1e3},{name:"local",value:"local()",meta:"kkTerminal",description:"get or set local variables",score:1e3},{name:"clean",value:"clean()",meta:"kkTerminal",description:"remove local variables",score:1e3},{name:"write",value:"write()",meta:"kkTerminal",description:"write to terminal",score:1e3},{name:"read",value:"read()",meta:"kkTerminal",description:"read latest from terminal",score:1e3},{name:"readAll",value:"readAll()",meta:"kkTerminal",description:"read all from terminal",score:1e3},{name:"hide",value:"hide()",meta:"kkTerminal",description:"hide Terminal Code display",score:1e3},{name:"show",value:"show()",meta:"kkTerminal",description:"show Terminal Code display",score:1e3}];o(null,i.map((e=>({caption:e.caption||e.name,value:e.value,meta:e.meta,description:e.description||""}))))}},Po={tCodes:[],index:0,add(e){this.tCodes.push(e),this.index=this.tCodes.length},up(e){return 0===this.tCodes.length?e:(this.index--,this.index<0&&(this.index=0),this.tCodes[this.index])},down(e){return 0===this.tCodes.length?e:(this.index++,this.index>=this.tCodes.length?(this.index=this.tCodes.length,""):this.tCodes[this.index])}},jo=e=>((0,f.dD)("data-v-6de1a31d"),e=e(),(0,f.Cn)(),e),Bo={class:"kk-flex no-select kk-header-class"},qo={class:"ellipsis",style:{margin:"0 5px","font-size":"larger"}},Go=jo((()=>(0,f._)("div",{style:{"margin-top":"-28px"}},null,-1))),Yo={id:"editor-bar",class:"kk-flex ellipsis no-select",style:{"margin-bottom":"5px","overflow-x":"auto"}},Zo={class:"kk-flex"},Jo={class:"kk-flex"},Xo={class:"a-link"},Qo={class:"kk-flex"},ei={class:"a-link"},li=jo((()=>(0,f._)("div",{style:{"margin-right":"20px"}},null,-1))),ti={class:"kk-flex"},ai={class:"a-link"},oi=jo((()=>(0,f._)("div",{style:{"margin-right":"20px"}},null,-1))),ii={class:"kk-flex"},si=jo((()=>(0,f._)("div",{style:{"margin-right":"20px"}},null,-1))),ni={class:"kk-flex"},ri=jo((()=>(0,f._)("span",null,"px",-1))),ui=jo((()=>(0,f._)("div",{style:{"margin-right":"20px"}},null,-1))),di={class:"kk-flex"},ci={"element-loading-text":"Loading...",style:{width:"100%",height:"60vh",position:"relative","margin-bottom":"10px"}},pi=["src"],mi={key:1,controls:"",class:"preview"},vi=["src","type"],gi={key:2,controls:"",class:"preview"},fi=["src","type"],wi={key:3,style:{position:"absolute",top:"0",right:"30px"}},yi=jo((()=>(0,f._)("span",null,"%",-1))),hi=jo((()=>(0,f._)("div",{style:{"margin-top":"-13px"}},null,-1)));function ki(e,l,t,a,o,i){const s=(0,f.up)("FileIcons"),n=(0,f.up)("el-tag"),r=(0,f.up)("arrow-down"),u=(0,f.up)("el-icon"),d=(0,f.up)("el-dropdown-item"),c=(0,f.up)("el-dropdown-menu"),p=(0,f.up)("el-dropdown"),m=(0,f.up)("el-input-number"),v=(0,f.up)("DocumentCopy"),w=(0,f.up)("el-button"),h=(0,f.up)("AceEditor"),k=(0,f.up)("el-dialog"),_=(0,f.Q2)("loading"),b=(0,f.Q2)("resizable");return(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",null,[(0,f.Wm)(k,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[3]||(l[3]=e=>a.DialogVisible=e),width:"80%",modal:!1,"modal-class":"kk-dialog-class","body-class":"kk-body-class-12","before-close":a.closeDialog,"align-center":"",draggable:""},{title:(0,f.w5)((()=>[(0,f._)("div",Bo,[(0,f.Wm)(s,{style:{display:"flex",alignItems:"center"},name:a.fileName,width:25,height:25,isFolder:!1},null,8,["name"]),(0,f._)("div",qo,(0,y.zw)(a.modifyTag+a.fileName),1)])])),default:(0,f.w5)((()=>[Go,(0,f.wy)((0,f._)("div",Yo,[(0,f._)("div",Zo,[(0,f._)("div",null,(0,y.zw)(e.$t("编码"))+"：",1),(0,f._)("div",Jo,[(0,f.Wm)(n,{size:"small",type:"info",style:{"margin-right":"5px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("打开")),1)])),_:1}),(0,f.Wm)(p,{size:"small","hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(c,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.encodeSet,((e,l)=>((0,f.wg)(),(0,f.j4)(d,{key:l,class:"no-select",onClick:l=>a.changeEncode(0,e)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",Xo,[(0,f.Uk)((0,y.zw)(a.openEncode),1),(0,f.Wm)(u,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(r)])),_:1})])])),_:1})]),(0,f._)("div",Qo,[(0,f.Wm)(n,{size:"small",type:"info",style:{"margin-left":"10px","margin-right":"5px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("保存")),1)])),_:1}),(0,f.Wm)(p,{size:"small","hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(c,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.encodeSet,((e,l)=>((0,f.wg)(),(0,f.j4)(d,{key:l,class:"no-select",onClick:l=>a.changeEncode(1,e)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",ei,[(0,f.Uk)((0,y.zw)(a.saveEncode),1),(0,f.Wm)(u,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(r)])),_:1})])])),_:1})])]),li,(0,f._)("div",ti,[(0,f._)("div",null,(0,y.zw)(e.$t("模式"))+"：",1),(0,f.Wm)(p,{size:"small","hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(c,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.modeSet,((e,l)=>((0,f.wg)(),(0,f.j4)(d,{key:l,class:"no-select",onClick:l=>a.setMode(e)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",ai,[(0,f.Uk)((0,y.zw)(a.mode),1),(0,f.Wm)(u,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(r)])),_:1})])])),_:1})]),oi,(0,f._)("div",ii,[(0,f._)("div",null,(0,y.zw)(e.$t("缩进"))+"：",1),(0,f._)("div",null,[(0,f.Wm)(m,{style:{width:"80px"},size:"small",modelValue:a.indent,"onUpdate:modelValue":l[0]||(l[0]=e=>a.indent=e),min:2,max:4,step:"2","step-strictly":!0,onChange:a.setIndent},null,8,["modelValue","onChange"])])]),si,(0,f._)("div",ni,[(0,f._)("div",null,(0,y.zw)(e.$t("字号"))+"：",1),(0,f._)("div",null,[(0,f.Wm)(m,{style:{width:"100px"},size:"small",modelValue:a.fontSize,"onUpdate:modelValue":l[1]||(l[1]=e=>a.fontSize=e),min:12,max:20,step:"2","step-strictly":!0,onChange:a.setFontSize},{suffix:(0,f.w5)((()=>[ri])),_:1},8,["modelValue","onChange"])])]),ui,(0,f._)("div",di,[(0,f.Wm)(w,{size:"small",type:"primary",onClick:a.doCopy},{default:(0,f.w5)((()=>[(0,f.Wm)(u,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(v)])),_:1}),(0,f.Uk)((0,y.zw)(e.$t("复制")),1)])),_:1},8,["onClick"])])],512),[[g.F8,"editor"===a.previewInfo.preview]]),(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",ci,[(0,f.wy)((0,f.Wm)(h,{class:"preview",ref:"codeEditorRef",onHandleChange:a.handleChange,onHandleSave:a.handleSave},null,8,["onHandleChange","onHandleSave"]),[[g.F8,!a.loading&&"editor"===a.previewInfo.preview]]),!a.loading&&"iframe"===a.previewInfo.preview&&a.previewUrl?((0,f.wg)(),(0,f.iD)("iframe",{key:0,id:"imgPreview",class:"preview",src:a.previewUrl},null,8,pi)):(0,f.kq)("",!0),!a.loading&&"audio"===a.previewInfo.preview&&a.previewUrl?((0,f.wg)(),(0,f.iD)("audio",mi,[(0,f._)("source",{src:a.previewUrl,type:a.previewInfo.type},null,8,vi)])):(0,f.kq)("",!0),!a.loading&&"video"===a.previewInfo.preview&&a.previewUrl?((0,f.wg)(),(0,f.iD)("video",gi,[(0,f._)("source",{src:a.previewUrl,type:a.previewInfo.type},null,8,fi)])):(0,f.kq)("",!0),!a.loading&&"iframe"===a.previewInfo.preview&&"application/pdf"!==a.previewInfo.type&&"text/html"!==a.previewInfo.type&&a.previewUrl?((0,f.wg)(),(0,f.iD)("div",wi,[(0,f.Wm)(m,{style:{width:"105px"},size:"small",modelValue:a.percentage,"onUpdate:modelValue":l[2]||(l[2]=e=>a.percentage=e),min:20,max:200,step:"10","step-strictly":!0,onChange:a.setPercentage},{suffix:(0,f.w5)((()=>[yi])),_:1},8,["modelValue","onChange"])])):(0,f.kq)("",!0)])),[[_,a.loading]]),hi])),_:1},8,["modelValue","before-close"])])),[[b,{maxWidthRate:1}]])}const _i={ref:"aceEditorRef",class:"kk-code-editor"};function bi(e,l,t,a,o,i){return(0,f.wg)(),(0,f.iD)("div",_i,null,512)}var xi=t(17),Ci=t.n(xi);t(7050),t(4783),t(2428),t(516),t(6684),t(350),t(8930),t(9986),t(2177),t(3669),t(629),t(5045),t(1564),t(6668),t(1838),t(9375),t(2606),t(1948),t(4070),t(1853),t(6347),t(4840),t(498),t(9394),t(4733),t(7366),t(5293),t(6529),t(6895),t(7389),t(8918),t(1910),t(5955),t(2376),t(9110),t(1710),t(1067),t(2841),t(1122),t(366),t(5824),t(7682),t(7535);const Di={c:"c_cpp",cc:"c_cpp",cxx:"c_cpp",h:"c_cpp",hh:"c_cpp",cpp:"c_cpp",hpp:"c_cpp",ino:"c_cpp",cs:"csharp",css:"css",gitignore:"gitignore",go:"golang",html:"html",htm:"html",ini:"ini",conf:"ini",cfg:"ini",java:"java",js:"javascript",jsm:"javascript",cjs:"javascript",mjs:"javascript",jsx:"javascript",vue:"javascript",we:"javascript",wpy:"javascript",json:"json",jsp:"jsp",md:"markdown",markdown:"markdown",properties:"properties",py:"python",sh:"sh",bash:"sh",sql:"sql",cts:"typescript",mts:"typescript",ts:"typescript",tsx:"typescript",xml:"xml",rdf:"xml",rss:"xml",wsdl:"xml",xsl:"xml",xslt:"xml",atom:"xml",mathml:"xml",mml:"xml",xul:"xml",xbl:"xml",xaml:"xml",xsd:"xml",xhtml:"xml",yaml:"yaml",yml:"yaml",ipynb:"json",bash_history:"sh",bash_logout:"sh",bash_profile:"sh",tcshrc:"sh",bashrc:"sh",cshrc:"sh",vcxproj:"xml"},Si=e=>{let l="txt";if(e&&e.length>0){const t=e.lastIndexOf(".");-1!==t&&(l=e.substring(t+1).toLowerCase())}return l},Wi=e=>Di[Si(e)]||"text";var zi=Wi,Ii={name:"AceEditor",setup(e,l){const t=(0,He.iH)(),a=(0,He.iH)(null),o=e=>{a.value&&a.value.setValue(e),a.value&&a.value.selection.clearSelection()},i=()=>a.value?a.value.getValue():"",s=()=>{a.value&&a.value.getSession().getUndoManager().reset()},n=e=>{a.value&&a.value.getSession().setMode(`ace/mode/${zi(e)}`)},r=e=>{a.value&&(a.value.setReadOnly(e),t.value.style.backgroundColor=e?"#f0f0f0":"")},u=e=>{a.value&&a.value.setOptions({tabSize:e,useSoftTabs:!1})},d=e=>{a.value&&a.value.setOptions({fontSize:e})},c=e=>{if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),l.emit("handleSave",a.value.getValue());break}},p=()=>{o(""),s()};return(0,f.bv)((()=>{a.value=Ci().edit(t.value,{autoScrollEditorIntoView:!1,copyWithEmptySelection:!1,showPrintMargin:!1,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,theme:"ace/theme/chrome",mode:"ace/mode/text"}),a.value.completers.push(Mo),a.value.session.setOption("useWorker",!1),a.value.on("change",(()=>{l.emit("handleChange")})),a.value.find("needle",{backwards:!1,wrap:!1,caseSensitive:!1,wholeWord:!1,regExp:!1}),a.value.findNext(),a.value.findPrevious(),t.value.addEventListener("keydown",c)})),(0,f.Ah)((()=>{t.value&&t.value.removeEventListener("keydown",c)})),{aceEditorRef:t,aceEditor:a,setValue:o,resetHistory:s,reset:p,setLanguage:n,getValue:i,setReadOnly:r,setTabSize:u,setFontSize:d}}};const Ti=(0,Gl.Z)(Ii,[["render",bi],["__scopeId","data-v-2439696e"]]);var Vi=Ti,Fi={name:"TxtPreview",components:{AceEditor:Vi,FileIcons:Xl(),ArrowDown:Fl.K5e,DocumentCopy:Fl.IBc},setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(!1),i=(0,He.iH)(""),s=(0,He.iH)(""),n=(0,He.iH)(""),r=(0,He.iH)({preview:"editor",type:"text"}),u=(0,He.iH)(""),d=(0,He.iH)(),c=(0,He.iH)(null),p=async(e={})=>{a.value=!0,U();const l=n.value;r.value=so(s.value),y(l),e&&(e.encode&&(g.value=e.encode),e.mode&&(k.value=e.mode),e.indent&&(C.value=e.indent),e.size&&(S.value=e.size)),c.value=o().ajax({url:l,method:"GET",xhrFields:{responseType:"arraybuffer"},data:{type:"open"},dataFilter(e){return e},success(e){if(l===n.value){if("editor"!==r.value.preview){const l=new Blob([e],{type:r.value.type});u.value&&URL.revokeObjectURL(u.value),u.value=URL.createObjectURL(l),z.value=100,I.value=-1}else{const l=ho(new Uint8Array(e),g.value);x(l),D(),W()}i.value="",a.value=!1}},error(){l===n.value&&((0,Ee.z8)({message:El.global.t("文件加载失败"),type:"error",grouping:!0}),U(),R())}}),await c.value},m=()=>{i.value="*"},v=e=>{"*"===i.value&&(l.emit("doSave",s.value,n.value,yo(e,f.value||"UTF-8")),i.value="")},g=(0,He.iH)(""),f=(0,He.iH)(""),w=(0,He.iH)(["UTF-8","GBK","ISO-8859-1","Windows-1252"]),y=e=>{const l=kt(e),t=l.sshKey?Be(l.sshKey.split("-")[1]):"UTF-8";w.value=["UTF-8","GBK","ISO-8859-1","Windows-1252"],w.value.map((e=>e.toLowerCase())).includes(t.toLowerCase())||w.value.unshift(t),g.value||(g.value=t),f.value||(f.value=t)},h=(e,l)=>{if(0===e){if(g.value===l)return;a.value||p(),g.value=l,f.value=l,t.value=!0}else 1===e&&(f.value=l,i.value="*")},k=(0,He.iH)("auto"),_=(0,He.iH)(["auto","xml","bash","json"]),b=e=>{k.value!==e&&(k.value=e,d.value.setLanguage("auto"===k.value?s.value:"kk."+k.value))},x=e=>{d.value.setValue(e),d.value.resetHistory(),d.value.setLanguage("auto"===k.value?s.value:"kk."+k.value)},C=(0,He.iH)(4),D=()=>{d.value.setTabSize(C.value)},S=(0,He.iH)(14),W=()=>{d.value.setFontSize(S.value)},z=(0,He.iH)(100),I=(0,He.iH)(-1),T=()=>{const e=document.getElementById("imgPreview"),l=e.contentDocument||e.contentWindow.document;return l.querySelector("img")},V=()=>{const e=T();-1===I.value&&(I.value=e.height),e.height=I.value*z.value/100},{toClipboard:F}=(0,Re.Z)(),$=async()=>{const e=d.value.getValue();e&&e.length>0?(await F(e),(0,Ee.z8)({message:El.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})):(0,Ee.z8)({message:El.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},U=(e=!1)=>{e&&(s.value="",n.value="",a.value=!1),d.value&&d.value.reset(),i.value="",r.value={preview:"editor",type:"text"},u.value&&(URL.revokeObjectURL(u.value),u.value=""),c.value&&(c.value.abort(),c.value=null),g.value="",f.value="",w.value=["UTF-8","GBK","ISO-8859-1","Windows-1252"],k.value="auto",z.value=100,I.value=-1},R=e=>{setTimeout((()=>{U(!0)}),400),t.value=!1,e&&e()};return{DialogVisible:t,initText:p,loading:a,fileName:s,fileUrl:n,previewInfo:r,previewUrl:u,codeEditorRef:d,modifyTag:i,handleChange:m,handleSave:v,openEncode:g,saveEncode:f,changeEncode:h,encodeSet:w,initEncode:y,mode:k,modeSet:_,setMode:b,initEditor:x,indent:C,setIndent:D,fontSize:S,setFontSize:W,percentage:z,imgHeight:I,setPercentage:V,doCopy:$,closeDialog:R,reset:U}}};const $i=(0,Gl.Z)(Fi,[["render",ki],["__scopeId","data-v-6de1a31d"]]);var Ui=$i;const Ri=e=>((0,f.dD)("data-v-3c728cd2"),e=e(),(0,f.Cn)(),e),Hi={class:"no-select"},Ei={class:"errInfo no-select"},Ni={class:"kk-flex"},Oi=Ri((()=>(0,f._)("div",{style:{width:"10px"}},null,-1))),Ki={style:{flex:"1"}},Li={style:{"margin-left":"10px"}};function Ai(e,l,t,a,o,i){const s=(0,f.up)("el-radio"),n=(0,f.up)("el-radio-group"),r=(0,f.up)("FileIcons"),u=(0,f.up)("el-input"),d=(0,f.up)("el-button"),c=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(c,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[2]||(l[2]=e=>a.DialogVisible=e),"before-close":a.closeDialog,width:300,modal:!1,title:e.$t("新建"),"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-0",draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",Hi,[(0,f.Wm)(n,{modelValue:a.isDirectory,"onUpdate:modelValue":l[0]||(l[0]=e=>a.isDirectory=e),class:"ml-4"},{default:(0,f.w5)((()=>[(0,f.Wm)(s,{label:!1,size:"large"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("文件")),1)])),_:1}),(0,f.Wm)(s,{label:!0,size:"large"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("文件夹")),1)])),_:1})])),_:1},8,["modelValue"]),(0,f._)("div",Ei,(0,y.zw)(e.$t(a.err_msg)),1),(0,f._)("div",Ni,[(0,f._)("div",null,[a.isDirectory?((0,f.wg)(),(0,f.j4)(r,{key:0,style:{display:"flex",alignItems:"center"},width:24,height:24,name:"kk.txt",isFolder:!0})):((0,f.wg)(),(0,f.j4)(r,{key:1,style:{display:"flex",alignItems:"center"},width:24,height:24,name:a.name,isFolder:!1},null,8,["name"]))]),Oi,(0,f._)("div",Ki,[(0,f.Wm)(u,{size:"small",modelValue:a.name,"onUpdate:modelValue":l[1]||(l[1]=e=>a.name=e),onKeydown:(0,g.D2)(a.confirm,["enter"]),class:"w-50 m-2",placeholder:""},null,8,["modelValue","onKeydown"])]),(0,f._)("div",Li,[(0,f.Wm)(d,{size:"small",type:"primary",onClick:a.confirm},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])])])),_:1},8,["modelValue","before-close","title"])}var Mi={name:"MkFile",components:{FileIcons:Xl()},setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(""),o=(0,He.iH)(!1),i=(0,He.iH)(""),s=(0,He.iH)(""),n=()=>{if(a.value="",!(i.value&&i.value.trim().length>0))return void(a.value=El.global.k("文件名不能为空"));const e=/[/|]/;e.test(i.value)?a.value=El.global.k("文件名不能含有")+" |,/":(l.emit("callback",o.value,i.value,s.value),u())},r=()=>{a.value="",o.value=!1,i.value="",s.value="",t.value=!1},u=e=>{setTimeout((()=>{r()}),400),t.value=!1,e&&e()};return{DialogVisible:t,err_msg:a,isDirectory:o,name:i,nowDir:s,confirm:n,closeDialog:u,reset:r}}};const Pi=(0,Gl.Z)(Mi,[["render",Ai],["__scopeId","data-v-3c728cd2"]]);var ji=Pi;const Bi=e=>((0,f.dD)("data-v-3f96ba7a"),e=e(),(0,f.Cn)(),e),qi={class:"kk-flex-0 nowrap kk-header-class"},Gi={class:"ellipsis",style:{margin:"0 5px","font-size":"small"}},Yi={style:{"font-size":"small"}},Zi=Bi((()=>(0,f._)("div",{style:{"margin-top":"-32px"}},null,-1))),Ji={class:"no-select","element-loading-text":"Loading..."},Xi={class:"kk-flex"},Qi={style:{"margin-right":"10px"}},es=Bi((()=>(0,f._)("div",{class:"kk-border"},null,-1))),ls={class:"kk-flex nowrap"},ts={class:"form-width"},as={class:"ellipsis"},os={key:0,class:"kk-flex"},is={class:"form-width"},ss={class:"ellipsis"},ns={key:0,style:{"margin-left":"10px"}},rs={key:1,style:{"margin-left":"10px"}},us={key:1,class:"kk-flex"},ds={class:"form-width"},cs={class:"ellipsis"},ps={key:0,style:{"margin-left":"10px"}},ms={key:1,style:{"margin-left":"10px"}},vs=Bi((()=>(0,f._)("div",{class:"kk-border"},null,-1))),gs={class:"kk-flex"},fs={class:"form-width"},ws={class:"kk-flex"},ys={class:"form-width"},hs=Bi((()=>(0,f._)("div",{class:"kk-border"},null,-1))),ks={class:"kk-flex"},_s={class:"form-width"},bs=Bi((()=>(0,f._)("div",{style:{flex:"1"}},null,-1)));function xs(e,l,t,a,o,i){const s=(0,f.up)("FileIcons"),n=(0,f.up)("el-input"),r=(0,f.up)("ToolTip"),u=(0,f.up)("DocumentCopy"),d=(0,f.up)("el-icon"),c=(0,f.up)("el-tag"),p=(0,f.up)("Refresh"),m=(0,f.up)("Edit"),v=(0,f.up)("el-button"),w=(0,f.up)("el-dialog"),h=(0,f.up)("PermissionsEdit"),k=(0,f.Q2)("loading"),_=(0,f.Q2)("resizable");return(0,f.wg)(),(0,f.iD)(f.HY,null,[(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",null,[(0,f.Wm)(w,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[5]||(l[5]=e=>a.DialogVisible=e),"before-close":a.closeDialog,width:400,modal:!1,"modal-class":"kk-dialog-class","body-class":"kk-body-class-12","align-center":"",draggable:""},{title:(0,f.w5)((()=>[(0,f._)("div",qi,[(0,f.Wm)(s,{style:{display:"flex",alignItems:"center"},name:a.fileInfo.name,width:16,height:16,isFolder:a.fileInfo.isDirectory,isLink:a.fileInfo.isSymlink},null,8,["name","isFolder","isLink"]),(0,f._)("div",Gi,(0,y.zw)(a.fileInfo.name),1),(0,f._)("div",Yi,(0,y.zw)(e.$t("属性")),1)])])),default:(0,f.w5)((()=>[Zi,(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",Ji,[(0,f._)("div",Xi,[(0,f._)("div",Qi,[(0,f.Wm)(s,{style:{display:"flex",alignItems:"center"},name:a.fileInfo.name,width:32,height:32,isFolder:a.fileInfo.isDirectory,isLink:a.fileInfo.isSymlink},null,8,["name","isFolder","isLink"])]),(0,f._)("div",null,[(0,f.Wm)(n,{onKeydown:(0,g.D2)(a.confirm,["enter"]),modelValue:a.rename,"onUpdate:modelValue":l[0]||(l[0]=e=>a.rename=e),placeholder:""},null,8,["onKeydown","modelValue"])])]),es,(0,f._)("div",ls,[(0,f._)("div",ts,(0,y.zw)(e.$t("位置"))+"：",1),(0,f.Wm)(r,{content:a.fileDir+a.fileInfo.name},{content:(0,f.w5)((()=>[(0,f._)("div",as,(0,y.zw)(a.fileDir+a.fileInfo.name),1)])),_:1},8,["content"]),(0,f._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[1]||(l[1]=e=>a.doCopy(a.fileDir+a.fileInfo.name))},[(0,f.Wm)(d,{size:"18"},{default:(0,f.w5)((()=>[(0,f.Wm)(u)])),_:1})])]),a.fileInfo.isDirectory?((0,f.wg)(),(0,f.iD)("div",os,[(0,f._)("div",is,(0,y.zw)(e.$t("包含"))+"：",1),(0,f._)("div",ss,(0,y.zw)(e.$t(a.includeInfo)),1),a.uploading?((0,f.wg)(),(0,f.iD)("div",ns,[(0,f.Wm)(c,{size:"small",type:"warning"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("正在上传").toLowerCase()),1)])),_:1})])):a.fileInfo.isSymlink||a.unreliable?((0,f.wg)(),(0,f.iD)("div",rs,[(0,f.Wm)(c,{size:"small",type:"danger"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("未确认").toLowerCase()),1)])),_:1})])):(0,f.kq)("",!0),(0,f._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[2]||(l[2]=(...e)=>a.getFolderInclude&&a.getFolderInclude(...e))},[(0,f.Wm)(d,{size:"18"},{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1})])])):((0,f.wg)(),(0,f.iD)("div",us,[(0,f._)("div",ds,(0,y.zw)(e.$t("大小"))+"：",1),(0,f._)("div",cs,(0,y.zw)(a.calcSize(a.fileInfo.attributes.size))+" ("+(0,y.zw)(a.fileInfo.attributes.size.toLocaleString()+" "+e.$t("字节"))+") ",1),a.uploading?((0,f.wg)(),(0,f.iD)("div",ps,[(0,f.Wm)(c,{size:"small",type:"warning"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("正在上传").toLowerCase()),1)])),_:1})])):a.fileInfo.isSymlink||a.unreliable?((0,f.wg)(),(0,f.iD)("div",ms,[(0,f.Wm)(c,{size:"small",type:"danger"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("未确认").toLowerCase()),1)])),_:1})])):(0,f.kq)("",!0),(0,f._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[3]||(l[3]=(...e)=>a.getFileSize&&a.getFileSize(...e))},[(0,f.Wm)(d,{size:"18"},{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1})])])),vs,(0,f._)("div",gs,[(0,f._)("div",fs,(0,y.zw)(e.$t("修改时间"))+"：",1),(0,f._)("div",null,(0,y.zw)(a.calcDate(a.fileInfo.attributes.mtime)),1)]),(0,f._)("div",ws,[(0,f._)("div",ys,(0,y.zw)(e.$t("访问时间"))+"：",1),(0,f._)("div",null,(0,y.zw)(a.calcDate(a.fileInfo.attributes.atime)),1)]),hs,(0,f._)("div",ks,[(0,f._)("div",_s,(0,y.zw)(e.$t("权限"))+"：",1),(0,f._)("div",null,(0,y.zw)(a.calcPriority(a.fileInfo.attributes.mode.type,a.fileInfo.attributes.permissions)),1),(0,f._)("div",{style:{cursor:"pointer","margin-left":"7px"},onClick:l[4]||(l[4]=(...e)=>a.openEditPermissions&&a.openEditPermissions(...e))},[(0,f.Wm)(d,{size:"18"},{default:(0,f.w5)((()=>[(0,f.Wm)(m)])),_:1})]),bs,(0,f._)("div",null,[(0,f.Wm)(v,{size:"small",type:"primary",onClick:a.confirm},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])])),[[k,a.loading]])])),_:1},8,["modelValue","before-close"])])),[[_,{minWidthRate:1,maxWidthRate:1.2}]]),(0,f.Wm)(h,{ref:"permissionsEditRef",onEditPermissions:a.editPermissions},null,8,["onEditPermissions"])],64)}const Cs=e=>{if(!e)return"";const l=new Date(1e3*e),t=l.getFullYear();let a=l.getMonth()+1,o=l.getDate(),i=l.getHours(),s=l.getMinutes(),n=l.getSeconds();a<10&&(a="0"+a),o<10&&(o="0"+o),i<10&&(i="0"+i),s<10&&(s="0"+s),n<10&&(n="0"+n);let r=null;return r="zh"===El.global.locale?[t,a,o]:[a,o,t],r[0]+El.global.t("年")+r[1]+El.global.t("月")+r[2]+El.global.t("日，")+i+":"+s+":"+n},Ds=e=>{if(!e)return"";let l=new Date(e),t=l.getHours(),a=l.getMinutes(),o=l.getSeconds();return t<10&&(t="0"+t),a<10&&(a="0"+a),o<10&&(o="0"+o),t+":"+a+":"+o},Ss=1024,Ws=1,zs=Ss*Ws,Is=Ss*zs,Ts=Ss*Is,Vs=e=>{if(!e)return"";let l,t;e<0&&(e=0),e<zs?(l=e/Ws,t="B"):e<Is?(l=e/zs,t="KB"):e<Ts?(l=e/Is,t="MB"):(l=e/Ts,t="GB");let a=l.toFixed(2);return a.endsWith(".00")&&(a=a.substring(0,a.length-3)),`${a} ${t}`},Fs=e=>((0,f.dD)("data-v-6907b185"),e=e(),(0,f.Cn)(),e),$s={class:"kk-flex-0 nowrap kk-header-class"},Us={class:"ellipsis",style:{margin:"0 5px","font-size":"small"}},Rs={style:{"font-size":"small"}},Hs=Fs((()=>(0,f._)("div",{style:{"margin-top":"-25px"}},null,-1))),Es={class:"kk-flex"},Ns={class:"form-width no-select"},Os={class:"kk-flex"},Ks={class:"form-width no-select"},Ls={class:"kk-flex"},As={class:"form-width no-select"},Ms=Fs((()=>(0,f._)("div",{style:{"margin-bottom":"5px"}},null,-1))),Ps={style:{display:"flex","align-items":"center","border-top":"1px solid #f1f2f4"}},js=Fs((()=>(0,f._)("div",{style:{flex:"1"}},null,-1)));function Bs(e,l,t,a,o,i){const s=(0,f.up)("FileIcons"),n=(0,f.up)("el-checkbox"),r=(0,f.up)("el-button"),u=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(u,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[10]||(l[10]=e=>a.DialogVisible=e),"before-close":a.closeDialog,width:e.$t("360"),modal:!1,"modal-class":"kk-dialog-class","body-class":"kk-body-class-12","align-center":"",draggable:""},{title:(0,f.w5)((()=>[(0,f._)("div",$s,[(0,f.Wm)(s,{style:{display:"flex",alignItems:"center"},name:a.fileInfo.name,width:16,height:16,isFolder:a.fileInfo.isDirectory,isLink:a.fileInfo.isSymlink},null,8,["name","isFolder","isLink"]),(0,f._)("div",Us,(0,y.zw)(a.fileInfo.name),1),(0,f._)("div",Rs,(0,y.zw)(e.$t("权限修改")),1)])])),default:(0,f.w5)((()=>[Hs,(0,f._)("div",Es,[(0,f._)("div",Ns,(0,y.zw)(e.$t("所有者"))+"：",1),(0,f.Wm)(n,{modelValue:a.permissionsInfo.owner[0],"onUpdate:modelValue":l[0]||(l[0]=e=>a.permissionsInfo.owner[0]=e),label:e.$t("读取"),size:"large"},null,8,["modelValue","label"]),(0,f.Wm)(n,{modelValue:a.permissionsInfo.owner[1],"onUpdate:modelValue":l[1]||(l[1]=e=>a.permissionsInfo.owner[1]=e),label:e.$t("写入"),size:"large"},null,8,["modelValue","label"]),(0,f.Wm)(n,{modelValue:a.permissionsInfo.owner[2],"onUpdate:modelValue":l[2]||(l[2]=e=>a.permissionsInfo.owner[2]=e),label:e.$t("执行"),size:"large"},null,8,["modelValue","label"])]),(0,f._)("div",Os,[(0,f._)("div",Ks,(0,y.zw)(e.$t("所属组"))+"：",1),(0,f.Wm)(n,{modelValue:a.permissionsInfo.group[0],"onUpdate:modelValue":l[3]||(l[3]=e=>a.permissionsInfo.group[0]=e),label:e.$t("读取"),size:"large"},null,8,["modelValue","label"]),(0,f.Wm)(n,{modelValue:a.permissionsInfo.group[1],"onUpdate:modelValue":l[4]||(l[4]=e=>a.permissionsInfo.group[1]=e),label:e.$t("写入"),size:"large"},null,8,["modelValue","label"]),(0,f.Wm)(n,{modelValue:a.permissionsInfo.group[2],"onUpdate:modelValue":l[5]||(l[5]=e=>a.permissionsInfo.group[2]=e),label:e.$t("执行"),size:"large"},null,8,["modelValue","label"])]),(0,f._)("div",Ls,[(0,f._)("div",As,(0,y.zw)(e.$t("其他用户"))+"：",1),(0,f.Wm)(n,{modelValue:a.permissionsInfo.others[0],"onUpdate:modelValue":l[6]||(l[6]=e=>a.permissionsInfo.others[0]=e),label:e.$t("读取"),size:"large"},null,8,["modelValue","label"]),(0,f.Wm)(n,{modelValue:a.permissionsInfo.others[1],"onUpdate:modelValue":l[7]||(l[7]=e=>a.permissionsInfo.others[1]=e),label:e.$t("写入"),size:"large"},null,8,["modelValue","label"]),(0,f.Wm)(n,{modelValue:a.permissionsInfo.others[2],"onUpdate:modelValue":l[8]||(l[8]=e=>a.permissionsInfo.others[2]=e),label:e.$t("执行"),size:"large"},null,8,["modelValue","label"])]),Ms,(0,f._)("div",Ps,[a.fileInfo.isDirectory?((0,f.wg)(),(0,f.j4)(n,{key:0,modelValue:a.permissionsInfo.sub,"onUpdate:modelValue":l[9]||(l[9]=e=>a.permissionsInfo.sub=e),label:e.$t("应用到子目录和文件"),size:"small",style:{"margin-top":"10px"}},null,8,["modelValue","label"])):(0,f.kq)("",!0),js,(0,f.Wm)(r,{size:"small",type:"primary",onClick:a.confirm,style:{"margin-top":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close","width"])}var qs={name:"PermissionsEdit",components:{FileIcons:Xl()},setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(""),o=(0,He.iH)({attributes:{mode:{type:""},permissions:""}}),i=(0,He.iH)({owner:[!1,!1,!1],group:[!1,!1,!1],others:[!1,!1,!1],sub:!1}),s=()=>{i.value=ro(o.value.attributes.permissions)},n=()=>{l.emit("editPermissions",a.value,o.value.name,i.value)},r=()=>{a.value="",o.value={attributes:{mode:{type:""},permissions:""}},i.value={owner:[!1,!1,!1],group:[!1,!1,!1],others:[!1,!1,!1],sub:!1},t.value=!1},u=e=>{setTimeout((()=>{r()}),400),t.value=!1,e&&e()};return{fileDir:a,fileInfo:o,DialogVisible:t,closeDialog:u,init:s,permissionsInfo:i,getPermissionInfo:ro,confirm:n}}};const Gs=(0,Gl.Z)(qs,[["render",Bs],["__scopeId","data-v-6907b185"]]);var Ys=Gs,Zs={name:"FileAttr",components:{ToolTip:ht,FileIcons:Xl(),DocumentCopy:Fl.IBc,Refresh:Fl.hYj,Edit:Fl.I8b,PermissionsEdit:Ys},props:["sshKey","uploadingList"],setup(e,l){const{toClipboard:t}=(0,Re.Z)(),a=(0,He.iH)(!1),i=(0,He.iH)({}),s=(0,He.iH)(""),n=(0,He.iH)(""),r=(0,He.iH)(!0),u=(0,He.iH)(!1),d=(0,He.iH)(El.global.k("0 个文件，0 个文件夹")),c=()=>{o().ajax({url:Pe+"/du",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey,path:Je(s.value),item:Xe(i.value.name)},beforeSend:function(){r.value=!0},success(e){"success"===e.status?i.value.attributes.size=parseInt(e.data,10):u.value=!0},complete:function(){r.value=!1}})},p=()=>{o().ajax({url:Pe+"/find",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey,path:Je(s.value),item:Xe(i.value.name)},beforeSend:function(){r.value=!0},success(e){"success"===e.status?d.value=e.data[0]+El.global.t(" 个文件，")+Math.max(0,parseInt(e.data[1],10)-1)+El.global.t(" 个文件夹"):u.value=!0},complete:function(){r.value=!1}})},m=()=>{if(i.value.name===n.value)return void _();if(!(n.value&&n.value.trim().length>0))return void(0,Ee.z8)({message:El.global.t("文件名不能为空"),type:"warning",grouping:!0});const e=/[/|]/;if(e.test(n.value))return void(0,Ee.z8)({message:El.global.t("文件名不能含有")+" |,/",type:"warning",grouping:!0});const t=s.value+i.value.name,a=s.value+n.value;l.emit("callback",t,a),_()},v=async e=>{e+="",e&&e.length>0?(await t(e),(0,Ee.z8)({message:El.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})):(0,Ee.z8)({message:El.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},g=(e,t,a)=>{l.emit("editPermissions",e,t,a)},w=()=>{i.value={attributes:{mode:{type:""},permissions:"",size:0}},n.value="",s.value="",r.value=!1,u.value=!1,d.value=El.global.k("0 个文件，0 个文件夹"),a.value=!1},y=(0,He.iH)(),h=()=>{y.value.fileDir=s.value,y.value.fileInfo=i.value,y.value.DialogVisible=!0,y.value.init()},k=(0,f.Fl)((()=>{for(const l in e.uploadingList){const t=e.uploadingList[l];if((t.path+t.name).startsWith(s.value+i.value.name))return!0}return!1}));(0,f.YP)(k,(e=>{!1===e&&setTimeout((()=>{i.value.isDirectory?p():c()}),1)}));const _=e=>{y.value&&y.value.closeDialog(),setTimeout((()=>{w()}),400),a.value=!1,e&&e()};return{DialogVisible:a,fileInfo:i,confirm:m,closeDialog:_,reset:w,fileDir:s,rename:n,calcDate:Cs,calcPriority:no,calcSize:Vs,doCopy:v,loading:r,unreliable:u,includeInfo:d,getFileSize:c,getFolderInclude:p,permissionsEditRef:y,openEditPermissions:h,editPermissions:g,uploading:k}}};const Js=(0,Gl.Z)(Zs,[["render",xs],["__scopeId","data-v-3f96ba7a"]]);var Xs=Js;const Qs=e=>((0,f.dD)("data-v-22d94150"),e=e(),(0,f.Cn)(),e),en={class:"no-select"},ln={class:"kk-flex"},tn=Qs((()=>(0,f._)("div",{class:"form-width"},"URL：",-1))),an={style:{flex:"1"}},on={key:0,class:"errInfo no-select"},sn={key:1,style:{height:"7px"}},nn={class:"kk-flex"},rn={class:"form-width"},un={style:{flex:"1"}},dn={style:{"margin-left":"10px"}};function cn(e,l,t,a,o,i){const s=(0,f.up)("Connection"),n=(0,f.up)("el-icon"),r=(0,f.up)("el-input"),u=(0,f.up)("Document"),d=(0,f.up)("el-button"),c=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(c,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[2]||(l[2]=e=>a.DialogVisible=e),"before-close":a.closeDialog,width:320,modal:!1,title:e.$t("URL上传"),"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-0",draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",en,[(0,f._)("div",ln,[tn,(0,f._)("div",an,[(0,f.Wm)(r,{size:"small",modelValue:a.url,"onUpdate:modelValue":l[0]||(l[0]=e=>a.url=e),class:"w-50 m-2",placeholder:e.$t("请输入文件URL")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(s)])),_:1})])),_:1},8,["modelValue","placeholder"])])]),a.err_msg&&a.err_msg.length>0?((0,f.wg)(),(0,f.iD)("div",on,(0,y.zw)(e.$t(a.err_msg)),1)):((0,f.wg)(),(0,f.iD)("div",sn)),(0,f._)("div",nn,[(0,f._)("div",rn,(0,y.zw)(e.$t("文件名"))+"：",1),(0,f._)("div",un,[(0,f.Wm)(r,{size:"small",modelValue:a.name,"onUpdate:modelValue":l[1]||(l[1]=e=>a.name=e),onKeydown:(0,g.D2)(a.confirm,["enter"]),class:"w-50 m-2",placeholder:e.$t("请输入文件名")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(u)])),_:1})])),_:1},8,["modelValue","onKeydown","placeholder"])]),(0,f._)("div",dn,[(0,f.Wm)(d,{size:"small",type:"primary",onClick:a.confirm},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])])])),_:1},8,["modelValue","before-close","title"])}var pn={name:"FileUrl",components:{Connection:Fl.ewe,Document:Fl.BBB},setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(""),o=(0,He.iH)(""),i=(0,He.iH)(""),s=()=>{if(a.value="",!(i.value&&i.value.trim().length>0))return void(a.value=El.global.k("URL不能为空"));if(!(o.value&&o.value.trim().length>0))return void(a.value=El.global.k("文件名不能为空"));const e=/[/|]/;e.test(o.value)?a.value=El.global.k("文件名不能含有")+" |,/":(l.emit("callback",i.value,o.value),r())},n=()=>{a.value="",o.value="",i.value="",t.value=!1},r=e=>{setTimeout((()=>{n()}),400),t.value=!1,e&&e()};return{DialogVisible:t,err_msg:a,name:o,url:i,confirm:s,closeDialog:r,reset:n}}};const mn=(0,Gl.Z)(pn,[["render",cn],["__scopeId","data-v-22d94150"]]);var vn=mn,gn={name:"FileBlock",components:{ToolTip:ht,NoData:Zl,FileIcons:Xl(),TxtPreview:Ui,MkFile:ji,FileAttr:Xs,FileUrl:vn,Refresh:Fl.hYj,Fold:Fl.qFw,Download:Fl.UWx,Upload:Fl.gqx,DocumentAdd:Fl.kb8,FolderAdd:Fl.FDh,Link:Fl.rUS},props:["sshKey","os","uploadingList"],setup(e,l){const t=(0,He.iH)(!0),{toClipboard:a}=(0,Re.Z)(),i=(0,He.iH)([]),s=(0,He.iH)([]);let n=-1;const r=(l,t,a=!0)=>{l.preventDefault();const o=u(t.id);if(a)if(l.shiftKey)if(0===s.value.length||-1===n||n>=i.value.length){s.value=[];for(let e=0;e<=t.index;e++)s.value.push({...i.value[e]});n=-1}else{s.value=[];const e=Math.min(t.index,n),l=Math.max(t.index,n);for(let t=e;t<=l;t++)s.value.push({...i.value[t]})}else"Windows"===e.os&&l.ctrlKey||("Mac"===e.os||"iOS"===e.os)&&l.metaKey?(n=t.index,-1!==o?s.value.splice(o,1):s.value.push(t)):(n=t.index,s.value=[],s.value.push(t));else-1===o&&(n=t.index,s.value=[],s.value.push(t))},u=e=>{for(let l=0;l<s.value.length;l++)if(e===s.value[l].id)return l;return-1},d=e=>{for(let l=0;l<re.value.files.length;l++)if(e===re.value.files[l].id)return l;return-1},c=e=>{for(let l=0;l<i.value.length;l++)if(i.value[l].name===e)return i.value[l];return null},m=(0,He.iH)(""),g=(0,He.iH)([]),w=()=>{""!==m.value&&"/"===m.value[0]||(m.value="/"+m.value),"/"!==m.value[m.value.length-1]&&(m.value=m.value+"/"),m.value=m.value.replace(/\/{2,}/g,"/"),y(m.value)},y=e=>{g.value="/"===e?[]:e.substring(1,e.length-1).split("/")},h=(l,t)=>{if(!("Windows"===e.os&&l.ctrlKey||("Mac"===e.os||"iOS"===e.os)&&l.metaKey))return;l.preventDefault();let a="/";for(let e=0;e<=t;e++)a+=g.value[e],a+="/";T(a)},k=(0,He.iH)(!1),_=()=>{m.value||o().ajax({url:Pe+"/home",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey},success(e){"success"===e.status?(b.value=El.global.k("暂无文件"),x.value=0,m.value=e.data,w(),s.value=[],i.value=[],C(),No("home",m.value)):(b.value=e.info,x.value=1,t.value=!1)}})},b=(0,He.iH)(El.global.k("暂无文件")),x=(0,He.iH)(0),C=async()=>{if(!m.value)return void _();const l=m.value;await o().ajax({url:Pe+"/ls",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey,path:l},beforeSend:function(){t.value=!0,i.value=[]},success(e){if(l===m.value)if(s.value=[],"success"===e.status){if(i.value=Qe(e.data),b.value=El.global.k("暂无文件"),x.value=0,n=-1,setTimeout((()=>{A.value.tabindex="0",A.value.focus()}),1),Z.value&&Z.value.DialogVisible){const e=c(Z.value.fileInfo.name);e?(Z.value.reset(),Z.value.DialogVisible=!0,Z.value.fileInfo=e,Z.value.fileDir=m.value,Z.value.rename=e.name,e.isDirectory?Z.value.getFolderInclude():Z.value.getFileSize()):Z.value.closeDialog()}}else i.value=[],b.value=e.info,x.value=1,n=-1,setTimeout((()=>{A.value.tabindex="0",A.value.focus()}),1)},complete:function(){l===m.value&&(t.value=!1)}})},D=async(e,l)=>{m.value=e,w(),N.value=!0,await C();const t=c(l);return t&&(n=t.index,s.value=[],s.value.push(t),setTimeout((()=>{A.value.scrollTop=31*t.index}),1)),t},S=(l,t)=>Pe+"/download/remote/file?time="+(new Date).getTime()+"&fileName="+encodeURIComponent(l)+"&sshKey="+e.sshKey+"&path="+encodeURIComponent(t||m.value)+"&type=download",W=(l,t)=>Pe+"/download/remote/folder?time="+(new Date).getTime()+"&folderName="+encodeURIComponent(Xe(l))+"&sshKey="+e.sshKey+"&path="+encodeURIComponent(Je(t||m.value)),z=e=>{if(k.value)return;const l=document.createElement("a");l.href=S(e),document.body.appendChild(l),l.click(),document.body.removeChild(l)},I=e=>{if(k.value)return;const l=document.createElement("a");l.href=W(e),document.body.appendChild(l),l.click(),document.body.removeChild(l)},T=e=>{k.value||(m.value=e,w(),s.value=[],C())},V=()=>{k.value=!1,w(),s.value=[],C()},F=()=>{k.value=!1,C()},$=()=>{if(k.value)return;if("/"===m.value)return;"/"===m.value[m.value.length-1]&&(m.value=m.value.substring(0,m.value.length-1));const e=m.value.lastIndexOf("/");-1!==e&&(m.value=m.value.substring(0,e+1)),w(),s.value=[],F()},U=()=>{k.value||(1===s.value.length&&s.value[0].name&&s.value[0].isDirectory&&I(s.value[0].name),1===s.value.length&&s.value[0].name&&!s.value[0].isDirectory&&z(s.value[0].name))},R=2225152,H=async(t,a={})=>{try{if(k.value)return;const i=t.file;if(!i)return;const s=i.name,n=i.size,r=0===Math.ceil(n/R)?1:Math.ceil(n/R);i.uid=crypto.randomUUID();const u=i.uid,d=1,c=a.pathVal?a.pathVal:m.value,g={id:u,path:c,name:s,size:n,progress:0};l.emit("updateTransportLists",0,0,u,g),n>20971520&&!a.noStartUpLoad&&(0,Ee.z8)({message:a.startUpLoad?a.startUpLoad:El.global.t("开始上传"),type:"success",grouping:!0});for(let t=d;t<=r;t++){const d=(t-1)*R,f=d+R>=n?n:d+R,w=Ye(16),y=await i.slice(d,f).arrayBuffer(),h=yo(p(y,w),"UTF-8"),k=new File([new Blob([h])],s),_=new FormData;_.append("aesKey",v(w)),_.append("file",k),_.append("fileName",s),_.append("chunks",r),_.append("chunk",t),_.append("totalSize",n),_.append("id",u),_.append("sshKey",e.sshKey),_.append("path",c),await o().ajax({url:Pe+"/upload",type:"post",data:_,contentType:!1,processData:!1,success(e){"success"===e.status?202==e.code?((0,Ee.z8)({message:a.alert?a.alert:e.info,type:e.status,grouping:!0}),c===m.value&&setTimeout((()=>{C()}),Math.min(1e3,500+10*r))):(g.progress=Math.floor(t/r*100),l.emit("updateTransportLists",0,0,u,g)):((0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),t=r+10,g.status=1,l.emit("updateTransportLists",0,1,u,null),l.emit("updateTransportLists",3,0,u,g))}})}}catch(i){(0,Ee.z8)({message:El.global.t("文件上传失败"),type:"error",grouping:!0})}},E=l=>{"Windows"===e.os&&l.ctrlKey||("Mac"===e.os||"iOS"===e.os)&&l.metaKey||(k.value=!0,setTimeout((()=>{document.querySelector("#aimDirInput").focus()}),1))},N=(0,He.iH)(!1),O=(0,He.iH)(),K=async(e,l={})=>{O.value.fileName=e,O.value.fileUrl=S(e),O.value.loading=!0,O.value.DialogVisible=!0,await O.value.initText(l)},L=(l,t,a)=>{const o=kt(t);if(o.sshKey!==e.sshKey)return;const i=new Blob([a],{type:"application/octet-stream"}),s=new File([i],l);H({file:s},{pathVal:o.path,startUpLoad:El.global.t("修改保存中"),alert:El.global.t("文件后台保存中")})},A=(0,He.iH)(),M=e=>{e.preventDefault()},P=l=>{l.preventDefault();const t=l.dataTransfer.items;if(!(t&&t.length>0))return;const a=m.value;for(let i=0;i<t.length;i++){const l=t[i].webkitGetAsEntry();if(l.isFile&&!l.isDirectory)l.file((e=>{H({file:e},{pathVal:a})}));else if(!l.isFile&&l.isDirectory){const t=a+l.name;o().ajax({url:Pe+"/mkdir",type:"post",data:{sshKey:e.sshKey,path:a,item:l.name},success(e){"success"===e.status?(C(),j(l,t+"/")):(0,Ee.z8)({message:e.info,type:e.status,grouping:!0})}})}}},j=(l,t)=>{const a=l.createReader();a.readEntries((l=>{for(let a=0;a<l.length;a++){const i=l[a];if(i.isFile&&!i.isDirectory)i.file((e=>{H({file:e},{pathVal:t,noStartUpLoad:!0})}));else if(!i.isFile&&i.isDirectory){const l=t+i.name;o().ajax({url:Pe+"/mkdir",type:"post",data:{sshKey:e.sshKey,path:t,item:i.name},success(e){"success"===e.status?j(i,l+"/"):(0,Ee.z8)({message:e.info,type:e.status,grouping:!0})}})}}}))},B=(0,He.iH)(!1),q=(0,He.iH)(!1),G=(0,He.iH)(!1),Y=(0,He.iH)({}),Z=(0,He.iH)(),J=async e=>{switch(e){case 1:F();break;case 2:1===s.value.length&&s.value[0].isDirectory?T(m.value+s.value[0].name+"/"):1!==s.value.length||s.value[0].isDirectory||K(s.value[0].name);break;case 3:if(m.value&&m.value.length>0){const e=m.value+(1===s.value.length?s.value[0].name:"");await a(e),(0,Ee.z8)({message:El.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})}else(0,Ee.z8)({message:El.global.t("内容为空"),type:"warning",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER});break;case 4:1===s.value.length&&U();break;case 5:ie.value.nowDir=m.value,ie.value.DialogVisible=!0;break;case 6:1===s.value.length&&(Y.value={...s.value[0]},G.value=!0,setTimeout((()=>{document.querySelector("#rename").focus()}),1));break;case 7:q.value=!0;break;case 8:1===s.value.length&&(Z.value.reset(),Z.value.fileInfo={...s.value[0]},Z.value.fileDir=m.value,Z.value.rename=s.value[0].name,s.value[0].isDirectory?Z.value.getFolderInclude():Z.value.getFileSize(),Z.value.DialogVisible=!0);break;case 9:1===s.value.length&&to(s.value[0].name)&&we();break;default:break}7!==e&&(B.value=!1,q.value=!1)},X=()=>{B.value=!1,q.value=!1},Q=(0,He.iH)(),ee=e=>{"fileArea"===e.target.id&&(s.value=[]),Q.value.style.top=e.clientY-135+"px",Q.value.style.left=e.clientX+1+"px",B.value=!0,q.value=!1,e.preventDefault()},le=e=>{if(G.value=!1,e.name===Y.value.name)return void(Y.value={});if(!(Y.value.name&&Y.value.name.trim().length>0))return(0,Ee.z8)({message:El.global.t("文件名不能为空"),type:"warning",grouping:!0}),void(Y.value={});const l=/[/|]/;if(l.test(Y.value.name))return(0,Ee.z8)({message:El.global.t("文件名不能含有")+" |,/",type:"warning",grouping:!0}),void(Y.value={});const t=m.value+e.name,a=m.value+Y.value.name;Y.value={},te(t,a)},te=(l,t)=>{o().ajax({url:Pe+"/rename",type:"post",data:{sshKey:e.sshKey,oldPath:l,newPath:t},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),C()}})},ae=()=>{B.value=!1,q.value=!1,0!==s.value.length&&o().ajax({url:Pe+"/rm-rf",type:"post",data:{sshKey:e.sshKey,path:Je(m.value),items:s.value.map((e=>Xe(e.name))).join(" ")},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),C()}})},oe=()=>{q.value=!1},ie=(0,He.iH)(),se=(l,t,a)=>{o().ajax({url:Pe+(l?"/mkdir":"/touch"),type:"post",data:{sshKey:e.sshKey,path:l?a:Je(a),item:l?t:Xe(t)},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),C()}})};(0,f.YP)(m,(e=>{ie.value&&ie.value.closeDialog(),ge.value&&ge.value.closeDialog(),Z.value&&Z.value.closeDialog(),No("dir",e)}));const ne=e=>{const l=31,t=e*l,a=t+l,o=A.value.clientHeight,i=A.value.scrollTop;t<i?A.value.scrollTop=t:a>i+o&&(A.value.scrollTop=a-o)},re=(0,He.iH)({path:"/",files:[]}),ue=(0,He.iH)(!1),de=l=>{const t=document.querySelector("#rename");if(!t||!t.contains(l.target)){if(l.preventDefault(),"ArrowUp"!==l.key&&"ArrowDown"!==l.key||("ArrowUp"===l.key?((-1===n||n>i.value.length)&&(n=i.value.length),n--,n=Math.max(0,n)):"ArrowDown"===l.key&&(n++,n=Math.min(i.value.length-1,n)),B.value=!1,q.value=!1,s.value=[],s.value.push(i.value[n]),ne(n)),"Enter"===l.key){if(B.value||q.value)return B.value=!1,void(q.value=!1);if(1===s.value.length){const e=s.value[0];e.isDirectory?T(m.value+e.name+"/"):K(e.name)}}if("Windows"===e.os&&l.ctrlKey||("Mac"===e.os||"iOS"===e.os)&&l.metaKey)switch(String.fromCharCode(l.which).toLowerCase()){case"a":s.value=[];for(let e=0;e<i.value.length;e++)s.value.push({...i.value[e]});break;case"c":s.value.length>0&&(re.value.path=m.value,re.value.files=[...s.value],ue.value=!1);break;case"v":if(0===re.value.files.length)return;ce(ue.value?"mv":"cp"),ue.value&&(ue.value=!1,re.value={path:"/",files:[]});break;case"x":s.value.length>0&&(re.value.path=m.value,re.value.files=[...s.value],ue.value=!0);break}}},ce=l=>{re.value.path!==m.value&&o().ajax({url:Pe+"/"+l,type:"post",data:{sshKey:e.sshKey,src:Je(re.value.path),dst:Je(m.value),items:re.value.files.map((e=>Xe(e.name))).join(" ")},success(e){"success"===e.status?C():((0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),re.value={path:"/",files:[]})}})},pe=e=>{0===e?document.querySelector("#fileUploadInputButton").click():1===e?(document.querySelector("#folderUploadInput").value="",document.querySelector("#folderUploadInput").click()):2===e&&(ge.value.DialogVisible=!0)},me=e=>{const l=m.value,t={};for(let o=0;o<e.target.files["length"];o++){const l=e.target.files[o],a=l["webkitRelativePath"],i=a.lastIndexOf("/"),s=a.substring(0,i+1);t[s]||(t[s]={path:s,files:[]}),t[s].files.push(l)}const a=[];for(const o in t)a.push(t[o]);a.sort(((e,l)=>e.path.length-l.path.length)),ve(l,a,0)},ve=(l,t,a)=>{const i=t[a];o().ajax({url:Pe+"/mkdir",type:"post",data:{sshKey:e.sshKey,path:l,item:i.path},success(e){if("success"===e.status){0===a&&C(),a<t.length-1&&ve(l,t,a+1);for(let e=0;e<i.files.length;e++){const t=i.files[e];H({file:t},{pathVal:l+i.path,noStartUpLoad:!0})}}else(0,Ee.z8)({message:El.global.t("文件夹上传失败"),type:e.status,grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})}})},ge=(0,He.iH)(),fe=(l,t)=>{o().ajax({url:Pe+"/wget",type:"post",data:{sshKey:e.sshKey,path:Je(m.value),item:Xe(t),url:encodeURI(l)},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),C()}})},we=()=>{o().ajax({url:Pe+"/untar",type:"post",data:{sshKey:e.sshKey,path:Je(m.value),item:Xe(s.value[0].name)},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),C()}})},ye=(l,t,a)=>{o().ajax({url:Pe+"/chmod",type:"post",data:{sshKey:e.sshKey,path:Je(l),item:Xe(t),perms:uo(a),sub:a.sub||!1},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),"success"===e.status&&(Z.value&&Z.value.permissionsEditRef&&Z.value.permissionsEditRef.closeDialog(),C())}})},he=(e=!1)=>{e&&(t.value=!0,i.value=[],m.value="",g.value=[],k.value=!1,b.value=El.global.k("暂无文件"),x.value=0,re.value={path:"/",files:[]},ue.value=!1),s.value=[],n=-1,B.value=!1,q.value=!1,G.value=!1,Y.value={},N.value=!1},ke=e=>{O.value&&O.value.DialogVisible&&O.value.closeDialog(),ie.value&&ie.value.DialogVisible&&ie.value.closeDialog(),Z.value&&Z.value.DialogVisible&&Z.value.closeDialog(),ge.value&&ge.value.DialogVisible&&ge.value.closeDialog(),setTimeout((()=>{he()}),400),N.value=!1,e&&e()},_e=()=>{O.value&&O.value.closeDialog(),ie.value&&ie.value.closeDialog(),Z.value&&Z.value.closeDialog(),ge.value&&ge.value.closeDialog(),setTimeout((()=>{he(!0)}),400),N.value=!1};return(0,f.bv)((()=>{document.addEventListener("mousedown",(e=>{if(A.value&&A.value.contains(e.target)&&(A.value.tabindex="0",A.value.focus()),Q.value&&Q.value.contains(e.target))return;const l=document.querySelector(".confirmPop");l&&l.contains(e.target)||(B.value=!1,q.value=!1)}))})),(0,f.Ah)((()=>{A.value&&(A.value.removeEventListener("dragover",M),A.value.removeEventListener("drop",P),A.value.removeEventListener("scroll",X),A.value.removeEventListener("keydown",de))})),{DialogVisible:N,isShowDirInput:k,confirmDirCorrect:w,dir:m,files:i,getInitDir:_,getDirList:C,fileBlockView:D,downloadRemoteFile:z,downloadDir:I,changeDir:T,dirInputCallback:V,noDataMsg:b,doRefresh:F,doReturn:$,doDownload:U,doUpload:H,selectedFiles:s,loading:t,txtPreviewRef:O,preViewFile:K,doSave:L,fileAreaRef:A,handleMenuSelect:J,isShowMenu:B,preventDefault:M,handleFileDrag:P,handleScroll:X,handleContextMenu:ee,isShowRenameInput:G,handleRename:le,renameFile:Y,menuBlockRef:Q,doShowDirInput:E,isShowPop:q,confirmPopConfirm:ae,cancelPopConfirm:oe,mkFileRef:ie,handleMkFile:se,doRename:te,fileAttrRef:Z,folderUpload:j,dirStatus:x,handleShortcutKeys:de,fileClipboard:re,addSelectFile:r,isSelected:u,isClipboard:d,isCtrlx:ue,fileCopyMove:ce,fileUploadTypeChoose:pe,folderInputUploadPrehandle:me,fileUrlRef:ge,fileUrlUpload:fe,reset:he,closeDialog:ke,deepCloseDialog:_e,isZipFile:to,untar:we,editPermissions:ye,dirLevels:g,changeDirByLevel:h}}};const fn=(0,Gl.Z)(gn,[["render",eo],["__scopeId","data-v-47801fde"]]);var wn=fn;const yn=e=>((0,f.dD)("data-v-9f175588"),e=e(),(0,f.Cn)(),e),hn={class:"kk-flex"},kn={class:"no-select nowrap form-width"},_n=yn((()=>(0,f._)("div",{class:"no-select nowrap",style:{"background-color":"#f3f4f4","margin-right":"8px"}},"U",-1))),bn=yn((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),xn={class:"kk-flex"},Cn={class:"no-select nowrap form-width",style:{"margin-right":"2px"}},Dn=yn((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Sn=yn((()=>(0,f._)("div",{class:"kk-border"},null,-1))),Wn={class:"kk-flex",style:{margin:"7px 0"}},zn=yn((()=>(0,f._)("div",{class:"no-select nowrap"},"Workflow",-1))),In=yn((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Tn={"element-loading-text":"Loading...",style:{width:"100%",height:"30vh"}},Vn={style:{display:"flex"}},Fn=yn((()=>(0,f._)("div",{style:{flex:"1"}},null,-1)));function $n(e,l,t,a,o,i){const s=(0,f.up)("CollectionTag"),n=(0,f.up)("el-icon"),r=(0,f.up)("el-input"),u=(0,f.up)("Upload"),d=(0,f.up)("el-button"),c=(0,f.up)("el-upload"),p=(0,f.up)("EditPen"),m=(0,f.up)("Download"),v=(0,f.up)("Refresh"),g=(0,f.up)("el-tooltip"),w=(0,f.up)("DocumentDelete"),h=(0,f.up)("Finished"),k=(0,f.up)("AceEditor"),_=(0,f.up)("el-dialog"),b=(0,f.Q2)("loading"),x=(0,f.Q2)("resizable");return(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",null,[(0,f.Wm)(_,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[5]||(l[5]=e=>a.DialogVisible=e),"before-close":a.closeDialog,"destroy-on-close":"",width:550,title:e.$t("终端代码工作流"),modal:!1,"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-0","align-center":"",draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",null,[(0,f._)("div",hn,[(0,f._)("div",kn,(0,y.zw)(e.$t("名称"))+"：",1),_n,(0,f.Wm)(r,{size:"small",style:{width:"190px"},modelValue:a.userTCodeInfo.name,"onUpdate:modelValue":l[0]||(l[0]=e=>a.userTCodeInfo.name=e),class:"w-50 m-2",placeholder:e.$t("输入终端代码名称"),maxlength:"5",minlength:"1"},{prefix:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(s)])),_:1})])),_:1},8,["modelValue","placeholder"]),bn,(0,f._)("div",null,[(0,f.Wm)(c,{"show-file-list":!1,"with-credentials":!1,"http-request":a.importTCodes,multiple:!1},{default:(0,f.w5)((()=>[(0,f.Wm)(d,{size:"small",type:"primary"},{default:(0,f.w5)((()=>[(0,f.Wm)(n,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(u)])),_:1}),(0,f.Uk)(" "+(0,y.zw)(e.$t("导入")),1)])),_:1})])),_:1},8,["http-request"])])]),(0,f._)("div",xn,[(0,f._)("div",Cn,(0,y.zw)(e.$t("描述"))+"：",1),(0,f.Wm)(r,{size:"small",style:{width:"206px"},modelValue:a.userTCodeInfo.desc,"onUpdate:modelValue":l[1]||(l[1]=e=>a.userTCodeInfo.desc=e),class:"w-50 m-2",placeholder:e.$t("输入终端代码描述")},{prefix:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1})])),_:1},8,["modelValue","placeholder"]),Dn,(0,f._)("div",null,[(0,f.Wm)(d,{size:"small",type:"primary",onClick:a.exportTCodes},{default:(0,f.w5)((()=>[(0,f.Wm)(n,{class:"el-icon--left"},{default:(0,f.w5)((()=>[(0,f.Wm)(m)])),_:1}),(0,f.Uk)(" "+(0,y.zw)(e.$t("导出")),1)])),_:1},8,["onClick"])])]),Sn,(0,f._)("div",Wn,[zn,In,(0,f._)("div",{onClick:l[2]||(l[2]=e=>a.workflowTab(1)),style:{"font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,f.Wm)(g,{content:e.$t("默认模板"),placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(v)])),_:1})])),_:1},8,["content"])]),(0,f._)("div",{onClick:l[3]||(l[3]=e=>a.workflowTab(2)),style:{"font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,f.Wm)(g,{content:e.$t("清空"),placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(w)])),_:1})])),_:1},8,["content"])]),(0,f._)("div",{onClick:l[4]||(l[4]=e=>a.workflowTab(3)),style:{"font-size":"18px",cursor:"pointer","margin-left":"15px"}},[(0,f.Wm)(g,{content:e.$t("保存"),placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(n,null,{default:(0,f.w5)((()=>[(0,f.Wm)(h)])),_:1})])),_:1},8,["content"])])]),(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",Tn,[(0,f.Wm)(k,{ref:"userTCodeEditorRef",onHandleSave:a.handleSave},null,8,["onHandleSave"])])),[[b,a.loading]])]),(0,f._)("div",Vn,[Fn,(0,f.Wm)(d,{size:"small",type:"primary",onClick:a.confirm,style:{"margin-top":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])),_:1},8,["modelValue","before-close","title"])])),[[x,{minWidthRate:1,maxWidthRate:1.5}]])}var Un={name:"TCodeWorkflow",components:{AceEditor:Vi,CollectionTag:Fl.O$2,EditPen:Fl.qHu,Upload:Fl.gqx,Download:Fl.UWx,Refresh:Fl.hYj,Finished:Fl.qWi,DocumentDelete:Fl.jY0},setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(!1),o="const path = '/root/terminal';\nawait kkTerminal.write('cd ' + path, 1200);\nconst port = 3000;\nawait kkTerminal.write('lsof -ti :' + port, 1200);\nconst resultArr = kkTerminal.read();\nif(resultArr.length >= 2) {\n    const pid = resultArr[1];\n\tif(pid && /^\\d+$/.test(pid)) await kkTerminal.write('kill -9 ' + pid, 1200);\n}\nconst jar = 'kkTerminal.jar';\nawait kkTerminal.write('nohup java -jar ./' + jar + ' > ./out.log &', 1200);",i=(0,He.iH)(),s=(0,He.iH)({name:"",desc:""}),n=e=>{Io.setItem(ko["tcode-draft"],e),(0,Ee.z8)({message:El.global.t("保存成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})},r=e=>{i.value.setValue(e),i.value.resetHistory()},u=()=>{i.value.setLanguage("kk.js"),Io.getItem(ko["tcode-draft"])&&(i.value.setValue(Io.getItem(ko["tcode-draft"])),i.value.resetHistory())},d=e=>{const l=/^[A-Za-z0-9]+$/;return l.test(e)},c=e=>{const t=e.file,o=new FileReader;o.onload=()=>{try{const e=JSON.parse(o.result),t={};let a=0,i=0;for(const l in e)l&&l.length>=2&&l.length<=6&&("U"===l[0]||"u"===l[0])&&d(l)?(t[l.toUpperCase()]={desc:e[l].desc||"",workflow:e[l].workflow||"",status:"Not Active"},a++):((0,Ee.z8)({message:El.global.t("终端代码")+" "+l+" "+El.global.t("名称非法"),type:"error",grouping:!0}),i++);0==i?(l.emit("importTCodes",t),(0,Ee.z8)({message:El.global.t("导入成功"),type:"success",grouping:!0}),f()):0==a?(0,Ee.z8)({message:El.global.t("导入失败：无合法终端代码"),type:"error",grouping:!0}):(l.emit("importTCodes",t),(0,Ee.z8)({message:El.global.t("导入成功：")+a+El.global.t("个")+El.global.t("，导入失败：")+i+El.global.t("个"),type:"warning",grouping:!0}))}catch(e){(0,Ee.z8)({message:El.global.t("导入失败：json格式错误"),type:"error",grouping:!0})}finally{a.value=!1}},o.onerror=()=>{(0,Ee.z8)({message:El.global.t("导入失败：文件读取失败"),type:"error",grouping:!0}),a.value=!1},a.value=!0,o.readAsText(t)},p=()=>{l.emit("exportTCodes"),(0,Ee.z8)({message:El.global.t("导出成功"),type:"success",grouping:!0})},m=e=>{switch(e){case 1:Io.removeItem(ko["tcode-draft"]),r(o);break;case 2:Io.removeItem(ko["tcode-draft"]),r("");break;case 3:n(i.value.getValue());break}},v=()=>{if(!(s.value.name&&s.value.name.length>=1&&s.value.name.length<=5))return void(0,Ee.z8)({message:El.global.t("终端代码名称不能为空"),type:"error",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER});if(!d(s.value.name))return void(0,Ee.z8)({message:El.global.t("终端代码只能由字母和数字组成"),type:"error",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER});const e={};e["U"+s.value.name.toUpperCase()]={desc:s.value.desc,workflow:i.value.getValue(),status:"Not Active"},l.emit("importTCodes",e),(0,Ee.z8)({message:El.global.t("添加成功"),type:"success",grouping:!0}),Io.removeItem(ko["tcode-draft"]),f()},g=()=>{i.value&&i.value.reset(),a.value=!1,s.value.name="",s.value.desc="",t.value=!1},f=e=>{setTimeout((()=>{g()}),400),t.value=!1,e&&e()};return{DialogVisible:t,confirm:v,closeDialog:f,reset:g,userTCodeEditorRef:i,handleSave:n,initText:u,loading:a,userTCodeInfo:s,importTCodes:c,exportTCodes:p,setValue:r,workflowTab:m}}};const Rn=(0,Gl.Z)(Un,[["render",$n],["__scopeId","data-v-9f175588"]]);var Hn=Rn;const En=e=>((0,f.dD)("data-v-549fbac0"),e=e(),(0,f.Cn)(),e),Nn={class:"no-select"},On={class:"pane-body"},Kn={class:"kk-flex"},Ln=En((()=>(0,f._)("div",{style:{"background-color":"#f3f4f4"}},"F",-1))),An=En((()=>(0,f._)("div",{class:"kk-border"},null,-1))),Mn={class:"kk-flex tcode-item",style:{padding:"12px 10px"}},Pn={class:"kk-flex form-width"},jn={style:{"background-color":"#f3f4f4"}},Bn=En((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),qn={class:"ellipsis",style:{"margin-left":"10px"}},Gn={class:"pane-body"},Yn={class:"kk-flex"},Zn=En((()=>(0,f._)("div",{style:{"background-color":"#f3f4f4"}},"S",-1))),Jn=En((()=>(0,f._)("div",{class:"kk-border"},null,-1))),Xn={class:"kk-flex tcode-item",style:{padding:"12px 10px"}},Qn={class:"kk-flex form-width"},er={style:{"background-color":"#f3f4f4"}},lr=En((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),tr={class:"ellipsis",style:{"margin-left":"10px"}},ar={class:"pane-body"},or={class:"kk-flex",style:{"margin-bottom":"10px"}},ir=En((()=>(0,f._)("div",{style:{"margin-left":"10px"}},null,-1))),sr=En((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),nr={style:{width:"100%",height:"180px"}},rr={class:"kk-flex"},ur=En((()=>(0,f._)("div",{style:{"background-color":"#f3f4f4"}},"U",-1))),dr=En((()=>(0,f._)("div",{class:"kk-border"},null,-1))),cr={class:"kk-flex tcode-item",style:{padding:"12px 10px"}},pr={class:"kk-flex form-width"},mr={style:{"background-color":"#f3f4f4"}},vr=En((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),gr={class:"ellipsis",style:{"margin-left":"10px"}},fr=En((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),wr=En((()=>(0,f._)("div",{style:{"margin-left":"10px"}},null,-1))),yr={class:"kk-flex"},hr=En((()=>(0,f._)("div",{style:{"background-color":"#f3f4f4"}},"U",-1))),kr=En((()=>(0,f._)("div",{class:"kk-border"},null,-1))),_r=En((()=>(0,f._)("div",{style:{"margin-top":"20px"}},null,-1)));function br(e,l,t,a,o,i){const s=(0,f.up)("el-tab-pane"),n=(0,f.up)("ArrowLeft"),r=(0,f.up)("el-icon"),u=(0,f.up)("TCodeStatus"),d=(0,f.up)("el-tooltip"),c=(0,f.up)("Edit"),p=(0,f.up)("Delete"),m=(0,f.up)("View"),v=(0,f.up)("Finished"),g=(0,f.up)("AceEditor"),w=(0,f.up)("ToolTip"),h=(0,f.up)("ArrowRight"),k=(0,f.up)("NoData"),_=(0,f.up)("el-tabs"),b=(0,f.up)("el-dialog"),x=(0,f.Q2)("resizable");return(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",null,[(0,f.Wm)(b,{modelValue:a.DialogVisible,"onUpdate:modelValue":l[0]||(l[0]=e=>a.DialogVisible=e),"destroy-on-close":"",width:480,title:e.$t("终端代码中心"),modal:!1,"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-6","before-close":a.closeDialog,draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",Nn,[(0,f.Wm)(_,{stretch:"",type:"border-card"},{default:(0,f.w5)((()=>[(0,f.Wm)(s,{label:e.$t("功能")},{default:(0,f.w5)((()=>[(0,f._)("div",On,[(0,f._)("div",Kn,[(0,f._)("div",null,(0,y.zw)(e.$t("以"))+" ",1),Ln,(0,f._)("div",null," "+(0,y.zw)(e.$t("开头，用于执行通用功能")),1)]),An,((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.FuncTCode,((l,t)=>((0,f.wg)(),(0,f.iD)("div",{key:t},[(0,f._)("div",Mn,[(0,f._)("div",Pn,[(0,f._)("div",jn,(0,y.zw)(t),1),Bn]),(0,f._)("div",qn,(0,y.zw)(e.$t(l.desc)),1)])])))),128))])])),_:1},8,["label"]),(0,f.Wm)(s,{label:e.$t("系统")},{default:(0,f.w5)((()=>[(0,f._)("div",Gn,[(0,f._)("div",Yn,[(0,f._)("div",null,(0,y.zw)(e.$t("以"))+" ",1),Zn,(0,f._)("div",null," "+(0,y.zw)(e.$t("开头，用于访问系统模块")),1)]),Jn,((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.SysTCode,((l,t)=>((0,f.wg)(),(0,f.iD)("div",{key:t},[(0,f._)("div",Xn,[(0,f._)("div",Qn,[(0,f._)("div",er,(0,y.zw)(t),1),lr]),(0,f._)("div",tr,(0,y.zw)(e.$t(l.desc)),1)])])))),128))])])),_:1},8,["label"]),(0,f.Wm)(s,{label:e.$t("用户")},{default:(0,f.w5)((()=>[(0,f._)("div",ar,[a.userTCodes&&Object.keys(a.userTCodes).length>0?((0,f.wg)(),(0,f.iD)(f.HY,{key:0},[a.nowTCode&&a.nowTCode.length>=2&&a.nowTCode.length<=6?((0,f.wg)(),(0,f.iD)(f.HY,{key:0},[(0,f._)("div",or,[(0,f.Wm)(r,{onClick:a.toOverview,style:{"margin-right":"10px",cursor:"pointer","font-size":"16px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1},8,["onClick"]),(0,f._)("div",null,(0,y.zw)(a.modifyTag+a.nowTCode),1),ir,(0,f.Wm)(d,{content:a.TCodeStatusEnum[a.userTCodes[a.nowTCode].status],placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(u,{style:{fontSize:"18px",cursor:"pointer"},status:a.userTCodes[a.nowTCode].status},null,8,["status"])])),_:1},8,["content"]),sr,a.mode?(0,f.kq)("",!0):((0,f.wg)(),(0,f.j4)(d,{key:0,content:e.$t("编辑"),placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{onClick:a.doModifyTCode,class:"editor-operator"},{default:(0,f.w5)((()=>[(0,f.Wm)(c)])),_:1},8,["onClick"])])),_:1},8,["content"])),a.mode?(0,f.kq)("",!0):((0,f.wg)(),(0,f.j4)(d,{key:1,content:e.$t("删除"),placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{onClick:a.confirmDeleteTCode,class:"editor-operator"},{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1},8,["onClick"])])),_:1},8,["content"])),a.mode?((0,f.wg)(),(0,f.j4)(d,{key:2,content:e.$t("只读"),placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{onClick:a.doOnlyRead,class:"editor-operator"},{default:(0,f.w5)((()=>[(0,f.Wm)(m)])),_:1},8,["onClick"])])),_:1},8,["content"])):(0,f.kq)("",!0),a.mode?((0,f.wg)(),(0,f.j4)(d,{key:3,content:e.$t("保存修改"),placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{onClick:a.doSaveTCode,class:"editor-operator"},{default:(0,f.w5)((()=>[(0,f.Wm)(v)])),_:1},8,["onClick"])])),_:1},8,["content"])):(0,f.kq)("",!0)]),(0,f._)("div",nr,[(0,f.Wm)(g,{ref:"userTCodeEditorRef",onHandleChange:a.handleChange,onHandleSave:a.doSaveTCode},null,8,["onHandleChange","onHandleSave"])])],64)):((0,f.wg)(),(0,f.iD)(f.HY,{key:1},[(0,f._)("div",rr,[(0,f._)("div",null,(0,y.zw)(e.$t("以"))+" ",1),ur,(0,f._)("div",null," "+(0,y.zw)(e.$t("开头，用于自定义工作流")),1)]),dr,((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.userTCodes,((e,l)=>((0,f.wg)(),(0,f.iD)("div",{key:l},[(0,f._)("div",cr,[(0,f._)("div",pr,[(0,f._)("div",mr,(0,y.zw)(l),1),vr]),(0,f.Wm)(w,{content:e.desc,delay:1e3},{content:(0,f.w5)((()=>[(0,f._)("div",gr,(0,y.zw)(e.desc),1)])),_:2},1032,["content"]),fr,wr,(0,f.Wm)(d,{content:a.TCodeStatusEnum[e.status],placement:"top"},{default:(0,f.w5)((()=>[(0,f.Wm)(u,{style:{fontSize:"18px",cursor:"pointer"},status:e.status},null,8,["status"])])),_:2},1032,["content"]),(0,f.Wm)(r,{onClick:e=>a.toWorkflow(l),style:{"margin-left":"15px",cursor:"pointer","font-size":"16px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(h)])),_:2},1032,["onClick"])])])))),128))],64))],64)):((0,f.wg)(),(0,f.iD)(f.HY,{key:1},[(0,f._)("div",yr,[(0,f._)("div",null,(0,y.zw)(e.$t("以"))+" ",1),hr,(0,f._)("div",null," "+(0,y.zw)(e.$t("开头，用于自定义工作流")),1)]),kr,(0,f.Wm)(k,{height:"160px"},{mySlot:(0,f.w5)((()=>[_r])),_:1})],64))])])),_:1},8,["label"])])),_:1})])])),_:1},8,["modelValue","title","before-close"])])),[[x,{minWidthRate:1,maxWidthRate:1.5}]])}function xr(e,l,t,a,o,i){const s=(0,f.up)("CircleCloseFilled"),n=(0,f.up)("el-icon"),r=(0,f.up)("WarningFilled"),u=(0,f.up)("SuccessFilled"),d=(0,f.up)("InfoFilled");return-2==a.statusType?((0,f.wg)(),(0,f.j4)(n,{key:0,style:(0,y.j5)(a.statusStyle)},{default:(0,f.w5)((()=>[(0,f.Wm)(s)])),_:1},8,["style"])):-1==a.statusType?((0,f.wg)(),(0,f.j4)(n,{key:1,style:(0,y.j5)(a.statusStyle)},{default:(0,f.w5)((()=>[(0,f.Wm)(r)])),_:1},8,["style"])):1==a.statusType?((0,f.wg)(),(0,f.j4)(n,{key:2,style:(0,y.j5)(a.statusStyle)},{default:(0,f.w5)((()=>[(0,f.Wm)(u)])),_:1},8,["style"])):((0,f.wg)(),(0,f.j4)(n,{key:3,style:(0,y.j5)(a.statusStyle)},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1},8,["style"]))}var Cr={name:"TCodeStatus",components:{SuccessFilled:Fl.c5o,WarningFilled:Fl.Rrw,CircleCloseFilled:Fl.Tw$,InfoFilled:Fl.cEj},props:{status:{type:String,default:"success"},style:{type:Object,default:()=>{}}},setup(e){const l={"Compile Error":-2,"Execute Interrupt":-1,"Not Active":0,"Execute Success":1},t=["#f56c6c","#e6a23c","#909399","#67c23a"],a=(0,f.Fl)((()=>l[e.status]||0)),o=(0,f.Fl)((()=>({fontSize:"16px",...e.style,color:t[(l[e.status]||0)+2]})));return{statusStyle:o,statusType:a}}};const Dr=(0,Gl.Z)(Cr,[["render",xr]]);var Sr=Dr,Wr={name:"TCodeCenter",components:{ToolTip:ht,NoData:Zl,TCodeStatus:Sr,AceEditor:Vi,ArrowRight:Fl.olP,ArrowLeft:Fl.XdH,Edit:Fl.I8b,View:Fl.G7x,Finished:Fl.qWi,Delete:Fl.HG3},setup(e,l){const t=(0,He.iH)(!1),a=(0,He.iH)(""),o=(0,He.iH)({}),i=(0,He.iH)(""),s=(0,He.iH)(!1),n=e=>{i.value=e,s.value=!1,setTimeout((()=>{d(!0)}),1)},r=()=>{s.value=!1,i.value="",a.value=""},u=(0,He.iH)(),d=e=>{u.value.setLanguage("kk.js"),u.value.setValue(JSON.parse(m(Io.getItem(ko["tcodes"])))[i.value].workflow||""),u.value.resetHistory(),u.value.setReadOnly(e),a.value=""},c=()=>{s.value=!0,d(!1)},p=()=>{s.value=!1,d(!0)},v=()=>{"*"==a.value&&(l.emit("handleSaveTCode",i.value,u.value.getValue()),p(),(0,Ee.z8)({message:El.global.t("修改成功"),type:"success",grouping:!0}),a.value="")},g=()=>{Nl(El.global.t("提示"),El.global.t("确定删除此终端代码吗?"),f)},f=()=>{l.emit("handleDeleteTCode",i.value),(0,Ee.z8)({message:El.global.t("删除成功"),type:"success",grouping:!0}),r()},w=()=>{a.value="*"},y=()=>{u.value&&u.value.reset(),s.value=!1,i.value="",a.value="",t.value=!1},h=e=>{setTimeout((()=>{y()}),400),t.value=!1,e&&e()};return{DialogVisible:t,FuncTCode:$o,SysTCode:Uo,TCodeStatusEnum:Ao,nowTCode:i,toWorkflow:n,toOverview:r,userTCodes:o,userTCodeEditorRef:u,initTCodeEditor:d,mode:s,doModifyTCode:c,doOnlyRead:p,doSaveTCode:v,confirmDeleteTCode:g,doDeleteTCode:f,handleChange:w,modifyTag:a,reset:y,closeDialog:h}}};const zr=(0,Gl.Z)(Wr,[["render",br],["__scopeId","data-v-549fbac0"]]);var Ir=zr;const Tr=e=>((0,f.dD)("data-v-66bfc5fc"),e=e(),(0,f.Cn)(),e),Vr={class:"no-select"},Fr={class:"kk-flex"},$r=Tr((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Ur=Tr((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Rr=Tr((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),Hr={class:"kk-flex"},Er=Tr((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Nr=Tr((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Or=Tr((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),Kr={style:{display:"flex","border-top":"1px solid #f1f2f4"}},Lr=Tr((()=>(0,f._)("div",{style:{flex:"1"}},null,-1)));function Ar(e,l,t,a,o,i){const s=(0,f.up)("el-radio"),n=(0,f.up)("el-radio-group"),r=(0,f.up)("el-input-number"),u=(0,f.up)("el-button"),d=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(d,{modelValue:a.computedDialogVisible,"onUpdate:modelValue":l[2]||(l[2]=e=>a.computedDialogVisible=e),"before-close":a.closeDialog,width:e.$t("240"),modal:!1,title:e.$t("协作"),"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-0",draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",Vr,[(0,f._)("div",Fr,[(0,f._)("div",null,(0,y.zw)(e.$t("编辑权限"))+"：",1),$r,(0,f.Wm)(n,{modelValue:a.isReadonly,"onUpdate:modelValue":l[0]||(l[0]=e=>a.isReadonly=e),class:"ml-4"},{default:(0,f.w5)((()=>[(0,f.Wm)(s,{label:!1,size:"large"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("是")),1)])),_:1}),(0,f.Wm)(s,{label:!0,size:"large"},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("否")),1)])),_:1})])),_:1},8,["modelValue"]),Ur]),Rr,(0,f._)("div",Hr,[(0,f._)("div",null,(0,y.zw)(e.$t("人数上限"))+"：",1),Er,(0,f._)("div",null,[(0,f.Wm)(r,{style:{width:"80px"},size:"small",modelValue:a.maxHeadCount,"onUpdate:modelValue":l[1]||(l[1]=e=>a.maxHeadCount=e),min:1,max:6,step:"1","step-strictly":!0},null,8,["modelValue"])]),Nr]),Or,(0,f._)("div",Kr,[Lr,(0,f.Wm)(u,{size:"small",type:"primary",onClick:a.confirm,style:{"margin-top":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["onClick"])])])])),_:1},8,["modelValue","before-close","width","title"])}var Mr={name:"CooperateGen",props:["sshKey","advance"],setup(e,l){const t=(0,He.iH)(!1),a=(0,f.Fl)((()=>t.value&&e.advance)),i=(0,He.iH)(!0),s=(0,He.iH)(6),{toClipboard:n}=(0,Re.Z)(),r=async()=>{const t=s.value;o().ajax({url:Pe+"/cooperate/key",type:"get",data:{time:(new Date).getTime(),sshKey:e.sshKey,readOnly:i.value,maxHeadCount:t},async success(e){if("success"===e.status){const a=_t()+"?cooperate="+e.data;await n(a),(0,Ee.z8)({message:El.global.t("协作链接已复制"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER}),l.emit("handleCooperate",t),d()}else(0,Ee.z8)({message:El.global.t("协作Key生成失败"),type:e.status,grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})}})},u=()=>{i.value=!0,s.value=6,t.value=!1},d=e=>{setTimeout((()=>{u()}),400),t.value=!1,e&&e()};return{computedDialogVisible:a,DialogVisible:t,confirm:r,closeDialog:d,reset:u,isReadonly:i,maxHeadCount:s}}};const Pr=(0,Gl.Z)(Mr,[["render",Ar],["__scopeId","data-v-66bfc5fc"]]);var jr=Pr;const Br=e=>((0,f.dD)("data-v-65b08514"),e=e(),(0,f.Cn)(),e),qr={class:"no-select"},Gr={class:"kk-flex",style:{height:"200px"}},Yr=Br((()=>(0,f._)("div",{style:{"margin-left":"5px"}},null,-1))),Zr={class:"kk-flex-column"},Jr=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),Xr=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),Qr=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),eu={key:0},lu={key:1},tu={key:2},au=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),ou=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),iu={class:"kk-flex-column"},su=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),nu=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),ru=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),uu=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),du=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),cu={class:"kk-flex-column"},pu=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),mu=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),vu=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),gu=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),fu=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),wu={class:"kk-flex-column"},yu=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),hu=Br((()=>(0,f._)("div",null,"/",-1))),ku=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),_u=Br((()=>(0,f._)("div",{style:{"margin-top":"10px"}},null,-1))),bu=Br((()=>(0,f._)("div",{style:{flex:"1"}},null,-1))),xu=Br((()=>(0,f._)("div",{style:{"margin-left":"5px"}},null,-1))),Cu={key:1},Du={style:{position:"relative"}},Su={style:{position:"absolute",top:"0",right:"0"}},Wu={class:"a-link no-select"},zu={style:{position:"absolute",top:"0",left:"0"}},Iu={class:"kk-flex"},Tu={class:"kk-flex",style:{color:"#5a6fc0"}},Vu=Br((()=>(0,f._)("div",{style:{"margin-left":"10px"}},null,-1))),Fu={class:"kk-flex",style:{color:"#9eca7f"}},$u={key:0},Uu={style:{position:"relative"}},Ru={style:{position:"absolute",top:"0",right:"0"}},Hu={class:"a-link no-select"},Eu={style:{position:"absolute",top:"0",left:"0"}},Nu={class:"kk-flex"},Ou={class:"kk-flex",style:{color:"#5a6fc0"}},Ku=Br((()=>(0,f._)("div",{style:{"margin-left":"10px"}},null,-1))),Lu={class:"kk-flex",style:{color:"#9eca7f"}},Au={key:0};function Mu(e,l,t,a,o,i){const s=(0,f.up)("el-progress"),n=(0,f.up)("el-tab-pane"),r=(0,f.up)("el-table-column"),u=(0,f.up)("el-table"),d=(0,f.up)("NoData"),c=(0,f.up)("EChart"),p=(0,f.up)("arrow-down"),m=(0,f.up)("el-icon"),v=(0,f.up)("el-dropdown-item"),w=(0,f.up)("el-dropdown-menu"),h=(0,f.up)("el-dropdown"),k=(0,f.up)("SortUp"),_=(0,f.up)("SortDown"),b=(0,f.up)("el-tabs"),x=(0,f.up)("el-dialog");return(0,f.wg)(),(0,f.j4)(x,{modelValue:a.computedDialogVisible,"onUpdate:modelValue":l[0]||(l[0]=e=>a.computedDialogVisible=e),"destroy-on-close":"",width:720,title:e.$t("监控"),modal:!1,"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-6","before-close":a.closeDialog,draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",qr,[(0,f.Wm)(b,{stretch:"",type:"border-card",onTabClick:a.handleTabClick},{default:(0,f.w5)((()=>[(0,f.Wm)(n,{label:e.$t("概览")},{default:(0,f.w5)((()=>[(0,f._)("div",Gr,[Yr,(0,f._)("div",Zr,[Jr,(0,f._)("div",null,(0,y.zw)(e.$t("负载")),1),Xr,(0,f.Wm)(s,{color:i.calcStatus(a.statusInfo.overview.load),type:"circle",percentage:a.statusInfo.overview.load},null,8,["color","percentage"]),Qr,a.statusInfo.overview.load<33.4?((0,f.wg)(),(0,f.iD)("div",eu,(0,y.zw)(e.$t("运行流畅")),1)):a.statusInfo.overview.load<66.7?((0,f.wg)(),(0,f.iD)("div",lu,(0,y.zw)(e.$t("运行缓慢")),1)):((0,f.wg)(),(0,f.iD)("div",tu,(0,y.zw)(e.$t("运行堵塞")),1)),au]),ou,(0,f._)("div",iu,[su,(0,f._)("div",null,(0,y.zw)(e.$t("CPU使用率")),1),nu,(0,f.Wm)(s,{color:i.calcStatus(a.statusInfo.overview.cpu),type:"circle",percentage:a.statusInfo.overview.cpu},null,8,["color","percentage"]),ru,(0,f._)("div",null,(0,y.zw)(a.statusInfo.overview.core)+" "+(0,y.zw)(e.$t("核心")),1),uu]),du,(0,f._)("div",cu,[pu,(0,f._)("div",null,(0,y.zw)(e.$t("内存使用率")),1),mu,(0,f.Wm)(s,{color:i.calcStatus(100*a.statusInfo.overview.usedMemory/a.statusInfo.overview.totalMemory),type:"circle",percentage:i.calcNumber(100*a.statusInfo.overview.usedMemory/a.statusInfo.overview.totalMemory)},null,8,["color","percentage"]),vu,(0,f._)("div",null,(0,y.zw)(a.statusInfo.overview.usedMemory)+" / "+(0,y.zw)(a.statusInfo.overview.totalMemory)+" (MB)",1),gu]),fu,(0,f._)("div",wu,[yu,hu,ku,(0,f.Wm)(s,{color:i.calcStatus(100*a.statusInfo.overview.usedRoot/a.statusInfo.overview.totalRoot),type:"circle",percentage:i.calcNumber(100*a.statusInfo.overview.usedRoot/a.statusInfo.overview.totalRoot)},null,8,["color","percentage"]),_u,(0,f._)("div",null,(0,y.zw)(i.calcNumber(a.statusInfo.overview.usedRoot/1024,2))+"G / "+(0,y.zw)(i.calcNumber(a.statusInfo.overview.totalRoot/1024,2))+"G",1),bu]),xu])])),_:1},8,["label"]),(0,f.Wm)(n,{label:e.$t("Top进程")},{default:(0,f.w5)((()=>[a.statusInfo.processes.length>0?((0,f.wg)(),(0,f.j4)(u,{key:0,onCellDblclick:a.tableDataCopy,style:{height:"200px",width:"100%"},data:a.statusInfo.processes,border:"",stripe:""},{default:(0,f.w5)((()=>[(0,f.Wm)(r,{prop:"pid",label:"PID",width:"80"}),(0,f.Wm)(r,{prop:"user",label:"User",width:"100"}),(0,f.Wm)(r,{prop:"cpu",label:"%CPU",width:"100"}),(0,f.Wm)(r,{prop:"mem",label:"%MEM",width:"100"}),(0,f.Wm)(r,{prop:"cmd",label:"Command"})])),_:1},8,["onCellDblclick","data"])):((0,f.wg)(),(0,f.iD)("div",Cu,[(0,f.Wm)(d,{height:"200px"})]))])),_:1},8,["label"]),(0,f.Wm)(n,{label:e.$t("网络")},{default:(0,f.w5)((()=>[(0,f._)("div",Du,[(0,f.wy)((0,f.Wm)(c,{style:{width:"650px",height:"200px"},ref:"networkEChartRef",legend:[e.$t("上行"),e.$t("下行")],yName:"KB/s"},null,8,["legend"]),[[g.F8,a.statusInfo.time.length>1]]),(0,f.wy)((0,f._)("div",Su,[(0,f.Wm)(h,{size:"small",style:{"margin-top":"2px","margin-right":"25px"},"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(w,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.statusInfo.network,((e,l)=>((0,f.wg)(),(0,f.j4)(v,{key:e,class:"no-select",onClick:e=>{a.selectedNetwork=l,a.updateNetworkData()}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(l),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",Wu,[(0,f.Uk)((0,y.zw)(a.selectedNetwork),1),(0,f.Wm)(m,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1})])])),_:1})],512),[[g.F8,a.statusInfo.time.length>1]]),(0,f.wy)((0,f._)("div",zu,[(0,f._)("div",Iu,[(0,f._)("div",Tu,[(0,f.Wm)(m,null,{default:(0,f.w5)((()=>[(0,f.Wm)(k)])),_:1}),(0,f._)("div",null,(0,y.zw)((a.networkSeries[0].data[a.networkSeries[0].data.length-1]||0)+"K"),1)]),Vu,(0,f._)("div",Fu,[(0,f.Wm)(m,null,{default:(0,f.w5)((()=>[(0,f.Wm)(_)])),_:1}),(0,f._)("div",null,(0,y.zw)((a.networkSeries[1].data[a.networkSeries[1].data.length-1]||0)+"K"),1)])])],512),[[g.F8,a.statusInfo.time.length>1]])]),a.statusInfo.time.length<=1?((0,f.wg)(),(0,f.iD)("div",$u,[(0,f.Wm)(d,{height:"200px"})])):(0,f.kq)("",!0)])),_:1},8,["label"]),(0,f.Wm)(n,{label:e.$t("磁盘")},{default:(0,f.w5)((()=>[(0,f._)("div",Uu,[(0,f.wy)((0,f.Wm)(c,{style:{width:"650px",height:"200px"},ref:"diskEChartRef",legend:[e.$t("读"),e.$t("写")],yName:"KB/s"},null,8,["legend"]),[[g.F8,a.statusInfo.time.length>1]]),(0,f.wy)((0,f._)("div",Ru,[(0,f.Wm)(h,{size:"small",style:{"margin-top":"2px","margin-right":"25px"},"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(w,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.statusInfo.disk,((e,l)=>((0,f.wg)(),(0,f.j4)(v,{key:e,class:"no-select",onClick:e=>{a.selectedDisk=l,a.updateDiskData()}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(l),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",Hu,[(0,f.Uk)((0,y.zw)(a.selectedDisk),1),(0,f.Wm)(m,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(p)])),_:1})])])),_:1})],512),[[g.F8,a.statusInfo.time.length>1]]),(0,f.wy)((0,f._)("div",Eu,[(0,f._)("div",Nu,[(0,f._)("div",Ou,[(0,f.Wm)(m,null,{default:(0,f.w5)((()=>[(0,f.Wm)(k)])),_:1}),(0,f._)("div",null,(0,y.zw)((a.diskSeries[0].data[a.diskSeries[0].data.length-1]||0)+"K"),1)]),Ku,(0,f._)("div",Lu,[(0,f.Wm)(m,null,{default:(0,f.w5)((()=>[(0,f.Wm)(_)])),_:1}),(0,f._)("div",null,(0,y.zw)((a.diskSeries[1].data[a.diskSeries[1].data.length-1]||0)+"K"),1)])])],512),[[g.F8,a.statusInfo.time.length>1]])]),a.statusInfo.time.length<=1?((0,f.wg)(),(0,f.iD)("div",Au,[(0,f.Wm)(d,{height:"200px"})])):(0,f.kq)("",!0)])),_:1},8,["label"])])),_:1},8,["onTabClick"])])])),_:1},8,["modelValue","title","before-close"])}const Pu=["success","warning","danger"],ju=(e,l)=>{if(0===l)return Pu[2];const t=e/l;return t<.34?Pu[0]:t<.67?Pu[1]:Pu[2]},Bu=["#5fcb71","#dca550","#eb5851"],qu=e=>{const l=Gu(e);return l<33.4?Bu[0]:l<66.7?Bu[1]:Bu[2]},Gu=(e,l=1)=>parseFloat(Number(e).toFixed(l)),Yu={"element-loading-text":"Loading...",ref:"eChartRef"};function Zu(e,l,t,a,o,i){const s=(0,f.Q2)("loading");return(0,f.wy)(((0,f.wg)(),(0,f.iD)("div",Yu,null,512)),[[s,a.loading]])}var Ju=t(8313),Xu={name:"EChart",props:["legend","yName"],setup(e){const l=(0,He.iH)(!0),t=(0,He.iH)(!1),a=(0,He.iH)(),o={title:{text:""},tooltip:{trigger:"axis"},legend:{data:e.legend},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{name:e.yName,type:"value"},series:[]};let i=null;const s=(e,l)=>{o.xAxis.data=e,o.series=l,i&&(t.value=!1,i.setOption(o))};return(0,f.bv)((()=>{i=Ju.S1(a.value),i.setOption(o),i.resize(),i.on("finished",(function(){t.value=!0,l.value=!1}))})),{eChartRef:a,update:s,loading:l,isFinished:t}}};const Qu=(0,Gl.Z)(Xu,[["render",Zu]]);var ed=Qu,ld={name:"StatusMonitor",methods:{calcNumber:Gu,calcStatus:qu,calcTime:Ds},components:{EChart:ed,NoData:Zl,ArrowDown:Fl.K5e,SortUp:Fl.Ncu,SortDown:Fl.laI},props:["sshKey","advance"],setup(e){const{toClipboard:l}=(0,Re.Z)(),t=(0,He.iH)(!1),a=(0,f.Fl)((()=>t.value&&e.advance)),i={overview:{load:0,cpu:0,core:0,usedMemory:0,totalMemory:1,usedRoot:0,totalRoot:1},processes:[],network:{},disk:{},time:[]},s=(0,He.iH)({...i}),n=(0,He.iH)("all"),r=(0,He.iH)("all"),u=()=>{o().ajax({url:Pe+"/monitor",type:"post",data:{sshKey:e.sshKey},success(e){if("success"===e.status){const l=e.data.split("^"),t=l[0].split("@").map((e=>Gu(e))),a=l[1].split("$"),o=l[2].split("$"),i=l[3].split("$"),u=Number(l[4]),d={...s.value.network};for(let e=0;e<o.length;e++){const l=o[e].split("@"),t=l[0].substring(0,l[0].length-1);if(!d[t]){d[t]=[];for(let e=0;e<s.value.time.length;e++)d[t].push({totalUp:Number(l[1]),totalDown:Number(l[2])})}d[t].push({totalUp:Number(l[1]),totalDown:Number(l[2])})}d[n.value]||(n.value="all");const p={...s.value.disk};for(let e=0;e<i.length;e++){const l=i[e].split("@"),t=l[0];if(!p[t]){p[t]=[];for(let e=0;e<s.value.time.length;e++)p[t].push({totalRead:Number(l[1]),totalWrite:Number(l[2])})}p[t].push({totalRead:Number(l[1]),totalWrite:Number(l[2])})}p[r.value]||(r.value="all");const v=s.value.time;v.push(u),s.value={overview:{load:t[0],cpu:t[1],core:t[2],usedMemory:t[3],totalMemory:t[4],usedRoot:t[5],totalRoot:t[6]},processes:a.map((e=>{const l=e.split("@");return{pid:l[0],user:l[1],cpu:l[2],mem:l[3],cmd:l[4]}})),network:d,disk:p,time:v},c(),m()}}})},d=(0,f.Fl)((()=>{const e=s.value.time,l=s.value.network[n.value],t=l?l.map((e=>e.totalUp)):[],a=l?l.map((e=>e.totalDown)):[];return[{name:El.global.t("上行"),type:"line",data:t.slice(1).map(((l,a)=>Gu(1e3*Math.max(0,l-t[a])/(1024*(e[a+1]-e[a])),3)))},{name:El.global.t("下行"),type:"line",data:a.slice(1).map(((l,t)=>Gu(1e3*Math.max(0,l-a[t])/(1024*(e[t+1]-e[t])),3)))}]})),c=()=>{if(v.value){const e=s.value.time;v.value.update(e.slice(1).map(((l,t)=>Ds(Math.floor((l+e[t])/2)))),d.value)}},p=(0,f.Fl)((()=>{const e=s.value.time,l=s.value.disk[r.value],t=l?l.map((e=>e.totalRead)):[],a=l?l.map((e=>e.totalWrite)):[];return[{name:El.global.t("读"),type:"line",data:t.slice(1).map(((l,a)=>Gu(1e3*Math.max(0,l-t[a])/(2*(e[a+1]-e[a])),3)))},{name:El.global.t("写"),type:"line",data:a.slice(1).map(((l,t)=>Gu(1e3*Math.max(0,l-a[t])/(2*(e[t+1]-e[t])),3)))}]})),m=()=>{if(g.value){const e=s.value.time;g.value.update(e.slice(1).map(((l,t)=>Ds(Math.floor((l+e[t])/2)))),p.value)}},v=(0,He.iH)(),g=(0,He.iH)(),w=(0,He.iH)(null),y=6e3,h=()=>{null==w.value&&(setTimeout((()=>{u()}),1),w.value=setInterval((()=>{u()}),y))},k=()=>{null!=w.value&&(clearInterval(w.value),w.value=null)},_=e=>{2!=e.index||v.value.isFinished||(v.value.loading=!0),3!=e.index||g.value.isFinished||(g.value.loading=!0)},b=async(e,t)=>{e[t.property]&&(await l(e[t.property]),(0,Ee.z8)({message:El.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER}))},x=(e=!1)=>{e&&(s.value={...i},n.value="all",r.value="all"),t.value=!1},C=e=>{setTimeout((()=>{x()}),400),t.value=!1,e&&e()},D=e=>{setTimeout((()=>{x(!0)}),400),k(),t.value=!1,e&&e()};return{computedDialogVisible:a,DialogVisible:t,reset:x,closeDialog:C,deepCloseDialog:D,doMonitor:h,stopMonitor:k,statusInfo:s,networkEChartRef:v,diskEChartRef:g,selectedNetwork:n,selectedDisk:r,updateNetworkData:c,networkSeries:d,updateDiskData:m,diskSeries:p,handleTabClick:_,tableDataCopy:b}}};const td=(0,Gl.Z)(ld,[["render",Mu],["__scopeId","data-v-65b08514"]]);var ad=td,od=t.p+"img/no_docker.58a9151c.png",id=t.p+"img/app_store.273d535d.svg";const sd={class:"no-select"},nd={key:0,class:"kk-flex-column",style:{height:"240px"}},rd=(0,f._)("div",{style:{flex:"1"}},null,-1),ud=(0,f._)("div",null,[(0,f._)("img",{style:{height:"160px"},src:od,alt:"docker"})],-1),dd={class:"kk-flex",style:{"margin-top":"25px"}},cd={style:{"font-size":"large"}},pd=(0,f._)("div",{style:{flex:"1"}},null,-1),md={key:1},vd={key:0,id:"docker-appstore",style:{height:"240px","overflow-y":"scroll"}},gd={class:"kk-flex"},fd=(0,f._)("span",null,[(0,f._)("img",{src:id,alt:"appstore",style:{height:"32px"}})],-1),wd={style:{"margin-left":"15px","font-size":"22px","font-weight":"bolder"}},yd=(0,f._)("div",{style:{flex:"1"}},null,-1),hd={class:"a-link no-select"},kd=(0,f._)("div",{class:"kk-border"},null,-1),_d={key:0,class:"card-container"},bd={class:"card-header"},xd={class:"kk-flex"},Cd={class:"app-title"},Dd=(0,f._)("div",{style:{flex:"1"}},null,-1),Sd={class:"kk-flex"},Wd={class:"app-img-box kk-flex"},zd=(0,f._)("div",{style:{flex:"1"}},null,-1),Id=["src","alt"],Td=(0,f._)("div",{style:{flex:"1"}},null,-1),Vd={key:1},Fd={key:1,style:{height:"240px","overflow-y":"scroll"}},$d={class:"kk-flex"},Ud={style:{"margin-left":"8px"}},Rd=(0,f._)("div",{class:"kk-border"},null,-1),Hd={style:{padding:"0 120px"}},Ed={class:"kk-flex deploy-item"},Nd={class:"form-width"},Od={class:"kk-flex",style:{flex:"1"}},Kd=(0,f._)("div",{style:{margin:"0 5px"}},":",-1),Ld={class:"kk-flex deploy-item"},Ad={class:"form-width"},Md={style:{flex:"1"}},Pd={class:"kk-flex deploy-item"},jd={class:"form-width"},Bd={style:{flex:"1"}},qd={class:"kk-flex deploy-item"},Gd={class:"form-width"},Yd={style:{flex:"1"}},Zd={class:"kk-flex deploy-item"},Jd={class:"form-width"},Xd={style:{flex:"1"}},Qd={class:"kk-flex deploy-item"},ec={class:"form-width"},lc={style:{flex:"1"}},tc=(0,f._)("div",{style:{height:"10px"}},null,-1),ac={class:"kk-flex deploy-item"},oc=(0,f._)("div",{style:{flex:"1"}},null,-1),ic=(0,f._)("div",{style:{flex:"1"}},null,-1),sc=(0,f._)("div",{style:{flex:"1"}},null,-1),nc={key:1},rc={key:2,class:"kk-flex",style:{height:"35px","margin-top":"5px"}},uc={class:"a-link no-select"},dc={key:1},cc={key:2,class:"kk-flex",style:{height:"35px","margin-top":"5px"}},pc={class:"a-link no-select"},mc={key:1},vc={key:2,class:"kk-flex",style:{height:"35px","margin-top":"5px"}},gc={class:"a-link no-select"},fc={key:1},wc={key:2,class:"kk-flex",style:{height:"35px","margin-top":"5px"}},yc={class:"a-link no-select"};function hc(e,l,t,a,o,i){const s=(0,f.up)("el-button"),n=(0,f.up)("Search"),r=(0,f.up)("el-icon"),u=(0,f.up)("el-input"),d=(0,f.up)("arrow-down"),c=(0,f.up)("el-dropdown-item"),p=(0,f.up)("el-dropdown-menu"),m=(0,f.up)("el-dropdown"),v=(0,f.up)("el-card"),g=(0,f.up)("NoData"),w=(0,f.up)("ArrowLeft"),h=(0,f.up)("el-tab-pane"),k=(0,f.up)("el-table-column"),_=(0,f.up)("el-table"),b=(0,f.up)("el-tabs"),x=(0,f.up)("el-dialog"),C=(0,f.Q2)("loading");return(0,f.wg)(),(0,f.j4)(x,{modelValue:a.computedDialogVisible,"onUpdate:modelValue":l[17]||(l[17]=e=>a.computedDialogVisible=e),"destroy-on-close":"",width:750,title:"Docker",modal:!1,"modal-class":"kk-dialog-class","header-class":"kk-header-class","body-class":"kk-body-class-6","before-close":a.closeDialog,draggable:""},{default:(0,f.w5)((()=>[(0,f._)("div",sd,[(0,f.wy)(((0,f.wg)(),(0,f.j4)(b,{stretch:"","element-loading-text":"Loading...",onTabClick:a.handleTabClick,type:"border-card"},{default:(0,f.w5)((()=>[(0,f.Wm)(h,{label:e.$t("部署")},{default:(0,f.w5)((()=>[a.noDocker?((0,f.wg)(),(0,f.iD)("div",nd,[rd,ud,(0,f._)("div",dd,[(0,f._)("div",cd,(0,y.zw)(e.$t("Docker未安装?")),1),(0,f._)("div",null,[(0,f.Wm)(s,{type:"primary",onClick:a.installDocker,style:{"margin-left":"15px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("安装")),1)])),_:1},8,["onClick"])])]),pd])):((0,f.wg)(),(0,f.iD)("div",md,[a.deployInfo.isShow?((0,f.wg)(),(0,f.iD)("div",Fd,[(0,f._)("div",$d,[(0,f.Wm)(r,{onClick:l[1]||(l[1]=e=>a.handleReset(!1)),style:{cursor:"pointer","font-size":"16px"}},{default:(0,f.w5)((()=>[(0,f.Wm)(w)])),_:1}),(0,f._)("div",Ud,(0,y.zw)(e.$t("返回")),1)]),Rd,(0,f._)("div",Hd,[(0,f._)("div",Ed,[(0,f._)("div",Nd,(0,y.zw)(e.$t("镜像")),1),(0,f._)("div",Od,[(0,f.Wm)(u,{style:{flex:"1"},modelValue:a.deployInfo.imageName,"onUpdate:modelValue":l[2]||(l[2]=e=>a.deployInfo.imageName=e),class:"w-50 m-2",placeholder:e.$t("镜像名称")},null,8,["modelValue","placeholder"]),Kd,(0,f.Wm)(u,{modelValue:a.deployInfo.imageVersion,"onUpdate:modelValue":l[3]||(l[3]=e=>a.deployInfo.imageVersion=e),style:{width:"80px"},class:"w-50 m-2",placeholder:e.$t("版本号")},null,8,["modelValue","placeholder"])])]),(0,f._)("div",Ld,[(0,f._)("div",Ad,(0,y.zw)(e.$t("容器")),1),(0,f._)("div",Md,[(0,f.Wm)(u,{modelValue:a.deployInfo.containerName,"onUpdate:modelValue":l[4]||(l[4]=e=>a.deployInfo.containerName=e),class:"w-50 m-2",placeholder:e.$t("容器名称")},null,8,["modelValue","placeholder"])])]),(0,f._)("div",Pd,[(0,f._)("div",jd,(0,y.zw)(e.$t("端口映射")),1),(0,f._)("div",Bd,[(0,f.Wm)(u,{modelValue:a.deployInfo.portMapping,"onUpdate:modelValue":l[5]||(l[5]=e=>a.deployInfo.portMapping=e),class:"w-50 m-2",placeholder:e.$t("每行一个，主机端口:容器端口"),type:"textarea"},null,8,["modelValue","placeholder"])])]),(0,f._)("div",qd,[(0,f._)("div",Gd,(0,y.zw)(e.$t("环境变量")),1),(0,f._)("div",Yd,[(0,f.Wm)(u,{modelValue:a.deployInfo.envVar,"onUpdate:modelValue":l[6]||(l[6]=e=>a.deployInfo.envVar=e),class:"w-50 m-2",placeholder:e.$t("每行一个，环境变量名=值"),type:"textarea"},null,8,["modelValue","placeholder"])])]),(0,f._)("div",Zd,[(0,f._)("div",Jd,(0,y.zw)(e.$t("数据卷挂载")),1),(0,f._)("div",Xd,[(0,f.Wm)(u,{modelValue:a.deployInfo.volumeMounting,"onUpdate:modelValue":l[7]||(l[7]=e=>a.deployInfo.volumeMounting=e),class:"w-50 m-2",placeholder:e.$t("每行一个，主机路径:容器路径"),type:"textarea"},null,8,["modelValue","placeholder"])])]),(0,f._)("div",Qd,[(0,f._)("div",ec,(0,y.zw)(e.$t("其它命令选项")),1),(0,f._)("div",lc,[(0,f.Wm)(u,{modelValue:a.deployInfo.paramOptions,"onUpdate:modelValue":l[8]||(l[8]=e=>a.deployInfo.paramOptions=e),class:"w-50 m-2",placeholder:e.$t("每行一个，-命令选项 值"),type:"textarea"},null,8,["modelValue","placeholder"])])]),tc,(0,f._)("div",ac,[oc,(0,f.Wm)(s,{disabled:!a.deployInfo.imageName,type:"primary",onClick:a.handleDeploy},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("部署")),1)])),_:1},8,["disabled","onClick"]),ic,(0,f.Wm)(s,{text:"",bg:"",onClick:l[9]||(l[9]=e=>a.handleReset(!0))},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("清空")),1)])),_:1}),sc])])])):((0,f.wg)(),(0,f.iD)("div",vd,[(0,f._)("div",gd,[fd,(0,f._)("div",wd,(0,y.zw)(e.$t("Docker应用商店")),1),yd,(0,f._)("div",null,[(0,f.Wm)(u,{modelValue:a.appSearch,"onUpdate:modelValue":l[0]||(l[0]=e=>a.appSearch=e),class:"w-50 m-2",placeholder:e.$t("搜索应用")},{suffix:(0,f.w5)((()=>[(0,f.Wm)(r,{class:"el-input__icon"},{default:(0,f.w5)((()=>[(0,f.Wm)(n)])),_:1})])),_:1},8,["modelValue","placeholder"])]),(0,f.Wm)(m,{style:{"margin-left":"20px"},"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(p,null,{default:(0,f.w5)((()=>[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.dockerAppTypes,((l,t)=>((0,f.wg)(),(0,f.j4)(c,{key:t,class:"no-select",onClick:e=>a.appType=t},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(l)),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",hd,[(0,f.Uk)((0,y.zw)(e.$t(a.dockerAppTypes[a.appType])),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])])),_:1})]),kd,a.dockerApps.length>0?((0,f.wg)(),(0,f.iD)("div",_d,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(a.dockerApps,((l,t)=>((0,f.wg)(),(0,f.iD)("div",{class:"card-item",key:t},[(0,f.Wm)(v,null,{header:(0,f.w5)((()=>[(0,f._)("div",bd,[(0,f._)("div",xd,[(0,f._)("span",Cd,(0,y.zw)(l.name),1),Dd,(0,f.Wm)(s,{size:"small",type:"primary",onClick:e=>a.handleAppGet(l.deployInfo)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("获取")),1)])),_:2},1032,["onClick"])])])])),default:(0,f.w5)((()=>[(0,f._)("div",Sd,[(0,f._)("div",null,[(0,f._)("div",Wd,[zd,(0,f._)("img",{src:l.img,alt:l.name},null,8,Id),Td])]),(0,f._)("div",null,(0,y.zw)(e.$t(l.desc)),1)])])),_:2},1024)])))),128))])):((0,f.wg)(),(0,f.iD)("div",Vd,[(0,f.Wm)(g,{height:"196px",msg:a.i18n.global.k("暂无应用")},null,8,["msg"])]))]))]))])),_:1},8,["label"]),(0,f.Wm)(h,{disabled:a.noDocker,label:e.$t("容器")},{default:(0,f.w5)((()=>[a.dockerInfo.container.length>0?((0,f.wg)(),(0,f.j4)(_,{key:0,onCellDblclick:a.tableDataCopy,style:{height:"200px",width:"100%"},data:a.dockerInfo.container,onSelectionChange:a.tableSelect,border:"",stripe:""},{default:(0,f.w5)((()=>[(0,f.Wm)(k,{"show-overflow-tooltip":"",type:"selection",selectable:e.selectable,width:"40"},null,8,["selectable"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"id",label:"ID",width:"130"}),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"name",label:e.$t("名称"),width:"120"},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"status",label:e.$t("状态"),width:"80"},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"image",label:e.$t("镜像"),width:"140"},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"port",label:e.$t("端口")},null,8,["label"])])),_:1},8,["onCellDblclick","data","onSelectionChange"])):((0,f.wg)(),(0,f.iD)("div",nc,[(0,f.Wm)(g,{height:"240px"})])),a.dockerInfo.container.length>0?((0,f.wg)(),(0,f.iD)("div",rc,[(0,f.Wm)(m,{"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(p,null,{default:(0,f.w5)((()=>[(0,f.Wm)(c,{class:"no-select",onClick:l[10]||(l[10]=e=>a.containerType=1)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(a.containerTypeArr[1])),1)])),_:1}),(0,f.Wm)(c,{class:"no-select",onClick:l[11]||(l[11]=e=>a.containerType=2)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(a.containerTypeArr[2])),1)])),_:1}),(0,f.Wm)(c,{class:"no-select",onClick:l[12]||(l[12]=e=>a.containerType=3)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(a.containerTypeArr[3])),1)])),_:1}),(0,f.Wm)(c,{class:"no-select",onClick:l[13]||(l[13]=e=>a.containerType=4)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(a.containerTypeArr[4])),1)])),_:1})])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",uc,[(0,f.Uk)((0,y.zw)(e.$t(a.containerTypeArr[a.containerType%a.containerTypeArr.length])),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])])),_:1}),(0,f.Wm)(s,{disabled:!(a.selectedItems.length>0&&0!==a.containerType),size:"small",type:"primary",onClick:a.operateConfirm,style:{"margin-left":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["disabled","onClick"])])):(0,f.kq)("",!0)])),_:1},8,["disabled","label"]),(0,f.Wm)(h,{disabled:a.noDocker,label:e.$t("镜像")},{default:(0,f.w5)((()=>[a.dockerInfo.image.length>0?((0,f.wg)(),(0,f.j4)(_,{key:0,onCellDblclick:a.tableDataCopy,style:{height:"200px",width:"100%"},data:a.dockerInfo.image,onSelectionChange:a.tableSelect,border:"",stripe:""},{default:(0,f.w5)((()=>[(0,f.Wm)(k,{type:"selection",selectable:e.selectable,width:"40"},null,8,["selectable"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"id",label:"ID",width:"130"}),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"repository",label:e.$t("仓库")},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"size",label:e.$t("大小"),width:"100"},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"createTime",label:e.$t("创建时间"),width:"140",sortable:""},null,8,["label"])])),_:1},8,["onCellDblclick","data","onSelectionChange"])):((0,f.wg)(),(0,f.iD)("div",dc,[(0,f.Wm)(g,{height:"240px"})])),a.dockerInfo.image.length>0?((0,f.wg)(),(0,f.iD)("div",cc,[(0,f.Wm)(m,{"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(p,null,{default:(0,f.w5)((()=>[(0,f.Wm)(c,{class:"no-select",onClick:l[14]||(l[14]=e=>a.deleteType=1)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(a.deleteTypeArr[1])),1)])),_:1})])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",pc,[(0,f.Uk)((0,y.zw)(e.$t(a.deleteTypeArr[a.deleteType%a.deleteTypeArr.length])),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])])),_:1}),(0,f.Wm)(s,{disabled:!(a.selectedItems.length>0&&0!==a.deleteType),size:"small",type:"primary",onClick:a.deleteConfirm,style:{"margin-left":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["disabled","onClick"])])):(0,f.kq)("",!0)])),_:1},8,["disabled","label"]),(0,f.Wm)(h,{disabled:a.noDocker,label:e.$t("网络")},{default:(0,f.w5)((()=>[a.dockerInfo.network.length>0?((0,f.wg)(),(0,f.j4)(_,{key:0,onCellDblclick:a.tableDataCopy,style:{height:"200px",width:"100%"},data:a.dockerInfo.network,onSelectionChange:a.tableSelect,border:"",stripe:""},{default:(0,f.w5)((()=>[(0,f.Wm)(k,{type:"selection",selectable:e.selectable,width:"40"},null,8,["selectable"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"name",label:e.$t("名称"),width:"140"},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"ip",label:"IP"}),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"gateway",label:e.$t("网关"),width:"120"},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"createTime",label:e.$t("创建时间"),width:"140",sortable:""},null,8,["label"])])),_:1},8,["onCellDblclick","data","onSelectionChange"])):((0,f.wg)(),(0,f.iD)("div",mc,[(0,f.Wm)(g,{height:"240px"})])),a.dockerInfo.network.length>0?((0,f.wg)(),(0,f.iD)("div",vc,[(0,f.Wm)(m,{"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(p,null,{default:(0,f.w5)((()=>[(0,f.Wm)(c,{class:"no-select",onClick:l[15]||(l[15]=e=>a.deleteType=2)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(a.deleteTypeArr[2])),1)])),_:1})])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",gc,[(0,f.Uk)((0,y.zw)(e.$t(a.deleteTypeArr[a.deleteType%a.deleteTypeArr.length])),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])])),_:1}),(0,f.Wm)(s,{disabled:!(a.selectedItems.length>0&&0!==a.deleteType),size:"small",type:"primary",onClick:a.deleteConfirm,style:{"margin-left":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["disabled","onClick"])])):(0,f.kq)("",!0)])),_:1},8,["disabled","label"]),(0,f.Wm)(h,{disabled:a.noDocker,label:e.$t("数据卷")},{default:(0,f.w5)((()=>[a.dockerInfo.volume.length>0?((0,f.wg)(),(0,f.j4)(_,{key:0,onCellDblclick:a.tableDataCopy,style:{height:"200px",width:"100%"},data:a.dockerInfo.volume,onSelectionChange:a.tableSelect,border:"",stripe:""},{default:(0,f.w5)((()=>[(0,f.Wm)(k,{type:"selection",selectable:e.selectable,width:"40"},null,8,["selectable"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"name",label:e.$t("名称"),width:"140"},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"mount",label:e.$t("挂载点")},null,8,["label"]),(0,f.Wm)(k,{"show-overflow-tooltip":"",prop:"createTime",label:e.$t("创建时间"),width:"140",sortable:""},null,8,["label"])])),_:1},8,["onCellDblclick","data","onSelectionChange"])):((0,f.wg)(),(0,f.iD)("div",fc,[(0,f.Wm)(g,{height:"240px"})])),a.dockerInfo.volume.length>0?((0,f.wg)(),(0,f.iD)("div",wc,[(0,f.Wm)(m,{"hide-timeout":"300"},{dropdown:(0,f.w5)((()=>[(0,f.Wm)(p,null,{default:(0,f.w5)((()=>[(0,f.Wm)(c,{class:"no-select",onClick:l[16]||(l[16]=e=>a.deleteType=3)},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t(a.deleteTypeArr[3])),1)])),_:1})])),_:1})])),default:(0,f.w5)((()=>[(0,f._)("span",yc,[(0,f.Uk)((0,y.zw)(e.$t(a.deleteTypeArr[a.deleteType%a.deleteTypeArr.length])),1),(0,f.Wm)(r,{class:"el-icon--right"},{default:(0,f.w5)((()=>[(0,f.Wm)(d)])),_:1})])])),_:1}),(0,f.Wm)(s,{disabled:!(a.selectedItems.length>0&&0!==a.deleteType),size:"small",type:"primary",onClick:a.deleteConfirm,style:{"margin-left":"10px"}},{default:(0,f.w5)((()=>[(0,f.Uk)((0,y.zw)(e.$t("确定")),1)])),_:1},8,["disabled","onClick"])])):(0,f.kq)("",!0)])),_:1},8,["disabled","label"])])),_:1},8,["onTabClick"])),[[C,a.loading]])])])),_:1},8,["modelValue","before-close"])}const kc=[El.global.k("全部"),El.global.k("实用工具"),El.global.k("开发&运维"),El.global.k("个人建站"),El.global.k("数据库"),El.global.k("网盘存储")],_c=t(2716),bc="./",xc=[{name:"Custom",desc:El.global.k("指定任意镜像进行应用部署"),type:0,img:_c(bc+"custom.svg"),deployInfo:{imageName:"",imageVersion:"",containerName:"",portMapping:"",envVar:"",volumeMounting:"",paramOptions:""}},{name:"kkTerminal",desc:El.global.k("kkTerminal是一个强大的Web SSH连接终端"),type:1,img:_c(bc+"kkTerminal.svg"),deployInfo:{imageName:"zyyzyykk/kkterminal",imageVersion:"latest",containerName:"kkTerminal",portMapping:"3000:3000",envVar:"TITLE=kkTerminal\nAESKEY="+Ye(16),volumeMounting:"",paramOptions:""}}];var Cc={name:"DockerBlock",components:{NoData:Zl,ArrowDown:Fl.K5e,ArrowLeft:Fl.XdH,Search:Fl.olm},props:["sshKey","advance"],setup(e,l){const{toClipboard:t}=(0,Re.Z)(),a=(0,He.iH)(!1),i=(0,f.Fl)((()=>a.value&&e.advance)),s=(0,He.iH)(!1),n=(0,He.iH)([]),r=e=>{n.value=e},u=(0,He.iH)(!0),d={container:[],image:[],network:[],volume:[]},c=(0,He.iH)({...d}),p=e=>{s.value=!0,o().ajax({url:Pe+"/docker/version",type:"post",data:{sshKey:e},success(e){"success"===e.status?(u.value=!1,v({index:0})):(u.value=!0,s.value=!1)}})},m=l=>{const t=(l||0)%4;o().ajax({url:Pe+"/docker/info",type:"post",data:{sshKey:e.sshKey,type:t},success(e){if("success"===e.status){u.value=!1;let l=c.value.container,a=c.value.image,o=c.value.network,i=c.value.volume;if(0==t){const t=e.data&&"null"!=e.data?e.data.split("$"):[];l=[];for(let e=0;e<t.length;e++){const a=t[e].split("@");l.push({id:a[0],name:a[1],status:a[2],image:a[3],port:a[4]})}}else if(1==t){const l=e.data&&"null"!=e.data?e.data.split("$"):[];a=[];for(let e=0;e<l.length;e++){const t=l[e].split("@");a.push({id:t[0],repository:t[1],size:t[2],createTime:t[3].split(" ")[0].substring(0,10)})}}else if(2==t){const l=e.data&&"null"!=e.data?e.data.split("$"):[];o=[];for(let e=0;e<l.length;e++){const t=l[e].split("@");o.push({name:t[0],ip:t[1],gateway:t[2],createTime:t[3].split(" ")[0].substring(0,10)})}}else if(3==t){const l=e.data&&"null"!=e.data?e.data.split("$"):[];i=[];for(let e=0;e<l.length;e++){const t=l[e].split("@");i.push({name:t[0],mount:t[1],createTime:t[2].split(" ")[0].substring(0,10)})}}c.value={container:l,image:a,network:o,volume:i}}s.value=!1}})},v=e=>{s.value=!0,n.value=[],g.value=0,w.value=0,m(e.index)},g=(0,He.iH)(0),w=(0,He.iH)(0),y=[El.global.k("选择批量操作"),El.global.k("启动容器"),El.global.k("停止容器"),El.global.k("重启容器"),El.global.k("删除容器")],h=[El.global.k("选择批量操作"),El.global.k("删除镜像"),El.global.k("删除网络"),El.global.k("删除数据卷")],k=()=>{s.value=!0;const l=g.value-1;o().ajax({url:Pe+"/docker/container",type:"post",data:{sshKey:e.sshKey,type:l,items:n.value.map((e=>e.id||e.name)).join(" ")},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),v({index:0}),n.value=[],s.value=!1}})},_=()=>{s.value=!0;const l=w.value;o().ajax({url:Pe+"/docker/delete",type:"post",data:{sshKey:e.sshKey,type:l,items:n.value.map((e=>e.id||e.name)).join(" ")},success(e){(0,Ee.z8)({message:e.info,type:e.status,grouping:!0}),v({index:l}),n.value=[],s.value=!1}})},b=()=>{Nl(El.global.t("提示"),El.global.t("确定进行此操作吗?"),k)},x=()=>{Nl(El.global.t("提示"),El.global.t("确定进行此操作吗?"),_)},C=()=>{(0,Ee.z8)({message:El.global.t("开始安装"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER}),l.emit("install","curl -fsSL https://get.docker.com -o get-docker.sh && sudo sh get-docker.sh\n"),H()},D=async(e,l)=>{"createTime"!==l.property&&e[l.property]&&(await t(e[l.property]),(0,Ee.z8)({message:El.global.t("复制成功"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER}))},S={isShow:!1,imageName:"",imageVersion:"",containerName:"",portMapping:"",envVar:"",volumeMounting:"",paramOptions:""},W=(0,He.iH)({...S}),z=e=>{W.value={...S,...e},W.value.containerName&&(W.value.containerName+="_"+Ye(4)),W.value.isShow=!0},I=(e=!0)=>{W.value={...S},W.value.isShow=e},T=()=>{let e="docker run -dit";W.value.containerName&&(e+=" --name "+W.value.containerName),W.value.portMapping&&(e+=W.value.portMapping.split("\n").filter((e=>e)).map((e=>` -p ${e}`)).join("")),W.value.envVar&&(e+=W.value.envVar.split("\n").filter((e=>e)).map((e=>` -e ${e}`)).join("")),W.value.volumeMounting&&(e+=W.value.volumeMounting.split("\n").filter((e=>e)).map((e=>` -v ${e}`)).join("")),W.value.paramOptions&&(e+=W.value.paramOptions.split("\n").filter((e=>e)).map((e=>` ${e}`)).join("")),e+=" --restart=unless-stopped",e+=" "+W.value.imageName+":",e+=W.value.imageVersion||"latest",e+="\n",(0,Ee.z8)({message:El.global.t("开始部署"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER}),I(!1),l.emit("deploy",e)},V=(0,He.iH)(""),F=(0,He.iH)(0),$=(0,f.Fl)((()=>xc.filter((e=>!(!e.name.toLowerCase().includes(V.value.toLowerCase())&&!El.global.t(e.desc).toLowerCase().includes(V.value.toLowerCase()))&&(0===F.value||e.type===F.value))))),U=(e=!1)=>{e&&(u.value=!0,c.value={...d},W.value={...S}),g.value=0,w.value=0,n.value=[],V.value="",F.value=0,s.value=!1,a.value=!1},R=e=>{setTimeout((()=>{U()}),400),a.value=!1,e&&e()},H=e=>{setTimeout((()=>{U(!0)}),400),a.value=!1,e&&e()};return{i18n:El,computedDialogVisible:i,DialogVisible:a,reset:U,closeDialog:R,deepCloseDialog:H,noDocker:u,getDockerVersion:p,dockerInfo:c,getDockerInfo:m,handleTabClick:v,loading:s,installDocker:C,tableSelect:r,containerType:g,deleteType:w,selectedItems:n,containerTypeArr:y,deleteTypeArr:h,operateConfirm:b,deleteConfirm:x,tableDataCopy:D,deployInfo:W,dockerAppTypes:kc,dockerApps:$,appSearch:V,appType:F,handleAppGet:z,handleReset:I,handleDeploy:T}}};const Dc=(0,Gl.Z)(Cc,[["render",hc]]);var Sc=Dc;const Wc=128,zc=e=>{const l=e.replace("#",""),t=parseInt(l.substr(0,2),16),a=parseInt(l.substr(2,2),16),o=parseInt(l.substr(4,2),16),i=.2126*t+.7152*a+.0722*o;return i>Wc?"#bad6fc":"#555555"};var Ic={name:"FrameWork",components:{FileIcons:Xl(),NoData:Zl,ToolTip:ht,DockerBlock:Sc,ConnectSetting:Ft,PreferenceSetting:Wa,FileBlock:wn,TCodeWorkflow:Hn,TCodeCenter:Ir,CooperateGen:jr,StatusMonitor:ad,QuestionFilled:Fl.Ruj,VideoPlay:Fl.GhU,VideoPause:Fl.lBU,ChromeFilled:Fl.MK,ArrowRight:Fl.olP,UserFilled:Fl.wvC,FolderOpened:Fl.JZA,CircleClose:Fl.K41},props:["osInfo"],setup(e){const l=(0,He.iH)({Fail:"Fail to connect remote server !\r\n",Success:"Connecting success !\r\n",Connecting:"Connecting to remote server ...\r\n",Disconnected:"Disconnect to remote server.\r\n",End:"This Cooperation is Ended.\r\n"}),t=(0,He.iH)(l.value["Connecting"]),a=(0,f.FN)(),{toClipboard:i}=(0,Re.Z)(),s=new Oe.FitAddon,n=(0,He.iH)(!1),r=(0,He.iH)(""),u=(0,He.iH)([]),d=()=>{r.value=crypto.randomUUID(),u.value=[],u.value.push({time:(new Date).getTime(),content:"Record "+r.value+" Start.\r\n"}),n.value=!0},p=async()=>{n.value=!1,u.value.push({time:(new Date).getTime(),content:"\r\nRecord "+r.value+" Over."}),await Co("record-",r.value,JSON.stringify(u.value)),await i(_t()+"?record="+r.value),(0,Ee.z8)({message:El.global.t("录像链接已复制"),type:"success",grouping:!0})},g=e=>{const l=u.value[e];l&&$(l.content);const t=u.value[e+1];t&&setTimeout((()=>{g(e+1)}),t.time-l.time)},w=async()=>{if(C.value.user)Nl(El.global.t("提示"),El.global.t("确定从云端覆盖本地数据吗?"),y);else{await Wo();const e=_t()+"?user="+qe(Io.getItem(ko["user"]));await i(e),(0,Ee.z8)({message:El.global.t("多端同步链接已复制"),type:"success",grouping:!0,repeatNum:Number.MIN_SAFE_INTEGER})}},y=async()=>{await zo(Ge(C.value.user))},h=(0,He.iH)({}),k=()=>{Io.getItem(ko["options"])?h.value=JSON.parse(m(Io.getItem(ko["options"]))):h.value={}};k();const _=(0,He.iH)({}),b=()=>{_.value={},Io.getItem(ko["tcodes"])&&(_.value=JSON.parse(m(Io.getItem(ko["tcodes"])))),setTimeout((()=>{we.value.userTCodes={..._.value}}),1)};b();const x=(0,He.iH)(Ke),C=(0,He.iH)(kt()),D=()=>{Io.getItem(ko["env"])&&(x.value={...x.value,...JSON.parse(m(Io.getItem(ko["env"])))}),C.value.bg&&"#"!==C.value.bg[0]&&(C.value.bg="#"+C.value.bg),C.value.fg&&"#"!==C.value.fg[0]&&(C.value.fg="#"+C.value.fg),"true"===C.value.cursorBlink?C.value.cursorBlink=!0:"false"===C.value.cursorBlink&&(C.value.cursorBlink=!1),"true"===C.value.tCode?C.value.tCode=!0:"false"===C.value.tCode&&(C.value.tCode=!1),"true"===C.value.cloud?C.value.cloud=!0:"false"===C.value.cloud&&(C.value.cloud=!1);for(const l in C.value)l in x.value&&-1===l.lastIndexOf("_")&&(x.value[l]=C.value[l]);const e=h.value[x.value["option"]];e?x.value={...x.value,...e}:x.value.option="",C.value.option=x.value.option,C.value.record?("headless"!==C.value.mode&&"pure"!==C.value.mode&&(C.value.mode="pure"),t.value=""):C.value.record="",C.value.cooperate?"headless"!==C.value.mode&&"pure"!==C.value.mode&&(C.value.mode="pure"):C.value.cooperate="",x.value.lang||(x.value.lang="en"),El.global.locale=x.value.lang,No("option",x.value.option)};D();const S=(e,l)=>{e&&(h.value={...h.value,[e]:l}),Io.setItem(ko["options"],c(JSON.stringify(h.value))),k()},W=e=>{delete h.value[e],S(null,null),x.value.option&&x.value.option===e&&le({option:""},!1)},z=(0,He.iH)();let I=null;const T=(0,He.iH)(!0),V=()=>{I=new Ne.Terminal({convertEol:!0,scrollback:Number.MAX_SAFE_INTEGER,disableStdin:!1,cursorStyle:x.value.cursorStyle,cursorInactiveStyle:"outline",cursorBlink:x.value.cursorBlink,theme:{foreground:x.value.fg,background:x.value.bg,cursor:x.value.fg,selectionBackground:zc(x.value.bg)},lineHeight:1.2,fontFamily:x.value.fontFamily,fontSize:x.value.fontSize}),I.loadAddon(s)},F=()=>{if(z.value.style.height=window.innerHeight-("headless"!==C.value.mode?25:0)+"px",s.fit(),A.value&&A.value.readyState==WebSocket.OPEN&&I){const e=s.proposeDimensions().rows,l=s.proposeDimensions().cols;A.value.send(c(JSON.stringify({type:1,content:"",rows:e,cols:l}),L.value)),I.resize(l,e)}},$=e=>{e&&I.write(e)},U=(0,He.iH)(!1),R=(0,He.iH)(0),H=(0,He.iH)(0),E=e=>{H.value=e,U.value=!0},N=()=>{o().ajax({url:Pe+"/cooperate/end",type:"post",data:{sshKey:K.value},async success(e){"success"===e.status&&(H.value=0,U.value=!1),(0,Ee.z8)({message:e.info,type:e.status})}})},O=()=>{Nl(El.global.t("提示"),El.global.t("确定结束此次协作吗?"),N)},K=(0,He.iH)(""),L=(0,He.iH)(""),A=(0,He.iH)(null),M=()=>{L.value=Ye(16);const e={};e.secretKey=v(L.value),e.envInfo=c(JSON.stringify({...x.value,cooperateKey:C.value.cooperate}),L.value),A.value=new WebSocket(Me+je(c(JSON.stringify(e)))),A.value.onopen=()=>{F()},A.value.onmessage=e=>{const a=JSON.parse(e.data);if(-2==a.code)I.clear(),t.value=l.value["Fail"],$(a.info+".\n");else if(-1==a.code)I.clear(),t.value=l.value["Fail"],$(t.value),setTimeout((()=>{ne(1)}),400);else if(0==a.code){if(I.clear(),t.value=l.value["Success"],setTimeout((()=>{F()}),1),C.value.cooperate)return void $(a.info+".\n");K.value=m(m(a.data),L.value),C.value.cmd&&(C.value.cmd.toLowerCase().startsWith("bash:")?te(C.value.cmd.substring(5)+"\n"):C.value.cmd.toLowerCase().startsWith("tcode:")&&setTimeout((()=>{pe.value=C.value.cmd.substring(6),me({key:"Enter"})}),400)),x.value.advance&&"root"===x.value.server_user&&Q.value&&Q.value.doMonitor(),x.value.advance&&ee.value&&ee.value.getDockerVersion(K.value)}else if(1==a.code){const e=m(m(a.data),L.value);Ho.active&&Ho.outArray.push(e),n.value&&u.value.push({time:(new Date).getTime(),content:e}),Ho.active&&!Ho.display||$(e)}else if(2==a.code)R.value=Number(m(m(a.data),L.value));else if(3==a.code){const e=JSON.parse(m(m(a.data),L.value)),l=parseInt(e.index),t=e.id;3===l?(Ie(1,1,t,null),Ie(2,1,t,null),Ie(3,0,t,e)):(Ie(0,1,t,null),Ie(l,0,t,e))}},A.value.onclose=e=>{if(t.value===l.value["Success"]&&3333!=e.code){if(K.value="",C.value.cooperate)return t.value=l.value["End"],void $("\r\n"+t.value);de(),t.value=l.value["Disconnected"],$("\r\n"+t.value)}Ho.reset()}},P=(0,He.iH)(!1),j=(0,He.iH)(!1),B=e=>{P.value=e,j.value=!1,G(!1)};let q=null;const G=e=>{q&&clearTimeout(q),j.value!==e&&(q=setTimeout((()=>{j.value=e}),400))},Y=(0,He.iH)(),Z=(0,He.iH)(),J=(0,He.iH)(),X=(0,He.iH)(),Q=(0,He.iH)(),ee=(0,He.iH)(),le=(e,l=!0)=>{let t=Ke;Io.getItem(ko["env"])&&(t={...t,...JSON.parse(m(Io.getItem(ko["env"])))}),t={...t,...e},Io.setItem(ko["env"],c(JSON.stringify(t)));for(const a in e)a in C.value&&(C.value[a]=e[a]);l&&ne(3)},te=(e,l=!1)=>{A.value&&(T.value&&(F(),T.value=!1),Ho.active===l&&A.value.send(c(JSON.stringify({type:0,content:e,rows:0,cols:0}),L.value)))},ae=e=>{e.preventDefault(),te(e.target.value),e.target.value=""},oe=async function(e){e.preventDefault();const l=await navigator.clipboard.readText();te(l)},ie=()=>{B(!1)},se=()=>{I&&z.value&&(z.value.removeEventListener("contextmenu",oe),z.value.removeEventListener("compositionend",ae),z.value.removeEventListener("click",ie)),z.value.innerHTML="",T.value=!0,D(),V(),I.open(z.value),F(),z.value.addEventListener("compositionend",ae),I.onKey((e=>{te(e.key)})),I.onSelectionChange((async()=>{if(I.hasSelection()){const e=I.getSelection();e.trim()&&await i(e)}})),z.value.addEventListener("contextmenu",oe),z.value.addEventListener("click",ie),$(t.value)},ne=e=>{1===e?(B(!1),Y.value.DialogVisible=!0):2===e?(B(!1),Z.value.DialogVisible=!0):3===e?(B(!1),t.value=l.value["Connecting"],K.value="",A.value&&A.value.close(3333),de(),se(),M()):4===e?(B(!1),J.value.getInitDir(),J.value.DialogVisible=!0):5===e?(P.value=!0,j.value=!0,G(!0)):6===e?(B(!1),X.value.DialogVisible=!0):7===e?(B(!1),setTimeout((()=>{Q.value.updateNetworkData(),Q.value.updateDiskData()}),1),Q.value.DialogVisible=!0):8===e&&(B(!1),ee.value.DialogVisible=!0)};let re=null;const ue=()=>{null==re&&(re=setInterval((()=>{A.value&&A.value.readyState==WebSocket.OPEN&&A.value.send(c(JSON.stringify({type:2,content:"",rows:0,cols:0}),L.value)),"Linux"!==e.osInfo.serverOS&&o().ajax({url:Pe+"/beat",type:"post",data:{windowId:e.osInfo.windowId},success(){}})}),25e3))},de=()=>{J.value&&J.value.deepCloseDialog(),X.value&&X.value.closeDialog(),U.value=!1,R.value=0,H.value=0,Q.value&&Q.value.deepCloseDialog(),ee.value&&ee.value.deepCloseDialog(),ze()},ce=(e,l)=>{_.value[e].status=l,Io.setItem(ko["tcodes"],c(JSON.stringify(_.value))),setTimeout((()=>{we.value.userTCodes={..._.value}}),1)},pe=(0,He.iH)(""),me=async e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key)return e.preventDefault(),void("ArrowUp"===e.key?pe.value=Po.up(pe.value):pe.value=Po.down(pe.value));if("Enter"!==e.key)return;if(!pe.value||pe.value.length<2)return;const l=pe.value.toUpperCase();if(pe.value="",Po.add(l),"F"===l[0]&&$o[l])$o[l].execFlow(a);else if("S"===l[0]&&Uo[l])Uo[l].execFlow(a);else if("U"===l[0]&&_.value[l])if(Ho.writeNoAwait||(Ho.writeNoAwait=te),Ho.context||(Ho.fileBlockRef=J.value),Ho.active)(0,Ee.z8)({message:El.global.t("其它终端代码正在执行"),type:"warning",grouping:!0});else{if(Ho.reset(),Ho.active=!0,!_.value[l].execFlow||!(_.value[l].execFlow instanceof Function)){const e=_.value[l].workflow.toString();try{_.value[l].execFlow=new Function("kkTerminal",`return (async function() { ${e} })()`)}catch(t){return ce(l,"Compile Error"),(0,Ee.z8)({message:El.global.t("终端代码")+" "+l+" "+El.global.t("编译错误：")+t,type:"error",grouping:!0}),void Ho.reset()}}try{await _.value[l].execFlow(Ro),(0,Ee.z8)({message:El.global.t("终端代码")+" "+l+" "+El.global.t("工作流结束"),type:"success",grouping:!0}),ce(l,"Execute Success")}catch(t){(0,Ee.z8)({message:El.global.t("终端代码")+" "+l+" "+El.global.t("执行中断：")+t,type:"warning",grouping:!0}),ce(l,"Execute Interrupt")}finally{Ho.reset()}}else"F"===l[0]||"S"===l[0]||"U"===l[0]?(0,Ee.z8)({message:El.global.t("终端代码")+" "+l+" "+El.global.t("不存在"),type:"warning",grouping:!0}):(0,Ee.z8)({message:El.global.t("终端代码必须以 F,S,U 开头"),type:"warning",grouping:!0})},ve=(0,He.iH)(),ge=e=>{const l={..._.value,...e};Io.setItem(ko["tcodes"],c(JSON.stringify(l))),b()},fe=()=>{let e={};Io.getItem(ko["tcodes"])&&(e=JSON.parse(m(Io.getItem(ko["tcodes"]))));const l=new Blob([JSON.stringify(e,null,4)],{type:"text/plain"}),t=URL.createObjectURL(l),a=document.createElement("a");a.href=t,a.download="TerminalCode.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t)},we=(0,He.iH)(),ye=(e,l)=>{const t={};t[e]={desc:_.value[e].desc||"",workflow:l||"",status:"Not Active"},ge(t)},he=e=>{delete _.value[e],ge({})},ke=()=>{window.addEventListener("resize",(()=>{J.value&&(J.value.isShowMenu=!1,J.value.isShowPop=!1),F()}))},_e=e=>{te(e)},be=e=>{te(e)},xe=(0,He.iH)({}),Ce=(0,He.iH)({}),De=(0,He.iH)({}),Se=(0,He.iH)({}),We={0:xe,1:Ce,2:De,3:Se},ze=()=>{xe.value={},Ce.value={},De.value={},Se.value={},Te.value=!1},Ie=(e,l,t,a)=>{const o=We[e%4];if(2===l)return o.value[t];if(delete o.value[t],0===l){const e={};e[t]=a,o.value={...e,...o.value}}Te.value=!0},Te=(0,He.iH)(!1),Ve=(0,He.iH)(!1),Fe=e=>{Ve.value=e,Te.value=!1},$e=async(e,l)=>{await J.value.fileBlockView(e,l)};return(0,f.bv)((async()=>{if(se(),C.value.record)return ke(),u.value=await Do("record-"+C.value.record),void(u.value&&g(0));M(),ke(),ue()})),(0,f.Ah)((()=>{I&&z.value&&(z.value.removeEventListener("contextmenu",oe),z.value.removeEventListener("compositionend",ae),z.value.removeEventListener("click",ie)),re&&clearInterval(re)})),{recording:n,startRecord:d,stopRecord:p,cloudSync:w,env:x,urlParams:C,options:h,now_connect_status:t,connect_status:l,terminal:z,doSSHConnect:M,socket:A,showAdvance:G,showSettings:B,isShowSetting:P,isShowAdvance:j,doSettings:ne,connectSettingRef:Y,preferenceSettingRef:Z,fileBlockRef:J,cooperateGenRef:X,statusMonitorRef:Q,dockerBlockRef:ee,saveEnv:le,sshKey:K,doHeartBeat:ue,saveOp:S,deleteOp:W,tcode:pe,handleTCode:me,closeBlock:de,resetTerminal:se,tcodes:_,tCodeWorkflowRef:ve,sendMessage:te,importTCodes:ge,exportTCodes:fe,tCodeCenterRef:we,handleSaveTCode:ye,handleDeleteTCode:he,cooperating:U,onlineNumber:R,maxNumber:H,handleCooperate:E,endCooperateConfirm:O,calcType:ju,calcSize:Vs,installDocker:_e,runContainer:be,waitingList:xe,uploadingList:Ce,downloadingList:De,finishedList:Se,updateTransportLists:Ie,isShowDot:Te,isShowDropdown:Ve,changeDropdownShowStatus:Fe,fileBlockView:$e}}};const Tc=(0,Gl.Z)(Ic,[["render",Ue],["__scopeId","data-v-9098e826"]]);var Vc=Tc,Fc={name:"App",components:{FrameWork:Vc},setup(){const e=(0,He.iH)(!1),l=(0,He.iH)(null);return(0,f.bv)((()=>{setTimeout((()=>{o().ajax({url:Pe+"/init",type:"post",success(t){const a=JSON.parse(t.info);d.aes(a.aesKey),d.rsa(a.publicKey),l.value=a.osInfo,zo().then((()=>{e.value=!0}))}})}),1)})),{isInitialized:e,osInfo:l}}};const $c=(0,Gl.Z)(Fc,[["render",w]]);var Uc=$c;const Rc=e=>{const l=window.getComputedStyle(e),t=l.transform;if("none"===t)return 0;const a=new DOMMatrix(t);return a.m41},Hc={updated(e,l){setTimeout((()=>{const t=e.querySelector(".el-dialog__header"),a=e.querySelector(".el-dialog__body");if(!t&&!a)return;const o=e.querySelector(".resize-handle");if(o)return;const i=e.querySelector(".el-dialog"),{minWidthRate:s,maxWidthRate:n}=l.value||{},r=i.offsetWidth/(s||2),u=Math.min(i.offsetWidth*(n||2),.8*document.documentElement.clientWidth),d=document.createElement("div");d.classList.add("resize-handle","handle-left");const c=document.createElement("div");c.classList.add("resize-handle","handle-right"),t.appendChild(d),a.appendChild(d),t.appendChild(c),a.appendChild(c);const p={left:0,right:0};d.onpointerdown=e=>{e.preventDefault(),e.stopPropagation(),d.setPointerCapture(e.pointerId),p.left=e.clientX-d.getBoundingClientRect().left,d.onpointermove=e=>{if(e.preventDefault(),e.stopPropagation(),1!==e.buttons)return;const l=document.documentElement.clientWidth,t=l/2+Rc(i);i.style.width=Math.min(u,Math.max(r,2*(t-e.clientX+p.left)))+"px"},d.onpointerup=()=>{d.onpointermove=null,d.onpointerup=null}},c.onpointerdown=e=>{e.preventDefault(),e.stopPropagation(),c.setPointerCapture(e.pointerId),p.right=c.getBoundingClientRect().right-e.clientX,c.onpointermove=e=>{if(e.preventDefault(),e.stopPropagation(),1!==e.buttons)return;const l=document.documentElement.clientWidth,t=l/2+Rc(i);i.style.width=Math.min(u,Math.max(r,2*(e.clientX-t+p.right)))+"px"},c.onpointerup=()=>{c.onpointermove=null,c.onpointerup=null}}}),1)}};var Ec=Hc,Nc=(t(4415),t(3441)),Oc=t(7086),Kc=t(1015),Lc=t(5133),Ac=t(6497),Mc=t(1179),Pc=t(881),jc=t(9695),Bc=t(3509),qc=t(1745),Gc=t(1932),Yc=t(6164),Zc=t(1183),Jc=t(5410),Xc=t(8631),Qc=t(4775),ep=t(3838),lp=t(7919),tp=t(1902),ap=t(2563),op=t(5097),ip=t(4143);o().ajaxSetup({cache:!1,processData:!0,xhrFields:{withCredentials:!0},dataFilter(e){return e=JSON.parse(e),e.data&&(e.data=JSON.parse(m(e.data))),JSON.stringify(e)}});const sp=(0,g.ri)(Uc);sp.directive("resizable",Ec),sp.use(Nc.ElButton).use(Oc.d0).use(Kc.gn).use(Lc.EZ).use(Ac.LW).use(Mc.$).use(Pc.Ub).use(Pc.p8).use(jc.b9).use(Bc.Q0).use(qc.ElCheckbox).use(Gc.Xh).use(Yc.eI).use(Zc.dQ),sp.use(Jc.YK).use(Jc.o2).use(Jc.Df).use(Xc.OX).use(Qc.kN).use(ep.KD).use(ep.rh).use(lp.$t).use(tp.Ks).use(ap.i1).use(op.d6).use(ip.Kf),sp.use(El),sp.mount("#app");const np=(e,l)=>{let t=null;return function(){const a=this,o=arguments;clearTimeout(t),t=setTimeout((function(){e.apply(a,o)}),l)}},rp=window.ResizeObserver;window.ResizeObserver=class extends rp{constructor(e){e=np(e,16),super(e)}},sp.config.warnHandler=()=>{}},2716:function(e,l,t){var a={"./custom.svg":6489,"./kkTerminal.svg":8415};function o(e){var l=i(e);return t(l)}function i(e){if(!t.o(a,e)){var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=i,e.exports=o,o.id=2716},6489:function(e,l,t){"use strict";e.exports=t.p+"img/custom.291befd2.svg"},8415:function(e,l,t){"use strict";e.exports=t.p+"img/kkTerminal.8cd2b86b.svg"},2480:function(){},5832:function(){}},l={};function t(a){var o=l[a];if(void 0!==o)return o.exports;var i=l[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,function(){t.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){var e=[];t.O=function(l,a,o,i){if(!a){var s=1/0;for(d=0;d<e.length;d++){a=e[d][0],o=e[d][1],i=e[d][2];for(var n=!0,r=0;r<a.length;r++)(!1&i||s>=i)&&Object.keys(t.O).every((function(e){return t.O[e](a[r])}))?a.splice(r--,1):(n=!1,i<s&&(s=i));if(n){e.splice(d--,1);var u=o();void 0!==u&&(l=u)}}return l}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,o,i]}}(),function(){t.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(l,{a:l}),l}}(),function(){t.d=function(e,l){for(var a in l)t.o(l,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:l[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(l){return 0===e[l]};var l=function(l,a){var o,i,s=a[0],n=a[1],r=a[2],u=0;if(s.some((function(l){return 0!==e[l]}))){for(o in n)t.o(n,o)&&(t.m[o]=n[o]);if(r)var d=r(t)}for(l&&l(a);u<s.length;u++)i=s[u],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(d)},a=self["webpackChunkterminal"]=self["webpackChunkterminal"]||[];a.forEach(l.bind(null,0)),a.push=l.bind(null,a.push.bind(a))}();var a=t.O(void 0,[998],(function(){return t(2660)}));a=t.O(a)})();